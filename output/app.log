2025-06-05 14:52:50,370 - __main__ - INFO - Start the server on port 8012
2025-06-05 14:52:53,118 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-06-05 14:52:53,118 - ragAgent - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-06-05 14:52:53,119 - ragAgent - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-06-05 14:52:53,121 - __main__ - INFO - Database connection pool initialized
2025-06-05 14:52:53,122 - __main__ - DEBUG - Database connection pool initialized
2025-06-05 14:52:53,123 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 14:52:53,141 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-06-05 14:52:53,605 - ragAgent - INFO - Graph visualization saved as graph.png
2025-06-05 14:53:46,059 - __main__ - INFO - The user's user_input is: 你好
2025-06-05 14:53:46,089 - ragAgent - INFO - Agent processing user query
2025-06-05 14:53:46,090 - ragAgent - INFO - agent question:content='你好' additional_kwargs={} response_metadata={} id='d42323a8-4094-42f6-a6d5-6e05dc7d8fc8'
2025-06-05 14:53:46,389 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-06-05 14:53:46,969 - __main__ - INFO - Streaming chunk from agent: 你好
2025-06-05 14:53:46,989 - __main__ - INFO - Streaming chunk from agent: ！
2025-06-05 14:53:47,309 - __main__ - INFO - Streaming chunk from agent: 有什么
2025-06-05 14:53:47,423 - __main__ - INFO - Streaming chunk from agent: 可以帮助你的吗？
2025-06-05 14:53:47,537 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 14:53:53,125 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 14:54:25,692 - __main__ - INFO - The user's user_input is: 3*4
2025-06-05 14:54:25,702 - ragAgent - INFO - Agent processing user query
2025-06-05 14:54:25,703 - ragAgent - INFO - agent question:content='3*4' additional_kwargs={} response_metadata={} id='59b35e76-516d-4e52-a9ef-dbea31f5428e'
2025-06-05 14:54:25,910 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-05 14:54:26,930 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 14:54:31,036 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 14:54:31,204 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 14:54:31,503 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 14:54:31,506 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 14:54:31,509 - ragAgent - INFO - Tool multiply routed to generate based on config
2025-06-05 14:54:31,510 - ragAgent - INFO - Generating final response
2025-06-05 14:54:31,511 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-06-05 14:54:31,882 - __main__ - INFO - Streaming chunk from generate: 
2025-06-05 14:54:31,882 - __main__ - INFO - Streaming chunk from generate: 3
2025-06-05 14:54:32,057 - __main__ - INFO - Streaming chunk from generate: *4的结果是12
2025-06-05 14:54:32,847 - __main__ - INFO - Streaming chunk from generate: .0。不过
2025-06-05 14:54:33,153 - __main__ - INFO - Streaming chunk from generate: ，通常我们会说
2025-06-05 14:54:33,575 - __main__ - INFO - Streaming chunk from generate: 这个结果就是12（
2025-06-05 14:54:34,324 - __main__ - INFO - Streaming chunk from generate: 整数形式），
2025-06-05 14:54:34,565 - __main__ - INFO - Streaming chunk from generate: 除非在特定情况下
2025-06-05 14:54:35,368 - __main__ - INFO - Streaming chunk from generate: 需要强调它是12.
2025-06-05 14:54:35,543 - __main__ - INFO - Streaming chunk from generate: 0（小数或
2025-06-05 14:54:36,098 - __main__ - INFO - Streaming chunk from generate: 浮点数形式
2025-06-05 14:54:36,428 - __main__ - INFO - Streaming chunk from generate: ）。在这里，根据
2025-06-05 14:54:36,736 - __main__ - INFO - Streaming chunk from generate: 已知内容，答案
2025-06-05 14:54:36,884 - __main__ - INFO - Streaming chunk from generate: 是12.
2025-06-05 14:54:36,957 - __main__ - INFO - Streaming chunk from generate: 0。
2025-06-05 14:54:37,004 - __main__ - INFO - Streaming chunk from generate: 
2025-06-05 14:54:53,126 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 14:55:53,127 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 14:56:03,037 - __main__ - INFO - The user's user_input is: 3*4
2025-06-05 14:56:03,045 - ragAgent - INFO - Agent processing user query
2025-06-05 14:56:03,046 - ragAgent - INFO - agent question:content='3*4' additional_kwargs={} response_metadata={} id='8b8f94b9-50cc-47e6-929f-5d8ff5ae42a3'
2025-06-05 14:56:03,256 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-05 14:56:05,334 - __main__ - INFO - Final Response is: 3*4的结果是12。如果你有其他问题或需要进一步的帮助，请告诉我！
2025-06-05 14:56:05,336 - __main__ - INFO - Results for Formatting: 3*4的结果是12。如果你有其他问题或需要进一步的帮助，请告诉我！
2025-06-05 14:56:05,337 - __main__ - INFO - Send response content: 
id='chatcmpl-8e05b26a530d43e8a236919306e5171f' object='chat.completion' created=1749106565 choices=[ChatCompletionResponseChoice(index=0, message=Message(role='assistant', content='3*4的结果是12。如果你有其他问题或需要进一步的帮助，请告诉我！'), finish_reason='stop')] system_fingerprint=None
2025-06-05 14:56:34,914 - __main__ - INFO - Database connection pool closed
2025-06-05 14:56:34,914 - __main__ - INFO - The service has been shut down
2025-06-05 21:49:57,513 - __main__ - INFO - Start the server on port 8012
2025-06-05 21:50:00,157 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-06-05 21:50:00,158 - ragAgent - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-06-05 21:50:00,159 - ragAgent - INFO - Initialized ToolConfig with tools: {'multiply', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-06-05 21:50:00,160 - __main__ - INFO - Database connection pool initialized
2025-06-05 21:50:00,161 - __main__ - DEBUG - Database connection pool initialized
2025-06-05 21:50:00,162 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 21:50:00,177 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-06-05 21:50:00,354 - ragAgent - INFO - Graph visualization saved as graph.png
2025-06-05 21:51:00,164 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 21:51:53,920 - __main__ - INFO - The user's user_input is: 你好
2025-06-05 21:51:53,935 - ragAgent - INFO - Agent processing user query
2025-06-05 21:51:53,936 - ragAgent - INFO - agent question:content='你好' additional_kwargs={} response_metadata={} id='0f2ba414-3e54-445a-8f19-559273105aad'
2025-06-05 21:51:54,169 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-06-05 21:51:54,724 - __main__ - INFO - Streaming chunk from agent: 你好
2025-06-05 21:51:54,768 - __main__ - INFO - Streaming chunk from agent: ！
2025-06-05 21:51:54,864 - __main__ - INFO - Streaming chunk from agent: 有什么
2025-06-05 21:51:55,075 - __main__ - INFO - Streaming chunk from agent: 我可以帮你的吗？
2025-06-05 21:51:55,170 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 21:52:00,166 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 21:52:33,608 - __main__ - INFO - The user's user_input is: 3乘以4等于多少
2025-06-05 21:52:33,617 - ragAgent - INFO - Agent processing user query
2025-06-05 21:52:33,618 - ragAgent - INFO - agent question:content='3乘以4等于多少' additional_kwargs={} response_metadata={} id='0629b2b0-706c-4019-83cf-16d2436d44b3'
2025-06-05 21:52:33,845 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-05 21:52:34,890 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 21:52:35,011 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 21:52:35,269 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 21:52:35,321 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 21:52:35,322 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 21:52:35,325 - ragAgent - INFO - Tool multiply routed to generate based on config
2025-06-05 21:52:35,327 - ragAgent - INFO - Generating final response
2025-06-05 21:52:35,328 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-06-05 21:52:35,679 - __main__ - INFO - Streaming chunk from generate: 
2025-06-05 21:52:35,680 - __main__ - INFO - Streaming chunk from generate: 3
2025-06-05 21:52:35,756 - __main__ - INFO - Streaming chunk from generate: 乘以4等于12
2025-06-05 21:52:35,807 - __main__ - INFO - Streaming chunk from generate: 。
2025-06-05 21:52:35,874 - __main__ - INFO - Streaming chunk from generate: 
2025-06-05 21:53:00,167 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 21:53:31,762 - __main__ - INFO - The user's user_input is: 张三九的健康档案信息信息
2025-06-05 21:53:31,769 - ragAgent - INFO - Agent processing user query
2025-06-05 21:53:31,770 - ragAgent - INFO - agent question:content='张三九的健康档案信息信息' additional_kwargs={} response_metadata={} id='e8c5885c-5ace-4b78-9caf-dea612e2200c'
2025-06-05 21:53:31,992 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-05 21:53:33,060 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 21:53:33,137 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 21:53:33,233 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 21:53:33,234 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 21:53:33,429 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-06-05 21:53:33,431 - ragAgent - INFO - Grading documents for relevance
2025-06-05 21:53:33,432 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-06-05 21:53:34,802 - ragAgent - INFO - Document relevance score: yes
2025-06-05 21:53:34,803 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-06-05 21:53:34,804 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-06-05 21:53:34,805 - ragAgent - INFO - Generating final response
2025-06-05 21:53:34,806 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-06-05 21:53:35,698 - __main__ - INFO - Streaming chunk from generate: 
2025-06-05 21:53:35,700 - __main__ - INFO - Streaming chunk from generate: 根据
2025-06-05 21:53:35,839 - __main__ - INFO - Streaming chunk from generate: 您提供的信息，张三
2025-06-05 21:53:36,044 - __main__ - INFO - Streaming chunk from generate: 九的健康档案如下：


2025-06-05 21:53:36,250 - __main__ - INFO - Streaming chunk from generate: ### 一、基本信息
2025-06-05 21:53:36,458 - __main__ - INFO - Streaming chunk from generate: 
- **姓名**：
2025-06-05 21:53:36,579 - __main__ - INFO - Streaming chunk from generate: 张三九
- **
2025-06-05 21:53:36,815 - __main__ - INFO - Streaming chunk from generate: 性别**：男
-
2025-06-05 21:53:36,904 - __main__ - INFO - Streaming chunk from generate:  **出生日期**：1
2025-06-05 21:53:37,200 - __main__ - INFO - Streaming chunk from generate: 985年5月
2025-06-05 21:53:37,348 - __main__ - INFO - Streaming chunk from generate: 20日
- **
2025-06-05 21:53:37,544 - __main__ - INFO - Streaming chunk from generate: 年龄**：39岁
2025-06-05 21:53:37,672 - __main__ - INFO - Streaming chunk from generate: 
- **婚姻状况**
2025-06-05 21:53:37,987 - __main__ - INFO - Streaming chunk from generate: ：已婚
- **
2025-06-05 21:53:38,108 - __main__ - INFO - Streaming chunk from generate: 职业**：IT工程师

2025-06-05 21:53:38,293 - __main__ - INFO - Streaming chunk from generate: - **血型**：
2025-06-05 21:53:38,424 - __main__ - INFO - Streaming chunk from generate: O型
- **联系电话
2025-06-05 21:53:38,614 - __main__ - INFO - Streaming chunk from generate: **：138-
2025-06-05 21:53:38,751 - __main__ - INFO - Streaming chunk from generate: 1234-5
2025-06-05 21:53:39,067 - __main__ - INFO - Streaming chunk from generate: 678
- **
2025-06-05 21:53:39,188 - __main__ - INFO - Streaming chunk from generate: 电子邮箱**：zhang
2025-06-05 21:53:39,403 - __main__ - INFO - Streaming chunk from generate: san@example.com
- **
2025-06-05 21:53:39,708 - __main__ - INFO - Streaming chunk from generate: 居住地址**：上海市浦东
2025-06-05 21:53:39,837 - __main__ - INFO - Streaming chunk from generate: 新区张江路12
2025-06-05 21:53:40,092 - __main__ - INFO - Streaming chunk from generate: 3号
- **紧急
2025-06-05 21:53:40,163 - __main__ - INFO - Streaming chunk from generate: 联系人**：妻子
2025-06-05 21:53:40,347 - __main__ - INFO - Streaming chunk from generate: 李四六

2025-06-05 21:53:40,626 - __main__ - INFO - Streaming chunk from generate: - **紧急联系人电话
2025-06-05 21:53:40,760 - __main__ - INFO - Streaming chunk from generate: **：138-
2025-06-05 21:53:41,842 - __main__ - INFO - Streaming chunk from generate: 8765-4
2025-06-05 21:53:41,965 - __main__ - INFO - Streaming chunk from generate: 321

### 
2025-06-05 21:53:42,170 - __main__ - INFO - Streaming chunk from generate: 二、医疗历史
-
2025-06-05 21:53:42,291 - __main__ - INFO - Streaming chunk from generate:  **高血压**：20
2025-06-05 21:53:42,501 - __main__ - INFO - Streaming chunk from generate: 05年确诊，接受
2025-06-05 21:53:42,626 - __main__ - INFO - Streaming chunk from generate: 降压药物治疗。

2025-06-05 21:53:42,834 - __main__ - INFO - Streaming chunk from generate: - **二型糖尿病**
2025-06-05 21:53:42,994 - __main__ - INFO - Streaming chunk from generate: ：2010年
2025-06-05 21:53:43,159 - __main__ - INFO - Streaming chunk from generate: 确诊，使用口服降糖
2025-06-05 21:53:43,293 - __main__ - INFO - Streaming chunk from generate: 药进行管理。
-
2025-06-05 21:53:43,494 - __main__ - INFO - Streaming chunk from generate:  **脂肪肝**：2
2025-06-05 21:53:43,631 - __main__ - INFO - Streaming chunk from generate: 017年诊断，
2025-06-05 21:53:43,848 - __main__ - INFO - Streaming chunk from generate: 建议通过饮食调整
2025-06-05 21:53:44,084 - __main__ - INFO - Streaming chunk from generate: 和增加运动来改善。

2025-06-05 21:53:44,292 - __main__ - INFO - Streaming chunk from generate: - **腰椎间盘
2025-06-05 21:53:44,877 - __main__ - INFO - Streaming chunk from generate: 突出**：202
2025-06-05 21:53:45,023 - __main__ - INFO - Streaming chunk from generate: 2年接受微创手术，
2025-06-05 21:53:45,243 - __main__ - INFO - Streaming chunk from generate: 术后恢复良好。
- **
2025-06-05 21:53:45,456 - __main__ - INFO - Streaming chunk from generate: 过敏史**：

2025-06-05 21:53:45,660 - __main__ - INFO - Streaming chunk from generate:   - 青霉素
2025-06-05 21:53:45,873 - __main__ - INFO - Streaming chunk from generate: ：曾出现皮疹
2025-06-05 21:53:46,067 - __main__ - INFO - Streaming chunk from generate: 和呼吸困难。
  -
2025-06-05 21:53:46,201 - __main__ - INFO - Streaming chunk from generate:  海鲜：轻度
2025-06-05 21:53:46,405 - __main__ - INFO - Streaming chunk from generate: 皮肤发痒。


2025-06-05 21:53:46,603 - __main__ - INFO - Streaming chunk from generate: - **家族病
2025-06-05 21:53:46,818 - __main__ - INFO - Streaming chunk from generate: 史**：
  -
2025-06-05 21:53:46,950 - __main__ - INFO - Streaming chunk from generate:  父亲：患有
2025-06-05 21:53:47,207 - __main__ - INFO - Streaming chunk from generate: 高血压和二型糖尿病。

2025-06-05 21:53:47,302 - __main__ - INFO - Streaming chunk from generate:   - 母亲
2025-06-05 21:53:47,521 - __main__ - INFO - Streaming chunk from generate: ：有甲状腺疾病史。


2025-06-05 21:53:47,646 - __main__ - INFO - Streaming chunk from generate: ### 三、生活方式和
2025-06-05 21:53:47,873 - __main__ - INFO - Streaming chunk from generate: 习惯
- **饮食习惯
2025-06-05 21:53:48,008 - __main__ - INFO - Streaming chunk from generate: **：偏向高脂肪和
2025-06-05 21:53:48,197 - __main__ - INFO - Streaming chunk from generate: 高糖食品，蔬菜和
2025-06-05 21:53:48,343 - __main__ - INFO - Streaming chunk from generate: 水果摄入较少，盐分
2025-06-05 21:53:48,655 - __main__ - INFO - Streaming chunk from generate: 摄入偏高。
- **
2025-06-05 21:53:48,806 - __main__ - INFO - Streaming chunk from generate: 运动情况**：工作
2025-06-05 21:53:49,016 - __main__ - INFO - Streaming chunk from generate: 繁忙，每周仅进行
2025-06-05 21:53:49,171 - __main__ - INFO - Streaming chunk from generate: 一次轻度运动（
2025-06-05 21:53:49,526 - __main__ - INFO - Streaming chunk from generate: 如散步）。
- **
2025-06-05 21:53:49,610 - __main__ - INFO - Streaming chunk from generate: 吸烟史**：无
2025-06-05 21:53:49,827 - __main__ - INFO - Streaming chunk from generate: 。
- **饮酒
2025-06-05 21:53:49,945 - __main__ - INFO - Streaming chunk from generate: **：每周2
2025-06-05 21:53:50,154 - __main__ - INFO - Streaming chunk from generate: 至3次，每次约
2025-06-05 21:53:50,685 - __main__ - INFO - Streaming chunk from generate: 300毫升啤酒。

2025-06-05 21:53:50,820 - __main__ - INFO - Streaming chunk from generate: - **睡眠**
2025-06-05 21:53:51,027 - __main__ - INFO - Streaming chunk from generate: ：每晚平均
2025-06-05 21:53:51,167 - __main__ - INFO - Streaming chunk from generate: 6小时，常常感到疲惫
2025-06-05 21:53:51,386 - __main__ - INFO - Streaming chunk from generate: 。

### 四、体检
2025-06-05 21:53:51,641 - __main__ - INFO - Streaming chunk from generate: 与化验结果
-
2025-06-05 21:53:51,840 - __main__ - INFO - Streaming chunk from generate:  **最近一次体检时间
2025-06-05 21:53:51,991 - __main__ - INFO - Streaming chunk from generate: **：2024
2025-06-05 21:53:52,192 - __main__ - INFO - Streaming chunk from generate: 年8月15日
2025-06-05 21:53:52,372 - __main__ - INFO - Streaming chunk from generate: 
- **身高**：
2025-06-05 21:53:52,557 - __main__ - INFO - Streaming chunk from generate: 175厘米
-
2025-06-05 21:53:52,717 - __main__ - INFO - Streaming chunk from generate:  **体重**：78
2025-06-05 21:53:52,929 - __main__ - INFO - Streaming chunk from generate: 公斤
- **体重指数
2025-06-05 21:53:53,057 - __main__ - INFO - Streaming chunk from generate: （BMI）**：2
2025-06-05 21:53:53,287 - __main__ - INFO - Streaming chunk from generate: 5.5（
2025-06-05 21:53:53,577 - __main__ - INFO - Streaming chunk from generate: 超重）
- **腰
2025-06-05 21:53:53,718 - __main__ - INFO - Streaming chunk from generate: 围**：92厘米
2025-06-05 21:53:53,919 - __main__ - INFO - Streaming chunk from generate: （略高于健康范围）

2025-06-05 21:53:54,043 - __main__ - INFO - Streaming chunk from generate: - **血压**：1
2025-06-05 21:53:54,254 - __main__ - INFO - Streaming chunk from generate: 35/85毫米
2025-06-05 21:53:54,370 - __main__ - INFO - Streaming chunk from generate: 汞柱（轻度高血压
2025-06-05 21:53:54,573 - __main__ - INFO - Streaming chunk from generate: ）
- **心率**
2025-06-05 21:53:54,960 - __main__ - INFO - Streaming chunk from generate: ：每分钟78
2025-06-05 21:53:55,098 - __main__ - INFO - Streaming chunk from generate: 次（正常范围）
-
2025-06-05 21:53:55,303 - __main__ - INFO - Streaming chunk from generate:  **空腹血糖**：
2025-06-05 21:53:55,460 - __main__ - INFO - Streaming chunk from generate: 6.8毫摩尔
2025-06-05 21:53:55,663 - __main__ - INFO - Streaming chunk from generate: /升（略高于正常
2025-06-05 21:53:55,765 - __main__ - INFO - Streaming chunk from generate: 范围）
- **餐后
2025-06-05 21:53:55,897 - __main__ - INFO - Streaming chunk from generate: 2小时血糖**：8
2025-06-05 21:53:56,056 - __main__ - INFO - Streaming chunk from generate: .9毫摩尔/
2025-06-05 21:53:56,147 - __main__ - INFO - Streaming chunk from generate: 升（高于正常标准）


2025-06-05 21:53:56,377 - __main__ - INFO - Streaming chunk from generate: 以上是张三九
2025-06-05 21:53:56,459 - __main__ - INFO - Streaming chunk from generate: 的健康档案信息。如果您
2025-06-05 21:53:56,591 - __main__ - INFO - Streaming chunk from generate: 需要进一步的信息或
2025-06-05 21:53:56,764 - __main__ - INFO - Streaming chunk from generate: 有其他问题，请
2025-06-05 21:53:56,848 - __main__ - INFO - Streaming chunk from generate: 告诉我。
2025-06-05 21:53:56,898 - __main__ - INFO - Streaming chunk from generate: 
2025-06-05 21:54:00,168 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 21:55:00,169 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 21:56:00,170 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 21:57:00,172 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 21:58:00,174 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 21:59:00,176 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:00:00,177 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:01:00,178 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:02:00,180 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:03:00,182 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:04:00,183 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:05:00,184 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:06:00,185 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:07:00,187 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:08:00,189 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:08:19,491 - __main__ - INFO - The user's user_input is: 你好，我是Kevin
2025-06-05 22:08:19,498 - ragAgent - INFO - Agent processing user query
2025-06-05 22:08:19,499 - ragAgent - INFO - agent question:content='你好，我是Kevin' additional_kwargs={} response_metadata={} id='64e91fcd-67e4-4f26-831f-f780f36f4edc'
2025-06-05 22:08:19,704 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-05 22:08:20,574 - __main__ - INFO - Streaming chunk from agent: 你好
2025-06-05 22:08:20,609 - __main__ - INFO - Streaming chunk from agent: ，Kevin
2025-06-05 22:08:21,905 - __main__ - INFO - Streaming chunk from agent: ！有什么我能帮助你的吗
2025-06-05 22:08:21,994 - __main__ - INFO - Streaming chunk from agent: ？
2025-06-05 22:08:38,298 - __main__ - INFO - The user's user_input is: 我是谁？
2025-06-05 22:08:38,305 - ragAgent - INFO - Agent processing user query
2025-06-05 22:08:38,306 - ragAgent - INFO - agent question:content='我是谁？' additional_kwargs={} response_metadata={} id='e46b99ba-539b-4bc3-ac14-cb46ab3b2ae3'
2025-06-05 22:08:38,524 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-05 22:08:39,125 - __main__ - INFO - Streaming chunk from agent: 你是
2025-06-05 22:08:39,135 - __main__ - INFO - Streaming chunk from agent: Kevin
2025-06-05 22:08:39,203 - __main__ - INFO - Streaming chunk from agent: 。
2025-06-05 22:08:39,331 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 22:09:00,191 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:10:00,192 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:11:00,193 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:12:00,194 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:13:00,195 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:14:00,197 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:15:00,199 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:16:00,200 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:17:00,201 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:18:00,202 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:18:39,402 - __main__ - INFO - The user's user_input is: 10乘以20等于多少
2025-06-05 22:18:39,409 - ragAgent - INFO - Agent processing user query
2025-06-05 22:18:39,410 - ragAgent - INFO - agent question:content='10乘以20等于多少' additional_kwargs={} response_metadata={} id='7b6294bf-3992-4000-9330-5d032310e31d'
2025-06-05 22:18:39,721 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-05 22:18:41,025 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 22:18:41,126 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 22:18:41,463 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 22:18:41,626 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 22:18:41,627 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 22:18:41,630 - ragAgent - INFO - Tool multiply routed to generate based on config
2025-06-05 22:18:41,632 - ragAgent - INFO - Generating final response
2025-06-05 22:18:41,633 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-06-05 22:18:42,044 - __main__ - INFO - Streaming chunk from generate: 
2025-06-05 22:18:42,045 - __main__ - INFO - Streaming chunk from generate: 1
2025-06-05 22:18:42,574 - __main__ - INFO - Streaming chunk from generate: 0乘以20等于
2025-06-05 22:18:45,047 - __main__ - INFO - Streaming chunk from generate: 200。
2025-06-05 22:18:45,095 - __main__ - INFO - Streaming chunk from generate: 
2025-06-05 22:19:00,203 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:19:06,727 - __main__ - INFO - The user's user_input is: 张三九的健康档案信息
2025-06-05 22:19:06,734 - ragAgent - INFO - Agent processing user query
2025-06-05 22:19:06,735 - ragAgent - INFO - agent question:content='张三九的健康档案信息' additional_kwargs={} response_metadata={} id='319c6f4c-5476-4063-be1e-9f10a87d9a8f'
2025-06-05 22:19:07,508 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-05 22:19:11,106 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 22:19:11,414 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 22:19:11,756 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 22:19:11,758 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 22:19:11,912 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-06-05 22:19:11,915 - ragAgent - INFO - Grading documents for relevance
2025-06-05 22:19:11,916 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-06-05 22:19:13,199 - ragAgent - INFO - Document relevance score: yes
2025-06-05 22:19:13,200 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-06-05 22:19:13,201 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-06-05 22:19:13,202 - ragAgent - INFO - Generating final response
2025-06-05 22:19:13,203 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-06-05 22:19:14,251 - __main__ - INFO - Streaming chunk from generate: 
2025-06-05 22:19:14,252 - __main__ - INFO - Streaming chunk from generate: 根据
2025-06-05 22:19:14,371 - __main__ - INFO - Streaming chunk from generate: 您提供的信息，张三
2025-06-05 22:19:14,613 - __main__ - INFO - Streaming chunk from generate: 九的健康档案如下：


2025-06-05 22:19:15,119 - __main__ - INFO - Streaming chunk from generate: ### 一、基本信息
2025-06-05 22:19:15,227 - __main__ - INFO - Streaming chunk from generate: 
- **姓名**：
2025-06-05 22:19:15,361 - __main__ - INFO - Streaming chunk from generate: 张三九
- **
2025-06-05 22:19:15,530 - __main__ - INFO - Streaming chunk from generate: 性别**：男
-
2025-06-05 22:19:15,706 - __main__ - INFO - Streaming chunk from generate:  **出生日期**：1
2025-06-05 22:19:15,879 - __main__ - INFO - Streaming chunk from generate: 985年5月
2025-06-05 22:19:16,264 - __main__ - INFO - Streaming chunk from generate: 20日
- **
2025-06-05 22:19:17,857 - __main__ - INFO - Streaming chunk from generate: 年龄**：39岁
2025-06-05 22:19:18,199 - __main__ - INFO - Streaming chunk from generate: 
- **婚姻状况**
2025-06-05 22:19:18,822 - __main__ - INFO - Streaming chunk from generate: ：已婚
- **
2025-06-05 22:19:19,165 - __main__ - INFO - Streaming chunk from generate: 职业**：IT工程师

2025-06-05 22:19:19,280 - __main__ - INFO - Streaming chunk from generate: - **血型**：
2025-06-05 22:19:19,422 - __main__ - INFO - Streaming chunk from generate: O型
- **联系电话
2025-06-05 22:19:19,693 - __main__ - INFO - Streaming chunk from generate: **：138-
2025-06-05 22:19:19,814 - __main__ - INFO - Streaming chunk from generate: 1234-5
2025-06-05 22:19:20,238 - __main__ - INFO - Streaming chunk from generate: 678
- **
2025-06-05 22:19:20,253 - __main__ - INFO - Streaming chunk from generate: 电子邮箱**：zhang
2025-06-05 22:19:20,301 - __main__ - INFO - Streaming chunk from generate: san@example.com
- **
2025-06-05 22:19:20,595 - __main__ - INFO - Streaming chunk from generate: 住址**：上海市
2025-06-05 22:19:20,687 - __main__ - INFO - Streaming chunk from generate: 浦东新区张江路1
2025-06-05 22:19:20,831 - __main__ - INFO - Streaming chunk from generate: 23号

2025-06-05 22:19:21,080 - __main__ - INFO - Streaming chunk from generate: - **紧急联系人**
2025-06-05 22:19:21,595 - __main__ - INFO - Streaming chunk from generate: ：妻子李四六
2025-06-05 22:19:21,700 - __main__ - INFO - Streaming chunk from generate: 
- **紧急
2025-06-05 22:19:22,029 - __main__ - INFO - Streaming chunk from generate: 联系人电话**：1
2025-06-05 22:19:22,526 - __main__ - INFO - Streaming chunk from generate: 38-876
2025-06-05 22:19:22,631 - __main__ - INFO - Streaming chunk from generate: 5-4321
2025-06-05 22:19:25,573 - __main__ - INFO - Streaming chunk from generate: 

### 二、医疗
2025-06-05 22:19:26,159 - __main__ - INFO - Streaming chunk from generate: 历史
- **高血压**
2025-06-05 22:19:26,507 - __main__ - INFO - Streaming chunk from generate: ：2005年
2025-06-05 22:19:26,656 - __main__ - INFO - Streaming chunk from generate: 确诊，接受降压药物
2025-06-05 22:19:26,877 - __main__ - INFO - Streaming chunk from generate: 治疗。
- **二
2025-06-05 22:19:27,372 - __main__ - INFO - Streaming chunk from generate: 型糖尿病**：20
2025-06-05 22:19:27,525 - __main__ - INFO - Streaming chunk from generate: 10年确诊，使用
2025-06-05 22:19:28,014 - __main__ - INFO - Streaming chunk from generate: 口服降糖药管理。

2025-06-05 22:19:28,173 - __main__ - INFO - Streaming chunk from generate: - **脂肪肝**：
2025-06-05 22:19:28,448 - __main__ - INFO - Streaming chunk from generate: 2017年诊断
2025-06-05 22:19:28,593 - __main__ - INFO - Streaming chunk from generate: ，建议通过饮食调整
2025-06-05 22:19:28,963 - __main__ - INFO - Streaming chunk from generate: 和增加运动改善。
-
2025-06-05 22:19:29,373 - __main__ - INFO - Streaming chunk from generate:  **腰椎间盘突出
2025-06-05 22:19:29,697 - __main__ - INFO - Streaming chunk from generate: **：2022
2025-06-05 22:19:29,808 - __main__ - INFO - Streaming chunk from generate: 年接受了微创手术，
2025-06-05 22:19:30,092 - __main__ - INFO - Streaming chunk from generate: 术后恢复良好。
- **
2025-06-05 22:19:30,286 - __main__ - INFO - Streaming chunk from generate: 过敏史**：

2025-06-05 22:19:30,686 - __main__ - INFO - Streaming chunk from generate:   - 对青霉素过敏
2025-06-05 22:19:30,885 - __main__ - INFO - Streaming chunk from generate: （皮疹和
2025-06-05 22:19:31,453 - __main__ - INFO - Streaming chunk from generate: 呼吸困难）
  -
2025-06-05 22:19:31,551 - __main__ - INFO - Streaming chunk from generate:  对海鲜轻度过
2025-06-05 22:19:31,805 - __main__ - INFO - Streaming chunk from generate: 敏（皮肤发痒）


2025-06-05 22:19:32,740 - __main__ - INFO - Streaming chunk from generate: - **家族病史
2025-06-05 22:19:32,850 - __main__ - INFO - Streaming chunk from generate: **：
  -
2025-06-05 22:19:32,991 - __main__ - INFO - Streaming chunk from generate:  父亲患有高血压和二
2025-06-05 22:19:33,169 - __main__ - INFO - Streaming chunk from generate: 型糖尿病
  -
2025-06-05 22:19:34,067 - __main__ - INFO - Streaming chunk from generate:  母亲有
2025-06-05 22:19:34,181 - __main__ - INFO - Streaming chunk from generate: 甲状腺疾病史

### 
2025-06-05 22:19:35,048 - __main__ - INFO - Streaming chunk from generate: 三、生活方式和习惯

2025-06-05 22:19:35,168 - __main__ - INFO - Streaming chunk from generate: - **饮食习惯**：
2025-06-05 22:19:35,353 - __main__ - INFO - Streaming chunk from generate: 偏好高脂肪和
2025-06-05 22:19:35,481 - __main__ - INFO - Streaming chunk from generate: 高糖食品，蔬菜和
2025-06-05 22:19:35,856 - __main__ - INFO - Streaming chunk from generate: 水果摄入较少，盐分
2025-06-05 22:19:36,005 - __main__ - INFO - Streaming chunk from generate: 摄入偏高。
- **
2025-06-05 22:19:36,216 - __main__ - INFO - Streaming chunk from generate: 运动情况**：工作
2025-06-05 22:19:36,338 - __main__ - INFO - Streaming chunk from generate: 繁忙，每周仅进行
2025-06-05 22:19:36,542 - __main__ - INFO - Streaming chunk from generate: 一次轻度运动（如
2025-06-05 22:19:36,633 - __main__ - INFO - Streaming chunk from generate: 散步）。
- **吸烟
2025-06-05 22:19:36,888 - __main__ - INFO - Streaming chunk from generate: 史**：无

2025-06-05 22:19:37,007 - __main__ - INFO - Streaming chunk from generate: - **饮酒情况**：
2025-06-05 22:19:37,146 - __main__ - INFO - Streaming chunk from generate: 每周饮酒2至
2025-06-05 22:19:37,317 - __main__ - INFO - Streaming chunk from generate: 3次，每次约3
2025-06-05 22:19:37,441 - __main__ - INFO - Streaming chunk from generate: 00毫升啤酒。
-
2025-06-05 22:19:37,589 - __main__ - INFO - Streaming chunk from generate:  **睡眠情况**：每
2025-06-05 22:19:37,771 - __main__ - INFO - Streaming chunk from generate: 晚平均睡眠时间为6
2025-06-05 22:19:37,888 - __main__ - INFO - Streaming chunk from generate: 小时，常常感到疲惫。


2025-06-05 22:19:38,037 - __main__ - INFO - Streaming chunk from generate: ### 四、体检与
2025-06-05 22:19:38,215 - __main__ - INFO - Streaming chunk from generate: 化验结果
- **
2025-06-05 22:19:38,327 - __main__ - INFO - Streaming chunk from generate: 最近一次体检时间
2025-06-05 22:19:38,478 - __main__ - INFO - Streaming chunk from generate: **：2024
2025-06-05 22:19:38,653 - __main__ - INFO - Streaming chunk from generate: 年8月15日
2025-06-05 22:19:38,771 - __main__ - INFO - Streaming chunk from generate: 
- **身高**：
2025-06-05 22:19:38,915 - __main__ - INFO - Streaming chunk from generate: 175厘米
-
2025-06-05 22:19:39,098 - __main__ - INFO - Streaming chunk from generate:  **体重**：78
2025-06-05 22:19:39,203 - __main__ - INFO - Streaming chunk from generate: 公斤
- **BMI
2025-06-05 22:19:39,656 - __main__ - INFO - Streaming chunk from generate: **：25.5
2025-06-05 22:19:39,892 - __main__ - INFO - Streaming chunk from generate: （超重）
- **
2025-06-05 22:19:40,074 - __main__ - INFO - Streaming chunk from generate: 腰围**：92
2025-06-05 22:19:40,190 - __main__ - INFO - Streaming chunk from generate: 厘米（略高于健康范围
2025-06-05 22:19:40,334 - __main__ - INFO - Streaming chunk from generate: ）
- **血压**：
2025-06-05 22:19:40,640 - __main__ - INFO - Streaming chunk from generate: 135/85
2025-06-05 22:19:40,747 - __main__ - INFO - Streaming chunk from generate: 毫米汞柱（轻度
2025-06-05 22:19:40,921 - __main__ - INFO - Streaming chunk from generate: 高血压）
- **心率
2025-06-05 22:19:41,744 - __main__ - INFO - Streaming chunk from generate: **：每分钟7
2025-06-05 22:19:41,888 - __main__ - INFO - Streaming chunk from generate: 8次（正常范围）

2025-06-05 22:19:42,124 - __main__ - INFO - Streaming chunk from generate: - **空腹血糖**
2025-06-05 22:19:42,261 - __main__ - INFO - Streaming chunk from generate: ：6.8毫摩
2025-06-05 22:19:42,375 - __main__ - INFO - Streaming chunk from generate: 尔/升（略高于
2025-06-05 22:19:42,650 - __main__ - INFO - Streaming chunk from generate: 正常范围）
- **餐
2025-06-05 22:19:43,105 - __main__ - INFO - Streaming chunk from generate: 后2小时血糖**：
2025-06-05 22:19:43,215 - __main__ - INFO - Streaming chunk from generate: 8.9毫摩尔
2025-06-05 22:19:43,358 - __main__ - INFO - Streaming chunk from generate: /升（高于正常标准
2025-06-05 22:19:44,101 - __main__ - INFO - Streaming chunk from generate: ）

以上是张三九
2025-06-05 22:19:44,213 - __main__ - INFO - Streaming chunk from generate: 的健康档案信息。如果您
2025-06-05 22:19:44,398 - __main__ - INFO - Streaming chunk from generate: 需要更详细的信息或
2025-06-05 22:19:44,588 - __main__ - INFO - Streaming chunk from generate: 有其他问题，请
2025-06-05 22:19:44,775 - __main__ - INFO - Streaming chunk from generate: 告诉我。
2025-06-05 22:19:44,826 - __main__ - INFO - Streaming chunk from generate: 
2025-06-05 22:20:00,204 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:20:04,326 - __main__ - INFO - The user's user_input is: 你好，我是Kevin
2025-06-05 22:20:04,333 - ragAgent - INFO - Agent processing user query
2025-06-05 22:20:04,334 - ragAgent - INFO - agent question:content='你好，我是Kevin' additional_kwargs={} response_metadata={} id='08b551c7-e7a3-45bb-b9ee-e43aa6cc6ad4'
2025-06-05 22:20:04,832 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-05 22:20:06,217 - __main__ - INFO - Streaming chunk from agent: 你好
2025-06-05 22:20:06,282 - __main__ - INFO - Streaming chunk from agent: ，Kevin
2025-06-05 22:20:06,634 - __main__ - INFO - Streaming chunk from agent: ！有什么我可以帮
2025-06-05 22:20:07,132 - __main__ - INFO - Streaming chunk from agent: 你的吗？
2025-06-05 22:20:17,324 - __main__ - INFO - The user's user_input is: 我是谁？
2025-06-05 22:20:17,331 - ragAgent - INFO - Agent processing user query
2025-06-05 22:20:17,332 - ragAgent - INFO - agent question:content='我是谁？' additional_kwargs={} response_metadata={} id='c9c1faf2-5f02-4a49-b7e3-30dc93993b6a'
2025-06-05 22:20:17,657 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-05 22:20:18,572 - __main__ - INFO - Streaming chunk from agent: 你是
2025-06-05 22:20:18,624 - __main__ - INFO - Streaming chunk from agent: Kevin
2025-06-05 22:20:18,769 - __main__ - INFO - Streaming chunk from agent: 。
2025-06-05 22:20:19,126 - __main__ - INFO - Streaming chunk from agent: 有什么我可以帮你的吗？
2025-06-05 22:20:19,228 - __main__ - INFO - Streaming chunk from agent: 
2025-06-05 22:21:00,205 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-05 22:21:58,946 - __main__ - INFO - Database connection pool closed
2025-06-05 22:21:58,947 - __main__ - INFO - The service has been shut down
2025-06-06 20:08:38,645 - __main__ - INFO - Start the server on port 8012
2025-06-06 20:08:41,760 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-06-06 20:08:41,761 - ragAgent - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-06-06 20:08:41,761 - ragAgent - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-06-06 20:08:41,763 - __main__ - INFO - Database connection pool initialized
2025-06-06 20:08:41,764 - __main__ - DEBUG - Database connection pool initialized
2025-06-06 20:08:41,765 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:08:41,782 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-06-06 20:08:42,222 - ragAgent - INFO - Graph visualization saved as graph.png
2025-06-06 20:09:13,978 - __main__ - INFO - The user's user_input is: 3*4
2025-06-06 20:09:14,005 - ragAgent - INFO - Agent processing user query
2025-06-06 20:09:14,006 - ragAgent - INFO - agent question:content='3*4' additional_kwargs={} response_metadata={} id='f75acb60-b951-4f05-9c15-9d19f393cd70'
2025-06-06 20:09:14,231 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-06-06 20:09:16,274 - __main__ - INFO - Final Response is: 3*4的结果是12。如果你有其他问题或需要进一步的帮助，请告诉我！
2025-06-06 20:09:16,275 - __main__ - INFO - Results for Formatting: 3*4的结果是12。如果你有其他问题或需要进一步的帮助，请告诉我！
2025-06-06 20:09:16,276 - __main__ - INFO - Send response content: 
id='chatcmpl-a81164e6420a4f579ed69437f7fcc0ee' object='chat.completion' created=1749211756 choices=[ChatCompletionResponseChoice(index=0, message=Message(role='assistant', content='3*4的结果是12。如果你有其他问题或需要进一步的帮助，请告诉我！'), finish_reason='stop')] system_fingerprint=None
2025-06-06 20:09:41,766 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:10:41,768 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:10:59,753 - __main__ - INFO - The user's user_input is: 查询张三九的健康档案信息
2025-06-06 20:10:59,761 - ragAgent - INFO - Agent processing user query
2025-06-06 20:10:59,763 - ragAgent - INFO - agent question:content='查询张三九的健康档案信息' additional_kwargs={} response_metadata={} id='3ebb0fd9-a0cf-4350-b572-355c093bd472'
2025-06-06 20:11:00,008 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-06 20:11:01,536 - __main__ - INFO - Calling tool: retrieve
2025-06-06 20:11:01,739 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-06-06 20:11:01,740 - __main__ - INFO - Tool Output [retrieve]: 健康档案 一、基本信息 张三九，男，出生于 1985 年 5 月 20 日，目前 39 岁，已婚，职业为 IT 工程师。 张三九的 血型为 O 型，联系电话为 138-1234-5678，电子邮箱为 zhangsan@example.com，居住在 上海市浦东新区张江路 123 号。 其紧急联系人为妻子李四六，联系电话为 138-8765-4321。 二、医疗历史 张三九在 2005 年被确诊为高血压，自此开始接受降压药物治疗。 2010 年，他被确诊为二 型糖尿病，并开始使用口服降糖药进行管理。 2017 年，张三九被诊断为脂肪肝，医生建议 通过饮食调整和增加运动来改善这一状况。 2022 年，他因腰椎间盘突出接受了微创手术， 术后恢复良好。 此外，张三九对青霉素有过敏反应，曾出现皮疹和呼吸困难。 海鲜会导致轻 度皮肤发痒，表明他对海鲜也有一定的过敏反应。 张三九的家族病史显示，父亲患有高血压 和二型糖尿病，母亲则有甲状腺疾病史。 三、生活方式和习惯 张三九的饮食习惯偏向高脂肪和高糖食品，日常饮食中蔬菜和水果的摄入较少，盐分摄入偏 高。 他的工作繁忙，运动较少，每周仅进行一次轻度运动，如散步。 张三九无吸烟史，但每 周饮酒 2 至 3 次，每次约 300 毫升啤酒。 他的平均睡眠时间为每晚 6 小时，常常感到疲惫。 四、体检与化验结果 张三九最近一次体检是在 2024 年 8 月 15 日，体检结果显示他的身高为 175 厘米，体重为 78 公斤，体重指数（BMI）为 25.5，表明体重超重。 他的腰围为 92 厘米，略高于健康范围。 血压测量结果为 135/85 毫米汞柱，属于轻度高血压范围。 心率为每分钟 78 次，处于正常 范围。 在实验室检查中，张三九的空腹血糖为 6.8 毫摩尔/升，略高于正常范围； 餐后 2 小时血糖 为 8.9 毫摩尔/升，也高于正常标准。

健康档案 一、基本信息 张三九，男，出生于 1985 年 5 月 20 日，目前 39 岁，已婚，职业为 IT 工程师。 张三九的 血型为 O 型，联系电话为 138-1234-5678，电子邮箱为 zhangsan@example.com，居住在 上海市浦东新区张江路 123 号。 其紧急联系人为妻子李四六，联系电话为 138-8765-4321。 二、医疗历史 张三九在 2005 年被确诊为高血压，自此开始接受降压药物治疗。 2010 年，他被确诊为二 型糖尿病，并开始使用口服降糖药进行管理。 2017 年，张三九被诊断为脂肪肝，医生建议 通过饮食调整和增加运动来改善这一状况。 2022 年，他因腰椎间盘突出接受了微创手术， 术后恢复良好。 此外，张三九对青霉素有过敏反应，曾出现皮疹和呼吸困难。 海鲜会导致轻 度皮肤发痒，表明他对海鲜也有一定的过敏反应。 张三九的家族病史显示，父亲患有高血压 和二型糖尿病，母亲则有甲状腺疾病史。 三、生活方式和习惯 张三九的饮食习惯偏向高脂肪和高糖食品，日常饮食中蔬菜和水果的摄入较少，盐分摄入偏 高。 他的工作繁忙，运动较少，每周仅进行一次轻度运动，如散步。 张三九无吸烟史，但每 周饮酒 2 至 3 次，每次约 300 毫升啤酒。 他的平均睡眠时间为每晚 6 小时，常常感到疲惫。 四、体检与化验结果 张三九最近一次体检是在 2024 年 8 月 15 日，体检结果显示他的身高为 175 厘米，体重为 78 公斤，体重指数（BMI）为 25.5，表明体重超重。 他的腰围为 92 厘米，略高于健康范围。 血压测量结果为 135/85 毫米汞柱，属于轻度高血压范围。 心率为每分钟 78 次，处于正常 范围。 在实验室检查中，张三九的空腹血糖为 6.8 毫摩尔/升，略高于正常范围； 餐后 2 小时血糖 为 8.9 毫摩尔/升，也高于正常标准。

健康档案 一、基本信息 张三九，男，出生于 1985 年 5 月 20 日，目前 39 岁，已婚，职业为 IT 工程师。 张三九的 血型为 O 型，联系电话为 138-1234-5678，电子邮箱为 zhangsan@example.com，居住在 上海市浦东新区张江路 123 号。 其紧急联系人为妻子李四六，联系电话为 138-8765-4321。 二、医疗历史 张三九在 2005 年被确诊为高血压，自此开始接受降压药物治疗。 2010 年，他被确诊为二 型糖尿病，并开始使用口服降糖药进行管理。 2017 年，张三九被诊断为脂肪肝，医生建议 通过饮食调整和增加运动来改善这一状况。 2022 年，他因腰椎间盘突出接受了微创手术， 术后恢复良好。 此外，张三九对青霉素有过敏反应，曾出现皮疹和呼吸困难。 海鲜会导致轻 度皮肤发痒，表明他对海鲜也有一定的过敏反应。 张三九的家族病史显示，父亲患有高血压 和二型糖尿病，母亲则有甲状腺疾病史。 三、生活方式和习惯 张三九的饮食习惯偏向高脂肪和高糖食品，日常饮食中蔬菜和水果的摄入较少，盐分摄入偏 高。 他的工作繁忙，运动较少，每周仅进行一次轻度运动，如散步。 张三九无吸烟史，但每 周饮酒 2 至 3 次，每次约 300 毫升啤酒。 他的平均睡眠时间为每晚 6 小时，常常感到疲惫。 四、体检与化验结果 张三九最近一次体检是在 2024 年 8 月 15 日，体检结果显示他的身高为 175 厘米，体重为 78 公斤，体重指数（BMI）为 25.5，表明体重超重。 他的腰围为 92 厘米，略高于健康范围。 血压测量结果为 135/85 毫米汞柱，属于轻度高血压范围。 心率为每分钟 78 次，处于正常 范围。 在实验室检查中，张三九的空腹血糖为 6.8 毫摩尔/升，略高于正常范围； 餐后 2 小时血糖 为 8.9 毫摩尔/升，也高于正常标准。

健康档案 一、基本信息 张三九，男，出生于 1985 年 5 月 20 日，目前 39 岁，已婚，职业为 IT 工程师。 张三九的 血型为 O 型，联系电话为 138-1234-5678，电子邮箱为 zhangsan@example.com，居住在 上海市浦东新区张江路 123 号。 其紧急联系人为妻子李四六，联系电话为 138-8765-4321。 二、医疗历史 张三九在 2005 年被确诊为高血压，自此开始接受降压药物治疗。 2010 年，他被确诊为二 型糖尿病，并开始使用口服降糖药进行管理。 2017 年，张三九被诊断为脂肪肝，医生建议 通过饮食调整和增加运动来改善这一状况。 2022 年，他因腰椎间盘突出接受了微创手术， 术后恢复良好。 此外，张三九对青霉素有过敏反应，曾出现皮疹和呼吸困难。 海鲜会导致轻 度皮肤发痒，表明他对海鲜也有一定的过敏反应。 张三九的家族病史显示，父亲患有高血压 和二型糖尿病，母亲则有甲状腺疾病史。 三、生活方式和习惯 张三九的饮食习惯偏向高脂肪和高糖食品，日常饮食中蔬菜和水果的摄入较少，盐分摄入偏 高。 他的工作繁忙，运动较少，每周仅进行一次轻度运动，如散步。 张三九无吸烟史，但每 周饮酒 2 至 3 次，每次约 300 毫升啤酒。 他的平均睡眠时间为每晚 6 小时，常常感到疲惫。 四、体检与化验结果 张三九最近一次体检是在 2024 年 8 月 15 日，体检结果显示他的身高为 175 厘米，体重为 78 公斤，体重指数（BMI）为 25.5，表明体重超重。 他的腰围为 92 厘米，略高于健康范围。 血压测量结果为 135/85 毫米汞柱，属于轻度高血压范围。 心率为每分钟 78 次，处于正常 范围。 在实验室检查中，张三九的空腹血糖为 6.8 毫摩尔/升，略高于正常范围； 餐后 2 小时血糖 为 8.9 毫摩尔/升，也高于正常标准。
2025-06-06 20:11:01,742 - ragAgent - INFO - Grading documents for relevance
2025-06-06 20:11:01,743 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-06-06 20:11:02,996 - ragAgent - INFO - Document relevance score: yes
2025-06-06 20:11:02,997 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-06-06 20:11:02,998 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-06-06 20:11:02,999 - __main__ - INFO - Tool Output [retrieve]: 健康档案 一、基本信息 张三九，男，出生于 1985 年 5 月 20 日，目前 39 岁，已婚，职业为 IT 工程师。 张三九的 血型为 O 型，联系电话为 138-1234-5678，电子邮箱为 zhangsan@example.com，居住在 上海市浦东新区张江路 123 号。 其紧急联系人为妻子李四六，联系电话为 138-8765-4321。 二、医疗历史 张三九在 2005 年被确诊为高血压，自此开始接受降压药物治疗。 2010 年，他被确诊为二 型糖尿病，并开始使用口服降糖药进行管理。 2017 年，张三九被诊断为脂肪肝，医生建议 通过饮食调整和增加运动来改善这一状况。 2022 年，他因腰椎间盘突出接受了微创手术， 术后恢复良好。 此外，张三九对青霉素有过敏反应，曾出现皮疹和呼吸困难。 海鲜会导致轻 度皮肤发痒，表明他对海鲜也有一定的过敏反应。 张三九的家族病史显示，父亲患有高血压 和二型糖尿病，母亲则有甲状腺疾病史。 三、生活方式和习惯 张三九的饮食习惯偏向高脂肪和高糖食品，日常饮食中蔬菜和水果的摄入较少，盐分摄入偏 高。 他的工作繁忙，运动较少，每周仅进行一次轻度运动，如散步。 张三九无吸烟史，但每 周饮酒 2 至 3 次，每次约 300 毫升啤酒。 他的平均睡眠时间为每晚 6 小时，常常感到疲惫。 四、体检与化验结果 张三九最近一次体检是在 2024 年 8 月 15 日，体检结果显示他的身高为 175 厘米，体重为 78 公斤，体重指数（BMI）为 25.5，表明体重超重。 他的腰围为 92 厘米，略高于健康范围。 血压测量结果为 135/85 毫米汞柱，属于轻度高血压范围。 心率为每分钟 78 次，处于正常 范围。 在实验室检查中，张三九的空腹血糖为 6.8 毫摩尔/升，略高于正常范围； 餐后 2 小时血糖 为 8.9 毫摩尔/升，也高于正常标准。

健康档案 一、基本信息 张三九，男，出生于 1985 年 5 月 20 日，目前 39 岁，已婚，职业为 IT 工程师。 张三九的 血型为 O 型，联系电话为 138-1234-5678，电子邮箱为 zhangsan@example.com，居住在 上海市浦东新区张江路 123 号。 其紧急联系人为妻子李四六，联系电话为 138-8765-4321。 二、医疗历史 张三九在 2005 年被确诊为高血压，自此开始接受降压药物治疗。 2010 年，他被确诊为二 型糖尿病，并开始使用口服降糖药进行管理。 2017 年，张三九被诊断为脂肪肝，医生建议 通过饮食调整和增加运动来改善这一状况。 2022 年，他因腰椎间盘突出接受了微创手术， 术后恢复良好。 此外，张三九对青霉素有过敏反应，曾出现皮疹和呼吸困难。 海鲜会导致轻 度皮肤发痒，表明他对海鲜也有一定的过敏反应。 张三九的家族病史显示，父亲患有高血压 和二型糖尿病，母亲则有甲状腺疾病史。 三、生活方式和习惯 张三九的饮食习惯偏向高脂肪和高糖食品，日常饮食中蔬菜和水果的摄入较少，盐分摄入偏 高。 他的工作繁忙，运动较少，每周仅进行一次轻度运动，如散步。 张三九无吸烟史，但每 周饮酒 2 至 3 次，每次约 300 毫升啤酒。 他的平均睡眠时间为每晚 6 小时，常常感到疲惫。 四、体检与化验结果 张三九最近一次体检是在 2024 年 8 月 15 日，体检结果显示他的身高为 175 厘米，体重为 78 公斤，体重指数（BMI）为 25.5，表明体重超重。 他的腰围为 92 厘米，略高于健康范围。 血压测量结果为 135/85 毫米汞柱，属于轻度高血压范围。 心率为每分钟 78 次，处于正常 范围。 在实验室检查中，张三九的空腹血糖为 6.8 毫摩尔/升，略高于正常范围； 餐后 2 小时血糖 为 8.9 毫摩尔/升，也高于正常标准。

健康档案 一、基本信息 张三九，男，出生于 1985 年 5 月 20 日，目前 39 岁，已婚，职业为 IT 工程师。 张三九的 血型为 O 型，联系电话为 138-1234-5678，电子邮箱为 zhangsan@example.com，居住在 上海市浦东新区张江路 123 号。 其紧急联系人为妻子李四六，联系电话为 138-8765-4321。 二、医疗历史 张三九在 2005 年被确诊为高血压，自此开始接受降压药物治疗。 2010 年，他被确诊为二 型糖尿病，并开始使用口服降糖药进行管理。 2017 年，张三九被诊断为脂肪肝，医生建议 通过饮食调整和增加运动来改善这一状况。 2022 年，他因腰椎间盘突出接受了微创手术， 术后恢复良好。 此外，张三九对青霉素有过敏反应，曾出现皮疹和呼吸困难。 海鲜会导致轻 度皮肤发痒，表明他对海鲜也有一定的过敏反应。 张三九的家族病史显示，父亲患有高血压 和二型糖尿病，母亲则有甲状腺疾病史。 三、生活方式和习惯 张三九的饮食习惯偏向高脂肪和高糖食品，日常饮食中蔬菜和水果的摄入较少，盐分摄入偏 高。 他的工作繁忙，运动较少，每周仅进行一次轻度运动，如散步。 张三九无吸烟史，但每 周饮酒 2 至 3 次，每次约 300 毫升啤酒。 他的平均睡眠时间为每晚 6 小时，常常感到疲惫。 四、体检与化验结果 张三九最近一次体检是在 2024 年 8 月 15 日，体检结果显示他的身高为 175 厘米，体重为 78 公斤，体重指数（BMI）为 25.5，表明体重超重。 他的腰围为 92 厘米，略高于健康范围。 血压测量结果为 135/85 毫米汞柱，属于轻度高血压范围。 心率为每分钟 78 次，处于正常 范围。 在实验室检查中，张三九的空腹血糖为 6.8 毫摩尔/升，略高于正常范围； 餐后 2 小时血糖 为 8.9 毫摩尔/升，也高于正常标准。

健康档案 一、基本信息 张三九，男，出生于 1985 年 5 月 20 日，目前 39 岁，已婚，职业为 IT 工程师。 张三九的 血型为 O 型，联系电话为 138-1234-5678，电子邮箱为 zhangsan@example.com，居住在 上海市浦东新区张江路 123 号。 其紧急联系人为妻子李四六，联系电话为 138-8765-4321。 二、医疗历史 张三九在 2005 年被确诊为高血压，自此开始接受降压药物治疗。 2010 年，他被确诊为二 型糖尿病，并开始使用口服降糖药进行管理。 2017 年，张三九被诊断为脂肪肝，医生建议 通过饮食调整和增加运动来改善这一状况。 2022 年，他因腰椎间盘突出接受了微创手术， 术后恢复良好。 此外，张三九对青霉素有过敏反应，曾出现皮疹和呼吸困难。 海鲜会导致轻 度皮肤发痒，表明他对海鲜也有一定的过敏反应。 张三九的家族病史显示，父亲患有高血压 和二型糖尿病，母亲则有甲状腺疾病史。 三、生活方式和习惯 张三九的饮食习惯偏向高脂肪和高糖食品，日常饮食中蔬菜和水果的摄入较少，盐分摄入偏 高。 他的工作繁忙，运动较少，每周仅进行一次轻度运动，如散步。 张三九无吸烟史，但每 周饮酒 2 至 3 次，每次约 300 毫升啤酒。 他的平均睡眠时间为每晚 6 小时，常常感到疲惫。 四、体检与化验结果 张三九最近一次体检是在 2024 年 8 月 15 日，体检结果显示他的身高为 175 厘米，体重为 78 公斤，体重指数（BMI）为 25.5，表明体重超重。 他的腰围为 92 厘米，略高于健康范围。 血压测量结果为 135/85 毫米汞柱，属于轻度高血压范围。 心率为每分钟 78 次，处于正常 范围。 在实验室检查中，张三九的空腹血糖为 6.8 毫摩尔/升，略高于正常范围； 餐后 2 小时血糖 为 8.9 毫摩尔/升，也高于正常标准。
2025-06-06 20:11:03,001 - ragAgent - INFO - Generating final response
2025-06-06 20:11:03,003 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-06-06 20:11:41,769 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:12:03,441 - __main__ - INFO - Final Response is: 根据您提供的信息，张三九的健康档案如下：

### 一、基本信息
- **姓名**：张三九
- **性别**：男
- **出生日期**：1985年5月20日
- **年龄**：39岁
- **婚姻状况**：已婚
- **职业**：IT工程师
- **血型**：O型
- **联系电话**：138-1234-5678
- **电子邮箱**：zhangsan@example.com
- **居住地址**：上海市浦东新区张江路123号
- **紧急联系人**：妻子李四六
- **紧急联系人电话**：138-8765-4321

### 二、医疗历史
- **高血压**：2005年确诊，接受降压药物治疗。
- **二型糖尿病**：2010年确诊，使用口服降糖药管理。
- **脂肪肝**：2017年诊断，建议通过饮食调整和增加运动改善。
- **腰椎间盘突出**：2022年接受微创手术，术后恢复良好。
- **过敏史**：
  - 对青霉素过敏（曾出现皮疹和呼吸困难）。
  - 对海鲜有轻度过敏反应（皮肤发痒）。
- **家族病史**：
  - 父亲患有高血压和二型糖尿病。
  - 母亲有甲状腺疾病史。

### 三、生活方式和习惯
- **饮食习惯**：偏向高脂肪和高糖食品，蔬菜和水果摄入较少，盐分摄入偏高。
- **运动情况**：工作繁忙，每周仅进行一次轻度运动，如散步。
- **吸烟史**：无。
- **饮酒情况**：每周饮酒2至3次，每次约300毫升啤酒。
- **睡眠情况**：每晚平均睡眠时间为6小时，常常感到疲惫。

### 四、体检与化验结果
- **最近一次体检日期**：2024年8月15日
- **身高**：175厘米
- **体重**：78公斤
- **体重指数（BMI）**：25.5（超重）
- **腰围**：92厘米（略高于健康范围）
- **血压**：135/85毫米汞柱（轻度高血压）
- **心率**：每分钟78次（正常范围）
- **空腹血糖**：6.8毫摩尔/升（略高于正常范围）
- **餐后2小时血糖**：8.9毫摩尔/升（高于正常标准）

以上是张三九的健康档案信息。如果您需要更详细的信息或有其他问题，请告诉我。
2025-06-06 20:12:03,442 - __main__ - INFO - Results for Formatting: 根据您提供的信息，张三九的健康档案如下：

### 一、基本信息
- **姓名**：张三九
- **性别**：男
- **出生日期**：1985年5月20日
- **年龄**：39岁
- **婚姻状况**：已婚
- **职业**：IT工程师
- **血型**：O型
- **联系电话**：138-1234-5678
- **电子邮箱**：zhangsan@example.com
- **居住地址**：上海市浦东新区张江路123号
- **紧急联系人**：妻子李四六
- **紧急联系人电话**：138-8765-4321

### 二、医疗历史
- **高血压**：2005年确诊，接受降压药物治疗。
- **二型糖尿病**：2010年确诊，使用口服降糖药管理。
- **脂肪肝**：2017年诊断，建议通过饮食调整和增加运动改善。
- **腰椎间盘突出**：2022年接受微创手术，术后恢复良好。
- **过敏史**：
  - 对青霉素过敏（曾出现皮疹和呼吸困难）。
  - 对海鲜有轻度过敏反应（皮肤发痒）。
- **家族病史**：
  - 父亲患有高血压和二型糖尿病。
  - 母亲有甲状腺疾病史。

### 三、生活方式和习惯
- **饮食习惯**：偏向高脂肪和高糖食品，蔬菜和水果摄入较少，盐分摄入偏高。
- **运动情况**：工作繁忙，每周仅进行一次轻度运动，如散步。
- **吸烟史**：无。
- **饮酒情况**：每周饮酒2至3次，每次约300毫升啤酒。
- **睡眠情况**：每晚平均睡眠时间为6小时，常常感到疲惫。

### 四、体检与化验结果
- **最近一次体检日期**：2024年8月15日
- **身高**：175厘米
- **体重**：78公斤
- **体重指数（BMI）**：25.5（超重）
- **腰围**：92厘米（略高于健康范围）
- **血压**：135/85毫米汞柱（轻度高血压）
- **心率**：每分钟78次（正常范围）
- **空腹血糖**：6.8毫摩尔/升（略高于正常范围）
- **餐后2小时血糖**：8.9毫摩尔/升（高于正常标准）

以上是张三九的健康档案信息。如果您需要更详细的信息或有其他问题，请告诉我。
2025-06-06 20:12:03,444 - __main__ - INFO - Send response content: 
id='chatcmpl-f9378e59c3544d4888211384cae7d28b' object='chat.completion' created=1749211923 choices=[ChatCompletionResponseChoice(index=0, message=Message(role='assistant', content='根据您提供的信息，张三九的健康档案如下：\n\n### 一、基本信息\n- **姓名**：张三九\n- **性别**：男\n- **出生日期**：1985年5月20日\n- **年龄**：39岁\n- **婚姻状况**：已婚\n- **职业**：IT工程师\n- **血型**：O型\n- **联系电话**：138-1234-5678\n- **电子邮箱**：zhangsan@example.com\n- **居住地址**：上海市浦东新区张江路123号\n- **紧急联系人**：妻子李四六\n- **紧急联系人电话**：138-8765-4321\n\n### 二、医疗历史\n- **高血压**：2005年确诊，接受降压药物治疗。\n- **二型糖尿病**：2010年确诊，使用口服降糖药管理。\n- **脂肪肝**：2017年诊断，建议通过饮食调整和增加运动改善。\n- **腰椎间盘突出**：2022年接受微创手术，术后恢复良好。\n- **过敏史**：\n  - 对青霉素过敏（曾出现皮疹和呼吸困难）。\n  - 对海鲜有轻度过敏反应（皮肤发痒）。\n- **家族病史**：\n  - 父亲患有高血压和二型糖尿病。\n  - 母亲有甲状腺疾病史。\n\n### 三、生活方式和习惯\n- **饮食习惯**：偏向高脂肪和高糖食品，蔬菜和水果摄入较少，盐分摄入偏高。\n- **运动情况**：工作繁忙，每周仅进行一次轻度运动，如散步。\n- **吸烟史**：无。\n- **饮酒情况**：每周饮酒2至3次，每次约300毫升啤酒。\n- **睡眠情况**：每晚平均睡眠时间为6小时，常常感到疲惫。\n\n### 四、体检与化验结果\n- **最近一次体检日期**：2024年8月15日\n- **身高**：175厘米\n- **体重**：78公斤\n- **体重指数（BMI）**：25.5（超重）\n- **腰围**：92厘米（略高于健康范围）\n- **血压**：135/85毫米汞柱（轻度高血压）\n- **心率**：每分钟78次（正常范围）\n- **空腹血糖**：6.8毫摩尔/升（略高于正常范围）\n- **餐后2小时血糖**：8.9毫摩尔/升（高于正常标准）\n\n以上是张三九的健康档案信息。如果您需要更详细的信息或有其他问题，请告诉我。'), finish_reason='stop')] system_fingerprint=None
2025-06-06 20:12:41,770 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:13:41,771 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:14:41,772 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:15:41,774 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:16:41,775 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:17:41,776 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:18:41,778 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:19:41,779 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:20:41,780 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:20:48,916 - __main__ - INFO - The user's user_input is: 你好
2025-06-06 20:20:48,927 - ragAgent - INFO - Agent processing user query
2025-06-06 20:20:48,927 - ragAgent - INFO - agent question:content='你好' additional_kwargs={} response_metadata={} id='e4c65c74-b026-4b42-8231-e105d2f78e39'
2025-06-06 20:20:49,153 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-06 20:20:49,669 - __main__ - INFO - Streaming chunk from agent: 你好
2025-06-06 20:20:49,698 - __main__ - INFO - Streaming chunk from agent: ！
2025-06-06 20:20:49,761 - __main__ - INFO - Streaming chunk from agent: 有什么
2025-06-06 20:20:49,891 - __main__ - INFO - Streaming chunk from agent: 可以帮助你的吗？
2025-06-06 20:20:49,976 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:21:41,781 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:21:41,960 - __main__ - INFO - The user's user_input is: 3乘以4等于多少
2025-06-06 20:21:41,965 - ragAgent - INFO - Agent processing user query
2025-06-06 20:21:41,966 - ragAgent - INFO - agent question:content='3乘以4等于多少' additional_kwargs={} response_metadata={} id='a1e75d2b-4b37-4436-8861-5f1737047a02'
2025-06-06 20:21:42,190 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-06 20:21:43,186 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:21:43,204 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:21:43,683 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:21:43,734 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:21:43,736 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:21:43,739 - ragAgent - INFO - Tool multiply routed to generate based on config
2025-06-06 20:21:43,741 - ragAgent - INFO - Generating final response
2025-06-06 20:21:43,741 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-06-06 20:21:44,061 - __main__ - INFO - Streaming chunk from generate: 
2025-06-06 20:21:44,062 - __main__ - INFO - Streaming chunk from generate: 3
2025-06-06 20:21:44,213 - __main__ - INFO - Streaming chunk from generate: 乘以4等于12
2025-06-06 20:21:44,300 - __main__ - INFO - Streaming chunk from generate: 。
2025-06-06 20:21:44,348 - __main__ - INFO - Streaming chunk from generate: 
2025-06-06 20:22:22,999 - __main__ - INFO - The user's user_input is: 张三九的健康档案信息
2025-06-06 20:22:23,007 - ragAgent - INFO - Agent processing user query
2025-06-06 20:22:23,007 - ragAgent - INFO - agent question:content='张三九的健康档案信息' additional_kwargs={} response_metadata={} id='bea79daa-9fd5-42e2-897b-edff67e11fe7'
2025-06-06 20:22:23,228 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-06 20:22:24,131 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:22:24,226 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:22:24,422 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:22:24,424 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:22:24,563 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-06-06 20:22:24,565 - ragAgent - INFO - Grading documents for relevance
2025-06-06 20:22:24,566 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-06-06 20:22:25,876 - ragAgent - INFO - Document relevance score: yes
2025-06-06 20:22:25,878 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-06-06 20:22:25,879 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-06-06 20:22:25,881 - ragAgent - INFO - Generating final response
2025-06-06 20:22:25,882 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-06-06 20:22:26,789 - __main__ - INFO - Streaming chunk from generate: 
2025-06-06 20:22:26,789 - __main__ - INFO - Streaming chunk from generate: 根据
2025-06-06 20:22:26,887 - __main__ - INFO - Streaming chunk from generate: 您提供的信息，张三
2025-06-06 20:22:27,035 - __main__ - INFO - Streaming chunk from generate: 九的健康档案如下：


2025-06-06 20:22:27,362 - __main__ - INFO - Streaming chunk from generate: ### 一、基本信息
2025-06-06 20:22:27,467 - __main__ - INFO - Streaming chunk from generate: 
- **姓名**：
2025-06-06 20:22:27,613 - __main__ - INFO - Streaming chunk from generate: 张三九
- **
2025-06-06 20:22:28,093 - __main__ - INFO - Streaming chunk from generate: 性别**：男
-
2025-06-06 20:22:28,206 - __main__ - INFO - Streaming chunk from generate:  **出生日期**：1
2025-06-06 20:22:28,620 - __main__ - INFO - Streaming chunk from generate: 985年5月
2025-06-06 20:22:29,212 - __main__ - INFO - Streaming chunk from generate: 20日
- **
2025-06-06 20:22:29,303 - __main__ - INFO - Streaming chunk from generate: 年龄**：39岁
2025-06-06 20:22:29,698 - __main__ - INFO - Streaming chunk from generate: 
- **婚姻状况**
2025-06-06 20:22:29,783 - __main__ - INFO - Streaming chunk from generate: ：已婚
- **
2025-06-06 20:22:30,044 - __main__ - INFO - Streaming chunk from generate: 职业**：IT工程师

2025-06-06 20:22:30,165 - __main__ - INFO - Streaming chunk from generate: - **血型**：
2025-06-06 20:22:30,300 - __main__ - INFO - Streaming chunk from generate: O型
- **联系电话
2025-06-06 20:22:30,488 - __main__ - INFO - Streaming chunk from generate: **：138-
2025-06-06 20:22:30,596 - __main__ - INFO - Streaming chunk from generate: 1234-5
2025-06-06 20:22:31,196 - __main__ - INFO - Streaming chunk from generate: 678
- **
2025-06-06 20:22:31,305 - __main__ - INFO - Streaming chunk from generate: 电子邮箱**：zhang
2025-06-06 20:22:31,906 - __main__ - INFO - Streaming chunk from generate: san@example.com
- **
2025-06-06 20:22:32,018 - __main__ - INFO - Streaming chunk from generate: 住址**：上海市
2025-06-06 20:22:32,159 - __main__ - INFO - Streaming chunk from generate: 浦东新区张江路1
2025-06-06 20:22:32,405 - __main__ - INFO - Streaming chunk from generate: 23号

2025-06-06 20:22:32,450 - __main__ - INFO - Streaming chunk from generate: - **紧急联系人**
2025-06-06 20:22:32,595 - __main__ - INFO - Streaming chunk from generate: ：妻子李四六
2025-06-06 20:22:32,836 - __main__ - INFO - Streaming chunk from generate: 
- **紧急
2025-06-06 20:22:32,946 - __main__ - INFO - Streaming chunk from generate: 联系人电话**：1
2025-06-06 20:22:33,204 - __main__ - INFO - Streaming chunk from generate: 38-876
2025-06-06 20:22:33,302 - __main__ - INFO - Streaming chunk from generate: 5-4321
2025-06-06 20:22:33,686 - __main__ - INFO - Streaming chunk from generate: 

### 二、医疗
2025-06-06 20:22:33,802 - __main__ - INFO - Streaming chunk from generate: 历史
- **高血压**
2025-06-06 20:22:34,021 - __main__ - INFO - Streaming chunk from generate: ：2005年
2025-06-06 20:22:34,103 - __main__ - INFO - Streaming chunk from generate: 确诊，接受降压药物
2025-06-06 20:22:34,243 - __main__ - INFO - Streaming chunk from generate: 治疗。
- **二
2025-06-06 20:22:34,425 - __main__ - INFO - Streaming chunk from generate: 型糖尿病**：20
2025-06-06 20:22:34,533 - __main__ - INFO - Streaming chunk from generate: 10年确诊，使用
2025-06-06 20:22:34,690 - __main__ - INFO - Streaming chunk from generate: 口服降糖药管理。

2025-06-06 20:22:34,949 - __main__ - INFO - Streaming chunk from generate: - **脂肪肝**：
2025-06-06 20:22:34,979 - __main__ - INFO - Streaming chunk from generate: 2017年诊断
2025-06-06 20:22:35,312 - __main__ - INFO - Streaming chunk from generate: ，建议通过饮食调整
2025-06-06 20:22:35,550 - __main__ - INFO - Streaming chunk from generate: 和增加运动改善。
-
2025-06-06 20:22:35,739 - __main__ - INFO - Streaming chunk from generate:  **腰椎间盘突出
2025-06-06 20:22:35,847 - __main__ - INFO - Streaming chunk from generate: **：2022
2025-06-06 20:22:35,995 - __main__ - INFO - Streaming chunk from generate: 年接受微创手术，
2025-06-06 20:22:36,169 - __main__ - INFO - Streaming chunk from generate: 术后恢复良好。
- **
2025-06-06 20:22:36,350 - __main__ - INFO - Streaming chunk from generate: 过敏史**：

2025-06-06 20:22:36,519 - __main__ - INFO - Streaming chunk from generate:   - 青霉素
2025-06-06 20:22:36,722 - __main__ - INFO - Streaming chunk from generate: ：曾出现皮疹
2025-06-06 20:22:37,311 - __main__ - INFO - Streaming chunk from generate: 和呼吸困难。
  -
2025-06-06 20:22:37,722 - __main__ - INFO - Streaming chunk from generate:  海鲜：轻度
2025-06-06 20:22:37,811 - __main__ - INFO - Streaming chunk from generate: 皮肤发痒。


2025-06-06 20:22:37,952 - __main__ - INFO - Streaming chunk from generate: - **家族病
2025-06-06 20:22:38,143 - __main__ - INFO - Streaming chunk from generate: 史**：
  -
2025-06-06 20:22:38,231 - __main__ - INFO - Streaming chunk from generate:  父亲：高血压、
2025-06-06 20:22:38,383 - __main__ - INFO - Streaming chunk from generate: 二型糖尿病
  -
2025-06-06 20:22:38,548 - __main__ - INFO - Streaming chunk from generate:  母亲：甲状腺
2025-06-06 20:22:38,659 - __main__ - INFO - Streaming chunk from generate: 疾病

### 三
2025-06-06 20:22:38,798 - __main__ - INFO - Streaming chunk from generate: 、生活方式和习惯
-
2025-06-06 20:22:39,102 - __main__ - INFO - Streaming chunk from generate:  **饮食习惯**：偏好
2025-06-06 20:22:39,530 - __main__ - INFO - Streaming chunk from generate: 高脂肪和高糖食品
2025-06-06 20:22:39,990 - __main__ - INFO - Streaming chunk from generate: ，蔬菜水果摄入少
2025-06-06 20:22:40,106 - __main__ - INFO - Streaming chunk from generate: ，盐分摄入偏高
2025-06-06 20:22:40,246 - __main__ - INFO - Streaming chunk from generate: 。
- **运动情况
2025-06-06 20:22:40,412 - __main__ - INFO - Streaming chunk from generate: **：工作繁忙，每周
2025-06-06 20:22:40,622 - __main__ - INFO - Streaming chunk from generate: 仅进行一次轻度
2025-06-06 20:22:40,846 - __main__ - INFO - Streaming chunk from generate: 运动（如散步）
2025-06-06 20:22:41,698 - __main__ - INFO - Streaming chunk from generate: 。
- **吸烟
2025-06-06 20:22:41,783 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:22:41,804 - __main__ - INFO - Streaming chunk from generate: 史**：无
2025-06-06 20:22:41,942 - __main__ - INFO - Streaming chunk from generate: 
- **饮酒情况**
2025-06-06 20:22:42,125 - __main__ - INFO - Streaming chunk from generate: ：每周2至3次
2025-06-06 20:22:42,807 - __main__ - INFO - Streaming chunk from generate: ，每次约300
2025-06-06 20:22:42,910 - __main__ - INFO - Streaming chunk from generate: 毫升啤酒。
- **睡眠
2025-06-06 20:22:43,048 - __main__ - INFO - Streaming chunk from generate: 情况**：每
2025-06-06 20:22:43,282 - __main__ - INFO - Streaming chunk from generate: 晚平均6小时，常
2025-06-06 20:22:43,736 - __main__ - INFO - Streaming chunk from generate: 感到疲惫。

### 四
2025-06-06 20:22:43,837 - __main__ - INFO - Streaming chunk from generate: 、体检与化验结果
2025-06-06 20:22:44,275 - __main__ - INFO - Streaming chunk from generate: 
- **最近
2025-06-06 20:22:44,361 - __main__ - INFO - Streaming chunk from generate: 体检时间**：
2025-06-06 20:22:44,485 - __main__ - INFO - Streaming chunk from generate: 2024年8
2025-06-06 20:22:44,658 - __main__ - INFO - Streaming chunk from generate: 月15日
-
2025-06-06 20:22:44,771 - __main__ - INFO - Streaming chunk from generate:  **身高**：17
2025-06-06 20:22:44,903 - __main__ - INFO - Streaming chunk from generate: 5厘米
- **体重
2025-06-06 20:22:46,083 - __main__ - INFO - Streaming chunk from generate: **：78公斤

2025-06-06 20:22:46,187 - __main__ - INFO - Streaming chunk from generate: - **BMI**：2
2025-06-06 20:22:46,339 - __main__ - INFO - Streaming chunk from generate: 5.5（超
2025-06-06 20:22:46,934 - __main__ - INFO - Streaming chunk from generate: 重）
- **腰围
2025-06-06 20:22:48,123 - __main__ - INFO - Streaming chunk from generate: **：92厘米（
2025-06-06 20:22:48,138 - __main__ - INFO - Streaming chunk from generate: 略高于健康范围）
-
2025-06-06 20:22:48,271 - __main__ - INFO - Streaming chunk from generate:  **血压**：13
2025-06-06 20:22:48,448 - __main__ - INFO - Streaming chunk from generate: 5/85毫米汞
2025-06-06 20:22:48,567 - __main__ - INFO - Streaming chunk from generate: 柱（轻度高血压）

2025-06-06 20:22:48,708 - __main__ - INFO - Streaming chunk from generate: - **心率**：
2025-06-06 20:22:48,922 - __main__ - INFO - Streaming chunk from generate: 每分钟78
2025-06-06 20:22:49,049 - __main__ - INFO - Streaming chunk from generate: 次（正常范围）
-
2025-06-06 20:22:49,145 - __main__ - INFO - Streaming chunk from generate:  **空腹血糖**：
2025-06-06 20:22:49,331 - __main__ - INFO - Streaming chunk from generate: 6.8毫摩尔
2025-06-06 20:22:49,431 - __main__ - INFO - Streaming chunk from generate: /升（略高于正常
2025-06-06 20:22:49,999 - __main__ - INFO - Streaming chunk from generate: 范围）
- **餐后
2025-06-06 20:22:50,021 - __main__ - INFO - Streaming chunk from generate: 2小时血糖**：8
2025-06-06 20:22:50,148 - __main__ - INFO - Streaming chunk from generate: .9毫摩尔/
2025-06-06 20:22:50,311 - __main__ - INFO - Streaming chunk from generate: 升（高于正常标准）


2025-06-06 20:22:50,547 - __main__ - INFO - Streaming chunk from generate: 以上是张三九
2025-06-06 20:22:50,829 - __main__ - INFO - Streaming chunk from generate: 的健康档案信息。如果
2025-06-06 20:22:50,931 - __main__ - INFO - Streaming chunk from generate: 需要更详细的信息或其他
2025-06-06 20:22:51,499 - __main__ - INFO - Streaming chunk from generate: 方面的帮助，请告诉我
2025-06-06 20:22:51,542 - __main__ - INFO - Streaming chunk from generate: 。
2025-06-06 20:22:51,585 - __main__ - INFO - Streaming chunk from generate: 
2025-06-06 20:23:41,784 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:23:47,061 - __main__ - INFO - The user's user_input is: Kevin的健康档案信息
2025-06-06 20:23:47,068 - ragAgent - INFO - Agent processing user query
2025-06-06 20:23:47,069 - ragAgent - INFO - agent question:content='Kevin的健康档案信息' additional_kwargs={} response_metadata={} id='fbe0e2df-460c-4329-b7a0-2067bd55cf18'
2025-06-06 20:23:47,293 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-06 20:23:48,326 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:50,427 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:50,614 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:50,616 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:50,773 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-06-06 20:23:50,774 - ragAgent - INFO - Grading documents for relevance
2025-06-06 20:23:50,775 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-06-06 20:23:52,445 - ragAgent - INFO - Document relevance score: no
2025-06-06 20:23:52,446 - ragAgent - INFO - Routing based on relevance_score: no, rewrite_count: 0
2025-06-06 20:23:52,447 - ragAgent - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-06-06 20:23:52,449 - ragAgent - INFO - Rewriting query
2025-06-06 20:23:52,450 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-06-06 20:23:53,328 - ragAgent - INFO - Rewrite count: 1
2025-06-06 20:23:53,330 - ragAgent - INFO - Agent processing user query
2025-06-06 20:23:53,331 - ragAgent - INFO - agent question:content='Kevin的健康档案中具体包含了哪些信息？' additional_kwargs={} response_metadata={'finish_reason': 'stop', 'model_name': 'qwen-max'} id='run--a099b2ec-2c3e-46ae-bfb4-873c71cdff3b'
2025-06-06 20:23:53,484 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-06 20:23:54,331 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:54,423 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:54,582 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:54,758 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:54,760 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:54,904 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-06-06 20:23:54,907 - ragAgent - INFO - Grading documents for relevance
2025-06-06 20:23:54,908 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-06-06 20:23:56,141 - ragAgent - INFO - Document relevance score: no
2025-06-06 20:23:56,143 - ragAgent - INFO - Routing based on relevance_score: no, rewrite_count: 1
2025-06-06 20:23:56,143 - ragAgent - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-06-06 20:23:56,146 - ragAgent - INFO - Rewriting query
2025-06-06 20:23:56,146 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-06-06 20:23:56,741 - ragAgent - INFO - Rewrite count: 2
2025-06-06 20:23:56,743 - ragAgent - INFO - Agent processing user query
2025-06-06 20:23:56,744 - ragAgent - INFO - agent question:content='Kevin的健康档案中包含哪些具体信息？' additional_kwargs={} response_metadata={'finish_reason': 'stop', 'model_name': 'qwen-max'} id='run--a632c9bd-bd84-47ea-ba6b-d0aab48ce825'
2025-06-06 20:23:56,900 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-06 20:23:57,823 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:58,177 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:58,364 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:58,431 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:58,433 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:23:58,575 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-06-06 20:23:58,577 - ragAgent - INFO - Grading documents for relevance
2025-06-06 20:23:58,577 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-06-06 20:23:59,987 - ragAgent - INFO - Document relevance score: no
2025-06-06 20:23:59,989 - ragAgent - INFO - Routing based on relevance_score: no, rewrite_count: 2
2025-06-06 20:23:59,990 - ragAgent - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-06-06 20:23:59,992 - ragAgent - INFO - Rewriting query
2025-06-06 20:23:59,993 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-06-06 20:24:00,784 - ragAgent - INFO - Rewrite count: 3
2025-06-06 20:24:00,786 - ragAgent - INFO - Agent processing user query
2025-06-06 20:24:00,787 - ragAgent - INFO - agent question:content='Kevin的健康档案中具体包含哪些信息？' additional_kwargs={} response_metadata={'finish_reason': 'stop', 'model_name': 'qwen-max'} id='run--74d15261-71ba-461a-9f19-11d71ecca279'
2025-06-06 20:24:00,943 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-06 20:24:01,796 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:24:01,890 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:24:03,767 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:24:03,833 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:24:03,835 - __main__ - INFO - Streaming chunk from agent: 
2025-06-06 20:24:03,985 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-06-06 20:24:03,987 - ragAgent - INFO - Grading documents for relevance
2025-06-06 20:24:03,987 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-06-06 20:24:04,651 - ragAgent - INFO - Document relevance score: no
2025-06-06 20:24:04,653 - ragAgent - INFO - Routing based on relevance_score: no, rewrite_count: 3
2025-06-06 20:24:04,654 - ragAgent - INFO - Max rewrite limit reached, proceeding to generate
2025-06-06 20:24:04,656 - ragAgent - INFO - Generating final response
2025-06-06 20:24:04,657 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-06-06 20:24:05,641 - __main__ - INFO - Streaming chunk from generate: 
2025-06-06 20:24:05,642 - __main__ - INFO - Streaming chunk from generate: 您好
2025-06-06 20:24:05,679 - __main__ - INFO - Streaming chunk from generate: ！
2025-06-06 20:24:05,745 - __main__ - INFO - Streaming chunk from generate: 根据
2025-06-06 20:24:05,878 - __main__ - INFO - Streaming chunk from generate: 您提供的信息，这里
2025-06-06 20:24:06,155 - __main__ - INFO - Streaming chunk from generate: 记录的是王五的
2025-06-06 20:24:07,205 - __main__ - INFO - Streaming chunk from generate: 健康档案，并没有提到
2025-06-06 20:24:07,314 - __main__ - INFO - Streaming chunk from generate: Kevin的相关信息。如果您
2025-06-06 20:24:07,781 - __main__ - INFO - Streaming chunk from generate: 需要了解Kevin的
2025-06-06 20:24:07,898 - __main__ - INFO - Streaming chunk from generate: 健康档案，请提供更多的
2025-06-06 20:24:08,482 - __main__ - INFO - Streaming chunk from generate: 相关信息或具体问题，
2025-06-06 20:24:08,588 - __main__ - INFO - Streaming chunk from generate: 这样我才能更好地
2025-06-06 20:24:08,730 - __main__ - INFO - Streaming chunk from generate: 帮助到您。如果
2025-06-06 20:24:08,968 - __main__ - INFO - Streaming chunk from generate: 您的问题是关于如何
2025-06-06 20:24:09,675 - __main__ - INFO - Streaming chunk from generate: 管理健康（比如
2025-06-06 20:24:10,010 - __main__ - INFO - Streaming chunk from generate: 保持正常体重、
2025-06-06 20:24:10,114 - __main__ - INFO - Streaming chunk from generate: 管理血脂水平、预防糖尿病
2025-06-06 20:24:10,259 - __main__ - INFO - Streaming chunk from generate: 等），我可以基于
2025-06-06 20:24:10,514 - __main__ - INFO - Streaming chunk from generate: 已有的信息给出
2025-06-06 20:24:10,616 - __main__ - INFO - Streaming chunk from generate: 一些建议
2025-06-06 20:24:10,752 - __main__ - INFO - Streaming chunk from generate: 。请告诉我更多
2025-06-06 20:24:10,922 - __main__ - INFO - Streaming chunk from generate: 细节，谢谢！
2025-06-06 20:24:10,972 - __main__ - INFO - Streaming chunk from generate: 
2025-06-06 20:24:41,785 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:25:41,787 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:26:41,789 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:27:41,791 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:28:41,792 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:29:41,794 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:30:41,796 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:31:41,797 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:32:41,798 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:33:41,799 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:34:41,801 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:35:41,803 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:36:41,804 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-06 20:37:33,237 - __main__ - INFO - Database connection pool closed
2025-06-06 20:37:33,238 - __main__ - INFO - The service has been shut down
2025-06-11 19:27:00,217 - __main__ - INFO - Start the server on port 8012
2025-06-11 19:27:03,189 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-06-11 19:27:03,190 - ragAgent - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-06-11 19:27:03,190 - ragAgent - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-06-11 19:27:03,192 - __main__ - INFO - Database connection pool initialized
2025-06-11 19:27:03,194 - __main__ - DEBUG - Database connection pool initialized
2025-06-11 19:27:03,195 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-11 19:27:13,200 - ragAgent - ERROR - Failed to verify connection db_connection_pool status: couldn't get a connection after 10.00 sec
2025-06-11 19:27:13,212 - __main__ - ERROR - Graph creation failed: 无法验证连接池状态: couldn't get a connection after 10.00 sec
2025-06-11 22:09:53,974 - __main__ - INFO - Start the server on port 8012
2025-06-11 22:09:56,713 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-06-11 22:09:56,714 - ragAgent - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-06-11 22:09:56,714 - ragAgent - INFO - Initialized ToolConfig with tools: {'multiply', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-06-11 22:09:56,716 - __main__ - INFO - Database connection pool initialized
2025-06-11 22:09:56,718 - __main__ - DEBUG - Database connection pool initialized
2025-06-11 22:09:56,719 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-11 22:09:56,743 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-06-11 22:09:56,908 - ragAgent - INFO - Graph visualization saved as graph.png
2025-06-11 22:10:47,527 - __main__ - INFO - The user's user_input is: 你好
2025-06-11 22:10:47,564 - ragAgent - INFO - Agent processing user query
2025-06-11 22:10:47,564 - ragAgent - INFO - agent question:content='你好' additional_kwargs={} response_metadata={} id='69d1852d-e849-4449-99cd-636405ad0626'
2025-06-11 22:10:47,894 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-06-11 22:10:48,438 - __main__ - INFO - Streaming chunk from agent: 你好
2025-06-11 22:10:48,465 - __main__ - INFO - Streaming chunk from agent: ！
2025-06-11 22:10:48,708 - __main__ - INFO - Streaming chunk from agent: 有什么
2025-06-11 22:10:48,967 - __main__ - INFO - Streaming chunk from agent: 可以帮助你的吗？
2025-06-11 22:10:49,193 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:10:56,720 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-11 22:11:41,896 - __main__ - INFO - The user's user_input is: 张三九的健康档案信息
2025-06-11 22:11:41,908 - ragAgent - INFO - Agent processing user query
2025-06-11 22:11:41,909 - ragAgent - INFO - agent question:content='张三九的健康档案信息' additional_kwargs={} response_metadata={} id='9136beb3-b310-4438-abcb-911014c91596'
2025-06-11 22:11:42,109 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-11 22:11:43,155 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:11:43,390 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:11:43,725 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:11:43,727 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:11:43,914 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-06-11 22:11:43,916 - ragAgent - INFO - Grading documents for relevance
2025-06-11 22:11:43,917 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-06-11 22:11:45,534 - ragAgent - INFO - Document relevance score: yes
2025-06-11 22:11:45,535 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-06-11 22:11:45,536 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-06-11 22:11:45,538 - ragAgent - INFO - Generating final response
2025-06-11 22:11:45,539 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-06-11 22:11:46,465 - __main__ - INFO - Streaming chunk from generate: 
2025-06-11 22:11:46,467 - __main__ - INFO - Streaming chunk from generate: 根据
2025-06-11 22:11:46,550 - __main__ - INFO - Streaming chunk from generate: 您提供的信息，张三
2025-06-11 22:11:46,990 - __main__ - INFO - Streaming chunk from generate: 九的健康档案如下：


2025-06-11 22:11:47,149 - __main__ - INFO - Streaming chunk from generate: ### 一、基本信息
2025-06-11 22:11:47,338 - __main__ - INFO - Streaming chunk from generate: 
- **姓名**：
2025-06-11 22:11:47,429 - __main__ - INFO - Streaming chunk from generate: 张三九
- **
2025-06-11 22:11:47,584 - __main__ - INFO - Streaming chunk from generate: 性别**：男
-
2025-06-11 22:11:47,700 - __main__ - INFO - Streaming chunk from generate:  **出生日期**：1
2025-06-11 22:11:47,894 - __main__ - INFO - Streaming chunk from generate: 985年5月
2025-06-11 22:11:47,972 - __main__ - INFO - Streaming chunk from generate: 20日
- **
2025-06-11 22:11:48,117 - __main__ - INFO - Streaming chunk from generate: 年龄**：39岁
2025-06-11 22:11:48,777 - __main__ - INFO - Streaming chunk from generate: 
- **婚姻状况**
2025-06-11 22:11:49,039 - __main__ - INFO - Streaming chunk from generate: ：已婚
- **
2025-06-11 22:11:49,246 - __main__ - INFO - Streaming chunk from generate: 职业**：IT工程师

2025-06-11 22:11:49,584 - __main__ - INFO - Streaming chunk from generate: - **血型**：
2025-06-11 22:11:49,830 - __main__ - INFO - Streaming chunk from generate: O型
- **联系电话
2025-06-11 22:11:50,003 - __main__ - INFO - Streaming chunk from generate: **：138-
2025-06-11 22:11:50,601 - __main__ - INFO - Streaming chunk from generate: 1234-5
2025-06-11 22:11:50,750 - __main__ - INFO - Streaming chunk from generate: 678
- **
2025-06-11 22:11:50,927 - __main__ - INFO - Streaming chunk from generate: 电子邮箱**：zhang
2025-06-11 22:11:51,129 - __main__ - INFO - Streaming chunk from generate: san@example.com
- **
2025-06-11 22:11:51,252 - __main__ - INFO - Streaming chunk from generate: 居住地址**：上海市浦东
2025-06-11 22:11:51,539 - __main__ - INFO - Streaming chunk from generate: 新区张江路12
2025-06-11 22:11:51,628 - __main__ - INFO - Streaming chunk from generate: 3号
- **紧急
2025-06-11 22:11:51,778 - __main__ - INFO - Streaming chunk from generate: 联系人**：妻子
2025-06-11 22:11:52,573 - __main__ - INFO - Streaming chunk from generate: 李四六

2025-06-11 22:11:53,063 - __main__ - INFO - Streaming chunk from generate: - **紧急联系人电话
2025-06-11 22:11:53,165 - __main__ - INFO - Streaming chunk from generate: **：138-
2025-06-11 22:11:53,460 - __main__ - INFO - Streaming chunk from generate: 8765-4
2025-06-11 22:11:53,660 - __main__ - INFO - Streaming chunk from generate: 321

### 
2025-06-11 22:11:53,758 - __main__ - INFO - Streaming chunk from generate: 二、医疗历史
-
2025-06-11 22:11:53,964 - __main__ - INFO - Streaming chunk from generate:  **高血压**：20
2025-06-11 22:11:54,056 - __main__ - INFO - Streaming chunk from generate: 05年确诊，接受
2025-06-11 22:11:54,220 - __main__ - INFO - Streaming chunk from generate: 降压药物治疗。

2025-06-11 22:11:54,350 - __main__ - INFO - Streaming chunk from generate: - **二型糖尿病**
2025-06-11 22:11:54,580 - __main__ - INFO - Streaming chunk from generate: ：2010年
2025-06-11 22:11:54,646 - __main__ - INFO - Streaming chunk from generate: 确诊，使用口服降糖
2025-06-11 22:11:54,795 - __main__ - INFO - Streaming chunk from generate: 药管理。
- **脂肪
2025-06-11 22:11:55,084 - __main__ - INFO - Streaming chunk from generate: 肝**：201
2025-06-11 22:11:55,217 - __main__ - INFO - Streaming chunk from generate: 7年诊断，建议
2025-06-11 22:11:55,593 - __main__ - INFO - Streaming chunk from generate: 通过饮食调整和增加运动
2025-06-11 22:11:55,672 - __main__ - INFO - Streaming chunk from generate: 来改善。
-
2025-06-11 22:11:55,832 - __main__ - INFO - Streaming chunk from generate:  **腰椎间盘突出
2025-06-11 22:11:56,108 - __main__ - INFO - Streaming chunk from generate: **：2022
2025-06-11 22:11:56,289 - __main__ - INFO - Streaming chunk from generate: 年接受微创手术，
2025-06-11 22:11:56,367 - __main__ - INFO - Streaming chunk from generate: 术后恢复良好。
- **
2025-06-11 22:11:56,722 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-11 22:11:56,783 - __main__ - INFO - Streaming chunk from generate: 过敏史**：

2025-06-11 22:11:57,024 - __main__ - INFO - Streaming chunk from generate:   - 对青霉素过敏
2025-06-11 22:11:57,445 - __main__ - INFO - Streaming chunk from generate: （曾出现皮疹
2025-06-11 22:11:57,598 - __main__ - INFO - Streaming chunk from generate: 和呼吸困难）。
 
2025-06-11 22:11:57,943 - __main__ - INFO - Streaming chunk from generate:  - 对海鲜轻
2025-06-11 22:11:58,024 - __main__ - INFO - Streaming chunk from generate: 度过敏（皮肤
2025-06-11 22:11:58,498 - __main__ - INFO - Streaming chunk from generate: 发痒）。

2025-06-11 22:11:58,717 - __main__ - INFO - Streaming chunk from generate: - **家族病史**
2025-06-11 22:11:59,014 - __main__ - INFO - Streaming chunk from generate: ：
  - 父
2025-06-11 22:11:59,221 - __main__ - INFO - Streaming chunk from generate: 亲患有高血压和二型
2025-06-11 22:11:59,326 - __main__ - INFO - Streaming chunk from generate: 糖尿病。
  -
2025-06-11 22:11:59,544 - __main__ - INFO - Streaming chunk from generate:  母亲有甲状腺疾病史
2025-06-11 22:11:59,643 - __main__ - INFO - Streaming chunk from generate: 。

### 三、生活方式
2025-06-11 22:11:59,875 - __main__ - INFO - Streaming chunk from generate: 和习惯
- **饮食
2025-06-11 22:11:59,961 - __main__ - INFO - Streaming chunk from generate: 习惯**：偏向高脂肪
2025-06-11 22:12:00,171 - __main__ - INFO - Streaming chunk from generate: 和高糖食品，蔬菜
2025-06-11 22:12:00,265 - __main__ - INFO - Streaming chunk from generate: 和水果摄入较少，盐
2025-06-11 22:12:00,471 - __main__ - INFO - Streaming chunk from generate: 分摄入偏高。
-
2025-06-11 22:12:00,581 - __main__ - INFO - Streaming chunk from generate:  **运动情况**：工作
2025-06-11 22:12:00,928 - __main__ - INFO - Streaming chunk from generate: 繁忙，每周仅进行
2025-06-11 22:12:01,119 - __main__ - INFO - Streaming chunk from generate: 一次轻度运动，
2025-06-11 22:12:01,555 - __main__ - INFO - Streaming chunk from generate: 如散步。
- **吸烟
2025-06-11 22:12:01,595 - __main__ - INFO - Streaming chunk from generate: 情况**：无吸烟史
2025-06-11 22:12:01,806 - __main__ - INFO - Streaming chunk from generate: 。
- **饮酒
2025-06-11 22:12:01,942 - __main__ - INFO - Streaming chunk from generate: 情况**：每周饮酒2
2025-06-11 22:12:02,140 - __main__ - INFO - Streaming chunk from generate: 至3次，每次约
2025-06-11 22:12:02,419 - __main__ - INFO - Streaming chunk from generate: 300毫升啤酒。

2025-06-11 22:12:02,743 - __main__ - INFO - Streaming chunk from generate: - **睡眠情况**：
2025-06-11 22:12:02,832 - __main__ - INFO - Streaming chunk from generate: 平均每晚睡眠时间为
2025-06-11 22:12:03,294 - __main__ - INFO - Streaming chunk from generate: 6小时，常常感到疲惫
2025-06-11 22:12:03,389 - __main__ - INFO - Streaming chunk from generate: 。

### 四、体检
2025-06-11 22:12:03,758 - __main__ - INFO - Streaming chunk from generate: 与化验结果
-
2025-06-11 22:12:03,852 - __main__ - INFO - Streaming chunk from generate:  **最近一次体检时间
2025-06-11 22:12:04,242 - __main__ - INFO - Streaming chunk from generate: **：2024
2025-06-11 22:12:04,325 - __main__ - INFO - Streaming chunk from generate: 年8月15日
2025-06-11 22:12:04,617 - __main__ - INFO - Streaming chunk from generate: 
- **身高**：
2025-06-11 22:12:04,721 - __main__ - INFO - Streaming chunk from generate: 175厘米
-
2025-06-11 22:12:05,104 - __main__ - INFO - Streaming chunk from generate:  **体重**：78
2025-06-11 22:12:05,209 - __main__ - INFO - Streaming chunk from generate: 公斤
- **BMI
2025-06-11 22:12:05,410 - __main__ - INFO - Streaming chunk from generate: **：25.5
2025-06-11 22:12:05,600 - __main__ - INFO - Streaming chunk from generate: （超重）
- **
2025-06-11 22:12:05,813 - __main__ - INFO - Streaming chunk from generate: 腰围**：92
2025-06-11 22:12:05,912 - __main__ - INFO - Streaming chunk from generate: 厘米（略高于健康范围
2025-06-11 22:12:06,112 - __main__ - INFO - Streaming chunk from generate: ）
- **血压**：
2025-06-11 22:12:06,211 - __main__ - INFO - Streaming chunk from generate: 135/85
2025-06-11 22:12:06,364 - __main__ - INFO - Streaming chunk from generate: 毫米汞柱（轻度
2025-06-11 22:12:06,843 - __main__ - INFO - Streaming chunk from generate: 高血压）
- **心率
2025-06-11 22:12:07,126 - __main__ - INFO - Streaming chunk from generate: **：每分钟7
2025-06-11 22:12:07,600 - __main__ - INFO - Streaming chunk from generate: 8次（正常范围）

2025-06-11 22:12:07,840 - __main__ - INFO - Streaming chunk from generate: - **空腹血糖**
2025-06-11 22:12:08,047 - __main__ - INFO - Streaming chunk from generate: ：6.8毫摩
2025-06-11 22:12:08,393 - __main__ - INFO - Streaming chunk from generate: 尔/升（略高于
2025-06-11 22:12:08,832 - __main__ - INFO - Streaming chunk from generate: 正常范围）
- **餐
2025-06-11 22:12:08,942 - __main__ - INFO - Streaming chunk from generate: 后2小时血糖**：
2025-06-11 22:12:09,146 - __main__ - INFO - Streaming chunk from generate: 8.9毫摩尔
2025-06-11 22:12:09,541 - __main__ - INFO - Streaming chunk from generate: /升（高于正常标准
2025-06-11 22:12:09,983 - __main__ - INFO - Streaming chunk from generate: ）

以上是张三九
2025-06-11 22:12:10,257 - __main__ - INFO - Streaming chunk from generate: 的健康档案概
2025-06-11 22:12:10,410 - __main__ - INFO - Streaming chunk from generate: 要。如果需要更
2025-06-11 22:12:10,774 - __main__ - INFO - Streaming chunk from generate: 详细的信息或进一步的帮助
2025-06-11 22:12:10,886 - __main__ - INFO - Streaming chunk from generate: ，请告诉我。
2025-06-11 22:12:10,951 - __main__ - INFO - Streaming chunk from generate: 
2025-06-11 22:12:56,724 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-11 22:13:56,725 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-11 22:14:47,978 - __main__ - INFO - The user's user_input is: 3*9
2025-06-11 22:14:47,987 - ragAgent - INFO - Agent processing user query
2025-06-11 22:14:47,987 - ragAgent - INFO - agent question:content='3*9' additional_kwargs={} response_metadata={} id='c24176ab-f07b-44e1-8c47-1c6f70fd2e21'
2025-06-11 22:14:48,327 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-11 22:14:49,587 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:14:49,646 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:14:49,713 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:14:49,833 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:14:49,835 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:14:49,838 - ragAgent - INFO - Tool multiply routed to generate based on config
2025-06-11 22:14:49,841 - ragAgent - INFO - Generating final response
2025-06-11 22:14:49,841 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-06-11 22:14:50,169 - __main__ - INFO - Streaming chunk from generate: 
2025-06-11 22:14:50,170 - __main__ - INFO - Streaming chunk from generate: 3
2025-06-11 22:14:50,187 - __main__ - INFO - Streaming chunk from generate: *
2025-06-11 22:14:50,318 - __main__ - INFO - Streaming chunk from generate: 9的结果是27
2025-06-11 22:14:50,388 - __main__ - INFO - Streaming chunk from generate: 。
2025-06-11 22:14:50,434 - __main__ - INFO - Streaming chunk from generate: 
2025-06-11 22:14:56,726 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-11 22:15:39,662 - __main__ - INFO - The user's user_input is: 调用工具计算3乘以9等于多少
2025-06-11 22:15:39,670 - ragAgent - INFO - Agent processing user query
2025-06-11 22:15:39,671 - ragAgent - INFO - agent question:content='调用工具计算3乘以9等于多少' additional_kwargs={} response_metadata={} id='186490ed-93ef-42cd-9ff1-96e36ff2faba'
2025-06-11 22:15:39,875 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-06-11 22:15:41,127 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:15:41,258 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:15:41,447 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:15:41,607 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:15:41,608 - __main__ - INFO - Streaming chunk from agent: 
2025-06-11 22:15:41,611 - ragAgent - INFO - Tool multiply routed to generate based on config
2025-06-11 22:15:41,613 - ragAgent - INFO - Generating final response
2025-06-11 22:15:41,614 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-06-11 22:15:41,966 - __main__ - INFO - Streaming chunk from generate: 
2025-06-11 22:15:41,967 - __main__ - INFO - Streaming chunk from generate: 3
2025-06-11 22:15:42,069 - __main__ - INFO - Streaming chunk from generate: 乘以9的结果
2025-06-11 22:15:42,299 - __main__ - INFO - Streaming chunk from generate: 是27。
2025-06-11 22:15:42,342 - __main__ - INFO - Streaming chunk from generate: 
2025-06-11 22:15:56,728 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-11 22:16:56,729 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-11 22:17:56,731 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-06-11 22:18:07,207 - __main__ - INFO - Database connection pool closed
2025-06-11 22:18:07,207 - __main__ - INFO - The service has been shut down
2025-08-05 19:23:12,325 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-08-05 19:23:12,328 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-08-05 19:23:12,328 - __main__ - INFO - Initialized ToolConfig with tools: {'multiply', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-08-05 19:23:12,330 - __main__ - INFO - Database connection pool initialized
2025-08-05 19:23:12,331 - __main__ - DEBUG - Database connection pool initialized
2025-08-05 19:23:12,331 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-05 19:23:12,344 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-08-05 19:23:36,469 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-08-05 19:23:36,470 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-08-05 19:23:36,471 - __main__ - INFO - Initialized ToolConfig with tools: {'multiply', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-08-05 19:23:36,473 - __main__ - INFO - Database connection pool initialized
2025-08-05 19:23:36,474 - __main__ - DEBUG - Database connection pool initialized
2025-08-05 19:23:36,474 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-05 19:23:36,492 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-08-05 19:23:38,234 - __main__ - INFO - Graph visualization saved as graph.png
2025-08-05 19:24:36,476 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-05 19:25:36,478 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-05 19:25:48,175 - __main__ - INFO - Agent processing user query
2025-08-05 19:25:48,176 - __main__ - INFO - agent question:content='你好，我是聚客AI学院Kevin' additional_kwargs={} response_metadata={} id='629be157-bc53-4260-befe-6052f6dd0e1b'
2025-08-05 19:25:48,762 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-08-05 19:26:36,479 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-05 19:27:36,480 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-05 19:28:36,481 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-05 19:28:45,661 - __main__ - INFO - Database connection pool closed
2025-08-25 20:42:18,093 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-08-25 20:42:18,095 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-08-25 20:42:18,096 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-08-25 20:42:18,097 - __main__ - INFO - Database connection pool initialized
2025-08-25 20:42:18,098 - __main__ - DEBUG - Database connection pool initialized
2025-08-25 20:42:18,100 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 20:42:18,118 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-08-25 20:42:30,006 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-08-25 20:42:30,007 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-08-25 20:42:30,009 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-08-25 20:42:30,010 - __main__ - INFO - Database connection pool initialized
2025-08-25 20:42:30,011 - __main__ - DEBUG - Database connection pool initialized
2025-08-25 20:42:30,012 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 20:42:30,030 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-08-25 20:43:28,966 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-08-25 20:43:28,967 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-08-25 20:43:28,968 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-08-25 20:43:28,969 - __main__ - INFO - Database connection pool initialized
2025-08-25 20:43:28,970 - __main__ - DEBUG - Database connection pool initialized
2025-08-25 20:43:28,971 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 20:43:28,986 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-08-25 20:45:06,786 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-08-25 20:45:06,787 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-08-25 20:45:06,788 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-08-25 20:45:06,789 - __main__ - INFO - Database connection pool initialized
2025-08-25 20:45:06,790 - __main__ - DEBUG - Database connection pool initialized
2025-08-25 20:45:06,791 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 20:45:06,808 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-08-25 20:57:22,031 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-08-25 20:57:22,032 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-08-25 20:57:22,033 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-08-25 20:57:22,034 - __main__ - INFO - Database connection pool initialized
2025-08-25 20:57:22,035 - __main__ - DEBUG - Database connection pool initialized
2025-08-25 20:57:22,036 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 20:57:22,053 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-08-25 20:57:28,466 - __main__ - INFO - Graph visualization saved as graph.png
2025-08-25 20:58:22,039 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 20:58:50,885 - __main__ - INFO - Agent processing user query
2025-08-25 20:58:50,886 - __main__ - INFO - agent question:content='你好，我是聚客AI学院Kevin' additional_kwargs={} response_metadata={} id='738f5a79-5544-4bb9-a299-4c576476e998'
2025-08-25 20:58:51,111 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-08-25 20:59:09,551 - __main__ - INFO - Agent processing user query
2025-08-25 20:59:09,552 - __main__ - INFO - agent question:content='我是谁？' additional_kwargs={} response_metadata={} id='45cad66d-424b-4f67-bfa7-d961804f6732'
2025-08-25 20:59:09,775 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 20:59:22,040 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 20:59:25,263 - __main__ - INFO - Agent processing user query
2025-08-25 20:59:25,264 - __main__ - INFO - agent question:content='3*4' additional_kwargs={} response_metadata={} id='cf2ef01c-4f0d-4e22-95c8-084b9db0b77f'
2025-08-25 20:59:25,475 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 20:59:27,461 - __main__ - INFO - Calling tool: multiply
2025-08-25 20:59:27,465 - __main__ - INFO - Tool multiply routed to generate based on config
2025-08-25 20:59:27,467 - __main__ - INFO - Generating final response
2025-08-25 20:59:27,468 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-08-25 21:00:22,041 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:00:41,065 - __main__ - INFO - Agent processing user query
2025-08-25 21:00:41,066 - __main__ - INFO - agent question:content='张三九的健康档案信息' additional_kwargs={} response_metadata={} id='14169480-4175-49f6-bf66-45eb97827cdf'
2025-08-25 21:00:41,259 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 21:00:42,525 - __main__ - INFO - Calling tool: retrieve
2025-08-25 21:00:42,726 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-08-25 21:00:42,730 - __main__ - INFO - Grading documents for relevance
2025-08-25 21:00:42,731 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-08-25 21:00:43,977 - __main__ - INFO - Document relevance score: yes
2025-08-25 21:00:43,978 - __main__ - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-08-25 21:00:43,979 - __main__ - INFO - Documents are relevant, proceeding to generate
2025-08-25 21:00:43,982 - __main__ - INFO - Generating final response
2025-08-25 21:00:43,983 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-08-25 21:01:22,042 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:02:22,044 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:03:22,045 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:04:22,047 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:04:35,136 - __main__ - INFO - Agent processing user query
2025-08-25 21:04:35,137 - __main__ - INFO - agent question:content='Kevin的健康档案信息' additional_kwargs={} response_metadata={} id='34c01f14-1064-487b-a12a-e200d87e76d1'
2025-08-25 21:04:35,331 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 21:04:36,953 - __main__ - INFO - Calling tool: retrieve
2025-08-25 21:04:37,107 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-08-25 21:04:37,110 - __main__ - INFO - Grading documents for relevance
2025-08-25 21:04:37,111 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-08-25 21:04:38,749 - __main__ - INFO - Document relevance score: no
2025-08-25 21:04:38,750 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 0
2025-08-25 21:04:38,751 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-08-25 21:04:38,767 - __main__ - INFO - Rewriting query
2025-08-25 21:04:38,767 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-08-25 21:04:39,532 - __main__ - INFO - Rewrite count: 1
2025-08-25 21:04:39,533 - __main__ - INFO - Agent processing user query
2025-08-25 21:04:39,535 - __main__ - INFO - agent question:content='Kevin的健康档案中具体包含了哪些信息？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 10, 'prompt_tokens': 64, 'total_tokens': 74, 'completion_tokens_details': None, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': 0}}, 'model_name': 'qwen-max', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--c678e0ce-5931-48dc-9217-ef257ed2a37c-0' usage_metadata={'input_tokens': 64, 'output_tokens': 10, 'total_tokens': 74, 'input_token_details': {'cache_read': 0}, 'output_token_details': {}}
2025-08-25 21:04:39,668 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 21:04:41,243 - __main__ - INFO - Calling tool: retrieve
2025-08-25 21:04:41,379 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-08-25 21:04:41,382 - __main__ - INFO - Grading documents for relevance
2025-08-25 21:04:41,383 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-08-25 21:04:42,745 - __main__ - INFO - Document relevance score: no
2025-08-25 21:04:42,746 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 1
2025-08-25 21:04:42,747 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-08-25 21:04:42,750 - __main__ - INFO - Rewriting query
2025-08-25 21:04:42,751 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-08-25 21:04:43,423 - __main__ - INFO - Rewrite count: 2
2025-08-25 21:04:43,425 - __main__ - INFO - Agent processing user query
2025-08-25 21:04:43,426 - __main__ - INFO - agent question:content='Kevin的健康档案中包含了哪些具体信息？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 10, 'prompt_tokens': 64, 'total_tokens': 74, 'completion_tokens_details': None, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': 0}}, 'model_name': 'qwen-max', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--c489f948-ba96-4362-a424-d9068b3dc466-0' usage_metadata={'input_tokens': 64, 'output_tokens': 10, 'total_tokens': 74, 'input_token_details': {'cache_read': 0}, 'output_token_details': {}}
2025-08-25 21:04:43,579 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 21:04:44,994 - __main__ - INFO - Calling tool: retrieve
2025-08-25 21:04:45,127 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-08-25 21:04:45,130 - __main__ - INFO - Grading documents for relevance
2025-08-25 21:04:45,131 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-08-25 21:04:45,899 - __main__ - INFO - Document relevance score: no
2025-08-25 21:04:45,900 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 2
2025-08-25 21:04:45,901 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-08-25 21:04:45,905 - __main__ - INFO - Rewriting query
2025-08-25 21:04:45,906 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-08-25 21:04:46,904 - __main__ - INFO - Rewrite count: 3
2025-08-25 21:04:46,906 - __main__ - INFO - Agent processing user query
2025-08-25 21:04:46,907 - __main__ - INFO - agent question:content='Kevin的健康档案中包含哪些具体信息？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 10, 'prompt_tokens': 64, 'total_tokens': 74, 'completion_tokens_details': None, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': 0}}, 'model_name': 'qwen-max', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--14c4e8ae-7d8d-488d-b942-910dde1ab64d-0' usage_metadata={'input_tokens': 64, 'output_tokens': 10, 'total_tokens': 74, 'input_token_details': {'cache_read': 0}, 'output_token_details': {}}
2025-08-25 21:04:47,051 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 21:04:51,936 - __main__ - INFO - Calling tool: retrieve
2025-08-25 21:04:52,072 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-08-25 21:04:52,076 - __main__ - INFO - Grading documents for relevance
2025-08-25 21:04:52,077 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-08-25 21:04:52,898 - __main__ - INFO - Document relevance score: no
2025-08-25 21:04:52,899 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 3
2025-08-25 21:04:52,899 - __main__ - INFO - Max rewrite limit reached, proceeding to generate
2025-08-25 21:04:52,903 - __main__ - INFO - Generating final response
2025-08-25 21:04:52,904 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-08-25 21:05:22,048 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:06:22,049 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:06:23,463 - __main__ - INFO - Database connection pool closed
2025-08-25 21:27:46,095 - __main__ - INFO - Start the server on port 8012
2025-08-25 21:27:49,032 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-08-25 21:27:49,033 - ragAgent - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-08-25 21:27:49,034 - ragAgent - INFO - Initialized ToolConfig with tools: {'multiply', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-08-25 21:27:49,035 - __main__ - INFO - Database connection pool initialized
2025-08-25 21:27:49,037 - __main__ - DEBUG - Database connection pool initialized
2025-08-25 21:27:49,038 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:27:49,055 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-08-25 21:27:50,224 - ragAgent - INFO - Graph visualization saved as graph.png
2025-08-25 21:28:49,040 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:29:47,333 - __main__ - INFO - The user's user_input is: 查询张三九的健康档案信息
2025-08-25 21:29:47,349 - ragAgent - INFO - Agent processing user query
2025-08-25 21:29:47,350 - ragAgent - INFO - agent question:content='查询张三九的健康档案信息' additional_kwargs={} response_metadata={} id='acd475b2-ca04-4bfa-afa8-01f2998f72dc'
2025-08-25 21:29:47,575 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-08-25 21:29:48,300 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:29:48,421 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:29:48,724 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:29:48,727 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:29:48,907 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-08-25 21:29:48,910 - ragAgent - INFO - Grading documents for relevance
2025-08-25 21:29:48,910 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-08-25 21:29:49,041 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:29:50,233 - ragAgent - INFO - Document relevance score: yes
2025-08-25 21:29:50,235 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-08-25 21:29:50,236 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-08-25 21:29:50,239 - ragAgent - INFO - Generating final response
2025-08-25 21:29:50,240 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-08-25 21:29:51,328 - __main__ - INFO - Streaming chunk from generate: 
2025-08-25 21:29:51,331 - __main__ - INFO - Streaming chunk from generate: 张
2025-08-25 21:29:51,355 - __main__ - INFO - Streaming chunk from generate: 三九的
2025-08-25 21:29:51,411 - __main__ - INFO - Streaming chunk from generate: 健康档案信息
2025-08-25 21:29:51,487 - __main__ - INFO - Streaming chunk from generate: 如下：

###
2025-08-25 21:29:51,587 - __main__ - INFO - Streaming chunk from generate:  一、基本信息
2025-08-25 21:29:51,714 - __main__ - INFO - Streaming chunk from generate: 
- **姓名**：
2025-08-25 21:29:51,817 - __main__ - INFO - Streaming chunk from generate: 张三九
- **
2025-08-25 21:29:51,949 - __main__ - INFO - Streaming chunk from generate: 性别**：男
-
2025-08-25 21:29:52,043 - __main__ - INFO - Streaming chunk from generate:  **出生日期**：1
2025-08-25 21:29:52,177 - __main__ - INFO - Streaming chunk from generate: 985年5月
2025-08-25 21:29:52,275 - __main__ - INFO - Streaming chunk from generate: 20日
- **
2025-08-25 21:29:52,408 - __main__ - INFO - Streaming chunk from generate: 年龄**：39岁
2025-08-25 21:29:52,881 - __main__ - INFO - Streaming chunk from generate: 
- **婚姻状况**
2025-08-25 21:29:53,021 - __main__ - INFO - Streaming chunk from generate: ：已婚
- **
2025-08-25 21:29:53,121 - __main__ - INFO - Streaming chunk from generate: 职业**：IT工程师

2025-08-25 21:29:53,260 - __main__ - INFO - Streaming chunk from generate: - **血型**：
2025-08-25 21:29:53,366 - __main__ - INFO - Streaming chunk from generate: O型
- **联系电话
2025-08-25 21:29:53,565 - __main__ - INFO - Streaming chunk from generate: **：138-
2025-08-25 21:29:53,667 - __main__ - INFO - Streaming chunk from generate: 1234-5
2025-08-25 21:29:53,793 - __main__ - INFO - Streaming chunk from generate: 678
- **
2025-08-25 21:29:53,929 - __main__ - INFO - Streaming chunk from generate: 电子邮箱**：
2025-08-25 21:29:54,052 - __main__ - INFO - Streaming chunk from generate: zhangsan@example.com

2025-08-25 21:29:54,163 - __main__ - INFO - Streaming chunk from generate: - **居住地址
2025-08-25 21:29:54,305 - __main__ - INFO - Streaming chunk from generate: **：上海市浦东新区张
2025-08-25 21:29:54,406 - __main__ - INFO - Streaming chunk from generate: 江路123号
2025-08-25 21:29:54,534 - __main__ - INFO - Streaming chunk from generate: 
- **紧急
2025-08-25 21:29:54,678 - __main__ - INFO - Streaming chunk from generate: 联系人**：妻子
2025-08-25 21:29:54,795 - __main__ - INFO - Streaming chunk from generate: 李四六，联系电话1
2025-08-25 21:29:54,932 - __main__ - INFO - Streaming chunk from generate: 38-876
2025-08-25 21:29:55,037 - __main__ - INFO - Streaming chunk from generate: 5-4321
2025-08-25 21:29:55,280 - __main__ - INFO - Streaming chunk from generate: 

### 二、医疗
2025-08-25 21:29:55,284 - __main__ - INFO - Streaming chunk from generate: 历史
- **高血压**
2025-08-25 21:29:55,424 - __main__ - INFO - Streaming chunk from generate: ：2005
2025-08-25 21:29:55,530 - __main__ - INFO - Streaming chunk from generate: 年确诊，接受
2025-08-25 21:29:55,672 - __main__ - INFO - Streaming chunk from generate: 降压药物治疗。
-
2025-08-25 21:29:55,780 - __main__ - INFO - Streaming chunk from generate:  **二型糖尿病**：
2025-08-25 21:29:55,926 - __main__ - INFO - Streaming chunk from generate: 2010年确诊
2025-08-25 21:29:56,031 - __main__ - INFO - Streaming chunk from generate: ，使用口服降糖
2025-08-25 21:29:56,167 - __main__ - INFO - Streaming chunk from generate: 药管理。
- **脂肪
2025-08-25 21:29:56,406 - __main__ - INFO - Streaming chunk from generate: 肝**：201
2025-08-25 21:29:56,523 - __main__ - INFO - Streaming chunk from generate: 7年诊断，建议
2025-08-25 21:29:56,657 - __main__ - INFO - Streaming chunk from generate: 通过饮食调整和增加运动
2025-08-25 21:29:56,765 - __main__ - INFO - Streaming chunk from generate: 改善。
- **腰椎
2025-08-25 21:29:56,905 - __main__ - INFO - Streaming chunk from generate: 间盘突出**：2
2025-08-25 21:29:57,024 - __main__ - INFO - Streaming chunk from generate: 022年接受
2025-08-25 21:29:57,162 - __main__ - INFO - Streaming chunk from generate: 微创手术，术后恢复良好
2025-08-25 21:29:57,266 - __main__ - INFO - Streaming chunk from generate: 。
- **过敏
2025-08-25 21:29:57,460 - __main__ - INFO - Streaming chunk from generate: 史**：
  - 对
2025-08-25 21:29:57,566 - __main__ - INFO - Streaming chunk from generate: 青霉素有过敏反应（
2025-08-25 21:29:57,758 - __main__ - INFO - Streaming chunk from generate: 皮疹、呼吸困难）
2025-08-25 21:29:57,880 - __main__ - INFO - Streaming chunk from generate: 。
  - 海鲜
2025-08-25 21:29:58,025 - __main__ - INFO - Streaming chunk from generate: 会导致轻度皮肤发痒
2025-08-25 21:29:58,128 - __main__ - INFO - Streaming chunk from generate: 。

### 三、家族
2025-08-25 21:29:58,319 - __main__ - INFO - Streaming chunk from generate: 病史
-
2025-08-25 21:29:58,423 - __main__ - INFO - Streaming chunk from generate:  父亲：
2025-08-25 21:29:58,540 - __main__ - INFO - Streaming chunk from generate: 患有高血压和二
2025-08-25 21:29:58,688 - __main__ - INFO - Streaming chunk from generate: 型糖尿病。
-
2025-08-25 21:29:58,794 - __main__ - INFO - Streaming chunk from generate:  母亲：有甲状腺疾病
2025-08-25 21:29:58,934 - __main__ - INFO - Streaming chunk from generate: 史。

### 四
2025-08-25 21:29:59,099 - __main__ - INFO - Streaming chunk from generate: 、生活方式与习惯
-
2025-08-25 21:29:59,234 - __main__ - INFO - Streaming chunk from generate:  **饮食习惯**：偏好
2025-08-25 21:29:59,344 - __main__ - INFO - Streaming chunk from generate: 高脂肪和高糖食品
2025-08-25 21:29:59,491 - __main__ - INFO - Streaming chunk from generate: ，蔬菜水果摄入少
2025-08-25 21:29:59,612 - __main__ - INFO - Streaming chunk from generate: ，盐分摄入偏高
2025-08-25 21:29:59,734 - __main__ - INFO - Streaming chunk from generate: 。
- **运动情况
2025-08-25 21:29:59,838 - __main__ - INFO - Streaming chunk from generate: **：工作繁忙，每周
2025-08-25 21:29:59,979 - __main__ - INFO - Streaming chunk from generate: 仅进行一次轻度运动
2025-08-25 21:30:00,082 - __main__ - INFO - Streaming chunk from generate: 如散步。
-
2025-08-25 21:30:00,228 - __main__ - INFO - Streaming chunk from generate:  **饮酒情况**：
2025-08-25 21:30:00,331 - __main__ - INFO - Streaming chunk from generate: 无吸烟史，
2025-08-25 21:30:00,454 - __main__ - INFO - Streaming chunk from generate: 但每周饮酒2
2025-08-25 21:30:00,604 - __main__ - INFO - Streaming chunk from generate: 至3次，每次约
2025-08-25 21:30:00,710 - __main__ - INFO - Streaming chunk from generate: 300毫升啤酒。

2025-08-25 21:30:00,853 - __main__ - INFO - Streaming chunk from generate: - **睡眠情况**：
2025-08-25 21:30:00,958 - __main__ - INFO - Streaming chunk from generate: 每晚平均睡眠
2025-08-25 21:30:01,081 - __main__ - INFO - Streaming chunk from generate: 时间6小时，
2025-08-25 21:30:01,219 - __main__ - INFO - Streaming chunk from generate: 常感到疲惫。


2025-08-25 21:30:01,328 - __main__ - INFO - Streaming chunk from generate: ### 五、体检与
2025-08-25 21:30:01,450 - __main__ - INFO - Streaming chunk from generate: 化验结果（
2025-08-25 21:30:01,588 - __main__ - INFO - Streaming chunk from generate: 2024
2025-08-25 21:30:01,691 - __main__ - INFO - Streaming chunk from generate: 年8月15日
2025-08-25 21:30:01,831 - __main__ - INFO - Streaming chunk from generate: ）
- **身高**：
2025-08-25 21:30:01,927 - __main__ - INFO - Streaming chunk from generate: 175厘米
-
2025-08-25 21:30:02,074 - __main__ - INFO - Streaming chunk from generate:  **体重**：78
2025-08-25 21:30:02,167 - __main__ - INFO - Streaming chunk from generate: 公斤
- **BMI
2025-08-25 21:30:02,312 - __main__ - INFO - Streaming chunk from generate: **：25.5
2025-08-25 21:30:02,390 - __main__ - INFO - Streaming chunk from generate: （超重）

2025-08-25 21:30:02,504 - __main__ - INFO - Streaming chunk from generate: - **腰围**：
2025-08-25 21:30:02,643 - __main__ - INFO - Streaming chunk from generate: 92厘米（略高于
2025-08-25 21:30:02,735 - __main__ - INFO - Streaming chunk from generate: 健康范围）
- **血压
2025-08-25 21:30:02,878 - __main__ - INFO - Streaming chunk from generate: **：135/
2025-08-25 21:30:02,975 - __main__ - INFO - Streaming chunk from generate: 85毫米汞柱（
2025-08-25 21:30:03,114 - __main__ - INFO - Streaming chunk from generate: 轻度高血压）
- **
2025-08-25 21:30:03,210 - __main__ - INFO - Streaming chunk from generate: 心率**：78
2025-08-25 21:30:03,343 - __main__ - INFO - Streaming chunk from generate: 次/分钟（正常范围
2025-08-25 21:30:03,442 - __main__ - INFO - Streaming chunk from generate: ）
- **血糖
2025-08-25 21:30:03,569 - __main__ - INFO - Streaming chunk from generate: 水平**：
 
2025-08-25 21:30:03,665 - __main__ - INFO - Streaming chunk from generate:  - 空腹血糖
2025-08-25 21:30:03,781 - __main__ - INFO - Streaming chunk from generate: ：6.8毫摩
2025-08-25 21:30:03,922 - __main__ - INFO - Streaming chunk from generate: 尔/升（略高于
2025-08-25 21:30:04,020 - __main__ - INFO - Streaming chunk from generate: 正常范围）
  -
2025-08-25 21:30:04,173 - __main__ - INFO - Streaming chunk from generate:  餐后2小时血糖
2025-08-25 21:30:04,271 - __main__ - INFO - Streaming chunk from generate: ：8.9毫摩
2025-08-25 21:30:04,388 - __main__ - INFO - Streaming chunk from generate: 尔/升（高于
2025-08-25 21:30:04,519 - __main__ - INFO - Streaming chunk from generate: 正常标准）

以上是张
2025-08-25 21:30:04,640 - __main__ - INFO - Streaming chunk from generate: 三九的健康档案信息
2025-08-25 21:30:04,767 - __main__ - INFO - Streaming chunk from generate: 。如果需要更
2025-08-25 21:30:04,911 - __main__ - INFO - Streaming chunk from generate: 详细的资料或其他帮助
2025-08-25 21:30:05,040 - __main__ - INFO - Streaming chunk from generate: ，请告诉我。
2025-08-25 21:30:05,064 - __main__ - INFO - Streaming chunk from generate: 
2025-08-25 21:30:43,455 - __main__ - INFO - The user's user_input is: 你好，我是聚客AI学院Kevin
2025-08-25 21:30:43,464 - ragAgent - INFO - Agent processing user query
2025-08-25 21:30:43,465 - ragAgent - INFO - agent question:content='你好，我是聚客AI学院Kevin' additional_kwargs={} response_metadata={} id='45bb7f6d-efc3-40bb-a6e3-094311743130'
2025-08-25 21:30:43,693 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 21:30:44,361 - __main__ - INFO - Streaming chunk from agent: 你好
2025-08-25 21:30:44,422 - __main__ - INFO - Streaming chunk from agent: ，Kevin
2025-08-25 21:30:44,487 - __main__ - INFO - Streaming chunk from agent: ！
2025-08-25 21:30:44,551 - __main__ - INFO - Streaming chunk from agent: 请问
2025-08-25 21:30:44,752 - __main__ - INFO - Streaming chunk from agent: 有什么我可以帮您的？
2025-08-25 21:30:44,819 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:30:49,042 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:30:57,970 - __main__ - INFO - The user's user_input is: 我是谁
2025-08-25 21:30:57,977 - ragAgent - INFO - Agent processing user query
2025-08-25 21:30:57,978 - ragAgent - INFO - agent question:content='我是谁' additional_kwargs={} response_metadata={} id='24622c85-ed2e-4ab6-a5d9-2c27713d1691'
2025-08-25 21:30:58,198 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 21:30:58,923 - __main__ - INFO - Streaming chunk from agent: 您好
2025-08-25 21:30:59,018 - __main__ - INFO - Streaming chunk from agent: ，Kevin
2025-08-25 21:30:59,111 - __main__ - INFO - Streaming chunk from agent: ！您
2025-08-25 21:30:59,211 - __main__ - INFO - Streaming chunk from agent: 之前
2025-08-25 21:30:59,507 - __main__ - INFO - Streaming chunk from agent: 提到自己是聚客
2025-08-25 21:31:00,933 - __main__ - INFO - Streaming chunk from agent: AI学院的成员
2025-08-25 21:31:01,237 - __main__ - INFO - Streaming chunk from agent: 。如果还有其他问题或
2025-08-25 21:31:01,400 - __main__ - INFO - Streaming chunk from agent: 需要进一步的帮助，请告诉我
2025-08-25 21:31:01,499 - __main__ - INFO - Streaming chunk from agent: 。
2025-08-25 21:31:01,515 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:31:49,044 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:32:49,045 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:33:09,133 - __main__ - INFO - The user's user_input is: 我是谁
2025-08-25 21:33:09,139 - ragAgent - INFO - Agent processing user query
2025-08-25 21:33:09,140 - ragAgent - INFO - agent question:content='我是谁' additional_kwargs={} response_metadata={} id='0c70af20-f907-4fa7-9ee2-bbc0ed33f59c'
2025-08-25 21:33:09,341 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 21:33:09,851 - __main__ - INFO - Streaming chunk from agent: 您的
2025-08-25 21:33:10,117 - __main__ - INFO - Streaming chunk from agent: 问题与健康
2025-08-25 21:33:10,195 - __main__ - INFO - Streaming chunk from agent: 档案无关
2025-08-25 21:33:10,257 - __main__ - INFO - Streaming chunk from agent: ，您
2025-08-25 21:33:10,667 - __main__ - INFO - Streaming chunk from agent: 似乎是想了解自己的
2025-08-25 21:33:10,788 - __main__ - INFO - Streaming chunk from agent: 身份信息。在这里
2025-08-25 21:33:11,057 - __main__ - INFO - Streaming chunk from agent: 我无法获取到
2025-08-25 21:33:11,202 - __main__ - INFO - Streaming chunk from agent: 您的个人信息，因为我
2025-08-25 21:33:11,390 - __main__ - INFO - Streaming chunk from agent: 是一个智能分诊助手
2025-08-25 21:33:11,608 - __main__ - INFO - Streaming chunk from agent: ，我的主要任务
2025-08-25 21:33:11,724 - __main__ - INFO - Streaming chunk from agent: 是帮助解答关于
2025-08-25 21:33:11,872 - __main__ - INFO - Streaming chunk from agent: 健康档案的问题或
2025-08-25 21:33:12,052 - __main__ - INFO - Streaming chunk from agent: 使用计算工具。如果您
2025-08-25 21:33:12,197 - __main__ - INFO - Streaming chunk from agent: 有关于健康档案
2025-08-25 21:33:12,380 - __main__ - INFO - Streaming chunk from agent: 的查询，欢迎
2025-08-25 21:33:12,514 - __main__ - INFO - Streaming chunk from agent: 随时提问。如果
2025-08-25 21:33:12,804 - __main__ - INFO - Streaming chunk from agent: 需要了解个人身份，请
2025-08-25 21:33:12,978 - __main__ - INFO - Streaming chunk from agent: 检查您提供的个人
2025-08-25 21:33:13,190 - __main__ - INFO - Streaming chunk from agent: 资料或上下文是否有
2025-08-25 21:33:13,382 - __main__ - INFO - Streaming chunk from agent: 相关信息。
2025-08-25 21:33:13,399 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:33:49,046 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:34:01,547 - __main__ - INFO - The user's user_input is: kevin的健康档案信息
2025-08-25 21:34:01,552 - ragAgent - INFO - Agent processing user query
2025-08-25 21:34:01,553 - ragAgent - INFO - agent question:content='kevin的健康档案信息' additional_kwargs={} response_metadata={} id='16eae4f2-2c56-4250-8f0d-6990916a0150'
2025-08-25 21:34:01,756 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 21:34:02,643 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:02,859 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:03,048 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:03,164 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:03,165 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:03,305 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-08-25 21:34:03,307 - ragAgent - INFO - Grading documents for relevance
2025-08-25 21:34:03,308 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-08-25 21:34:04,489 - ragAgent - INFO - Document relevance score: no
2025-08-25 21:34:04,491 - ragAgent - INFO - Routing based on relevance_score: no, rewrite_count: 0
2025-08-25 21:34:04,492 - ragAgent - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-08-25 21:34:04,494 - ragAgent - INFO - Rewriting query
2025-08-25 21:34:04,495 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-08-25 21:34:05,283 - ragAgent - INFO - Rewrite count: 1
2025-08-25 21:34:05,284 - ragAgent - INFO - Agent processing user query
2025-08-25 21:34:05,285 - ragAgent - INFO - agent question:content='Kevin的健康档案中具体包含了哪些信息？' additional_kwargs={} response_metadata={'finish_reason': 'stop', 'model_name': 'qwen-max'} id='run--d636cb56-b535-4b3b-94b9-3c34892d8eaa'
2025-08-25 21:34:05,448 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 21:34:06,857 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:07,072 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:07,253 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:07,631 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:07,734 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:07,735 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:07,860 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-08-25 21:34:07,862 - ragAgent - INFO - Grading documents for relevance
2025-08-25 21:34:07,863 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-08-25 21:34:09,557 - ragAgent - INFO - Document relevance score: no
2025-08-25 21:34:09,559 - ragAgent - INFO - Routing based on relevance_score: no, rewrite_count: 1
2025-08-25 21:34:09,559 - ragAgent - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-08-25 21:34:09,561 - ragAgent - INFO - Rewriting query
2025-08-25 21:34:09,563 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-08-25 21:34:10,496 - ragAgent - INFO - Rewrite count: 2
2025-08-25 21:34:10,498 - ragAgent - INFO - Agent processing user query
2025-08-25 21:34:10,499 - ragAgent - INFO - agent question:content='Kevin的健康档案中具体包含哪些信息？' additional_kwargs={} response_metadata={'finish_reason': 'stop', 'model_name': 'qwen-max'} id='run--b5f6cb0a-024d-4e0c-a144-63e9420eb3c5'
2025-08-25 21:34:10,635 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 21:34:12,191 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:12,384 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:12,530 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:12,724 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:12,726 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:12,883 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-08-25 21:34:12,885 - ragAgent - INFO - Grading documents for relevance
2025-08-25 21:34:12,885 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-08-25 21:34:14,548 - ragAgent - INFO - Document relevance score: no
2025-08-25 21:34:14,549 - ragAgent - INFO - Routing based on relevance_score: no, rewrite_count: 2
2025-08-25 21:34:14,549 - ragAgent - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-08-25 21:34:14,551 - ragAgent - INFO - Rewriting query
2025-08-25 21:34:14,552 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-08-25 21:34:15,171 - ragAgent - INFO - Rewrite count: 3
2025-08-25 21:34:15,174 - ragAgent - INFO - Agent processing user query
2025-08-25 21:34:15,174 - ragAgent - INFO - agent question:content='Kevin的健康档案中包含哪些具体信息？' additional_kwargs={} response_metadata={'finish_reason': 'stop', 'model_name': 'qwen-max'} id='run--42ee2b16-0c55-45f4-bfed-6e32cabfac45'
2025-08-25 21:34:15,345 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 21:34:17,238 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:17,396 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:17,525 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:17,684 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:17,686 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:34:17,808 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-08-25 21:34:17,811 - ragAgent - INFO - Grading documents for relevance
2025-08-25 21:34:17,811 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-08-25 21:34:20,191 - ragAgent - INFO - Document relevance score: no
2025-08-25 21:34:20,192 - ragAgent - INFO - Routing based on relevance_score: no, rewrite_count: 3
2025-08-25 21:34:20,193 - ragAgent - INFO - Max rewrite limit reached, proceeding to generate
2025-08-25 21:34:20,195 - ragAgent - INFO - Generating final response
2025-08-25 21:34:20,196 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-08-25 21:34:21,055 - __main__ - INFO - Streaming chunk from generate: 
2025-08-25 21:34:21,056 - __main__ - INFO - Streaming chunk from generate: 您好
2025-08-25 21:34:21,261 - __main__ - INFO - Streaming chunk from generate: ！
2025-08-25 21:34:21,343 - __main__ - INFO - Streaming chunk from generate: 根据
2025-08-25 21:34:21,436 - __main__ - INFO - Streaming chunk from generate: 您提供的信息
2025-08-25 21:34:21,736 - __main__ - INFO - Streaming chunk from generate: ，似乎这里提到
2025-08-25 21:34:21,998 - __main__ - INFO - Streaming chunk from generate: 的健康档案是关于
2025-08-25 21:34:22,184 - __main__ - INFO - Streaming chunk from generate: 一位名叫王五
2025-08-25 21:34:22,389 - __main__ - INFO - Streaming chunk from generate: 的45岁男性
2025-08-25 21:34:22,759 - __main__ - INFO - Streaming chunk from generate: ，并非kevin。因此
2025-08-25 21:34:23,059 - __main__ - INFO - Streaming chunk from generate: ，我无法直接
2025-08-25 21:34:23,541 - __main__ - INFO - Streaming chunk from generate: 提供kevin的健康
2025-08-25 21:34:23,755 - __main__ - INFO - Streaming chunk from generate: 档案信息。如果您能
2025-08-25 21:34:23,903 - __main__ - INFO - Streaming chunk from generate: 提供更多关于kevin
2025-08-25 21:34:24,056 - __main__ - INFO - Streaming chunk from generate: 的具体信息，比如
2025-08-25 21:34:24,174 - __main__ - INFO - Streaming chunk from generate: 他的全名、年龄
2025-08-25 21:34:24,549 - __main__ - INFO - Streaming chunk from generate: 或其他识别信息，或许
2025-08-25 21:34:24,673 - __main__ - INFO - Streaming chunk from generate: 我能更好地帮助到
2025-08-25 21:34:24,811 - __main__ - INFO - Streaming chunk from generate: 您。另外，请
2025-08-25 21:34:25,034 - __main__ - INFO - Streaming chunk from generate: 确保分享的信息遵守
2025-08-25 21:34:25,228 - __main__ - INFO - Streaming chunk from generate: 隐私保护原则。如果
2025-08-25 21:34:25,447 - __main__ - INFO - Streaming chunk from generate: 这些信息不足以找到
2025-08-25 21:34:25,573 - __main__ - INFO - Streaming chunk from generate: kevin的相关资料
2025-08-25 21:34:25,794 - __main__ - INFO - Streaming chunk from generate: ，可能需要从
2025-08-25 21:34:25,915 - __main__ - INFO - Streaming chunk from generate: 其他来源获取更
2025-08-25 21:34:26,125 - __main__ - INFO - Streaming chunk from generate: 准确的数据。
2025-08-25 21:34:26,145 - __main__ - INFO - Streaming chunk from generate: 
2025-08-25 21:34:49,047 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:35:49,049 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:36:49,051 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:37:49,052 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:38:49,054 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:39:49,056 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:40:49,057 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:41:49,059 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:42:49,060 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:43:49,061 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:44:31,039 - __main__ - INFO - The user's user_input is: 我是谁
2025-08-25 21:44:31,047 - ragAgent - INFO - Agent processing user query
2025-08-25 21:44:31,048 - ragAgent - INFO - agent question:content='我是谁' additional_kwargs={} response_metadata={} id='d1e156db-adcf-4268-b6f2-5246b2c49050'
2025-08-25 21:44:31,256 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-08-25 21:44:31,890 - __main__ - INFO - Streaming chunk from agent: 您好
2025-08-25 21:44:31,971 - __main__ - INFO - Streaming chunk from agent: ，Kevin！
2025-08-25 21:44:32,228 - __main__ - INFO - Streaming chunk from agent: 您之前提到
2025-08-25 21:44:32,255 - __main__ - INFO - Streaming chunk from agent: 自己是聚
2025-08-25 21:44:32,259 - __main__ - INFO - Streaming chunk from agent: 客AI学院的成员。
2025-08-25 21:44:32,311 - __main__ - INFO - Streaming chunk from agent: 如果还有其他问题或需要
2025-08-25 21:44:32,414 - __main__ - INFO - Streaming chunk from agent: 进一步的帮助，请告诉我。
2025-08-25 21:44:32,436 - __main__ - INFO - Streaming chunk from agent: 
2025-08-25 21:44:49,062 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:45:49,064 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:46:49,066 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:47:49,068 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:48:49,069 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:49:49,070 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:50:49,072 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:51:49,074 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:52:49,075 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:53:49,076 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:54:49,078 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:55:49,080 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:56:49,081 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:57:49,083 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:58:49,085 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 21:59:49,087 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 22:00:49,088 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 22:01:49,090 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 22:02:49,091 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 22:03:49,093 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 22:04:49,095 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 22:05:49,096 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 22:06:49,098 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 22:07:49,099 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 22:08:49,101 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 22:09:49,102 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 22:10:49,103 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-08-25 22:10:50,478 - __main__ - INFO - Database connection pool closed
2025-08-25 22:10:50,478 - __main__ - INFO - The service has been shut down
2025-10-07 11:08:51,393 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-07 11:08:51,394 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-10-07 11:08:51,395 - __main__ - INFO - Initialized ToolConfig with tools: {'multiply', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-10-07 11:08:51,396 - __main__ - INFO - Database connection pool initialized
2025-10-07 11:08:51,397 - __main__ - DEBUG - Database connection pool initialized
2025-10-07 11:08:51,398 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 11:08:51,465 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-07 11:08:51,532 - __main__ - ERROR - Failed to setup PostgresStore: extension "vector" is not available
DETAIL:  Could not open extension control file "D:/TOOLS/PostgreSQL/15/share/extension/vector.control": No such file or directory.
HINT:  The extension must first be installed on the system where PostgreSQL is running.
2025-10-07 11:08:51,534 - __main__ - ERROR - Graph creation failed: 存储初始化失败: extension "vector" is not available
DETAIL:  Could not open extension control file "D:/TOOLS/PostgreSQL/15/share/extension/vector.control": No such file or directory.
HINT:  The extension must first be installed on the system where PostgreSQL is running.
2025-10-07 11:08:51,535 - __main__ - INFO - Database connection pool closed
2025-10-07 11:45:50,664 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-07 11:45:50,676 - __main__ - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-10-07 11:45:50,676 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'multiply'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-10-07 11:45:50,677 - __main__ - INFO - Database connection pool initialized
2025-10-07 11:45:50,679 - __main__ - DEBUG - Database connection pool initialized
2025-10-07 11:45:50,680 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 11:45:50,743 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-07 11:46:37,216 - __main__ - INFO - Agent processing user query
2025-10-07 11:46:37,217 - __main__ - INFO - agent question:content='张三九的档案？' additional_kwargs={} response_metadata={} id='613e74bd-18a2-4e04-af33-b74a12a5126e'
2025-10-07 11:46:37,992 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-07 11:46:40,696 - __main__ - INFO - Calling tool: retrieve
2025-10-07 11:46:41,578 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-07 11:46:41,584 - __main__ - INFO - Grading documents for relevance
2025-10-07 11:46:41,585 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-07 11:46:44,872 - __main__ - INFO - Document relevance score: yes
2025-10-07 11:46:44,873 - __main__ - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-10-07 11:46:44,874 - __main__ - INFO - Documents are relevant, proceeding to generate
2025-10-07 11:46:44,880 - __main__ - INFO - Generating final response
2025-10-07 11:46:44,880 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-07 11:46:50,683 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 11:47:18,561 - __main__ - INFO - Database connection pool closed
2025-10-07 11:49:24,145 - __main__ - INFO - Start the server on port 8012
2025-10-07 11:49:24,737 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-07 11:49:24,738 - ragAgent - DEBUG - Tool 'multiply' routed to 'generate' (non-retrieval tool)
2025-10-07 11:49:24,738 - ragAgent - INFO - Initialized ToolConfig with tools: {'multiply', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'multiply': 'generate'}
2025-10-07 11:49:24,740 - __main__ - INFO - Database connection pool initialized
2025-10-07 11:49:24,741 - __main__ - DEBUG - Database connection pool initialized
2025-10-07 11:49:24,741 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 11:49:24,811 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-07 11:49:25,962 - ragAgent - INFO - Graph visualization saved as graph.png
2025-10-07 11:50:24,743 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 11:51:24,748 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 11:52:24,749 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 11:53:24,751 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 11:54:24,752 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 11:55:24,754 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 11:56:24,755 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 11:57:24,756 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 11:58:24,758 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 11:59:24,759 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:00:24,761 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:01:24,762 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:02:24,765 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:03:24,766 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:04:24,768 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:05:24,769 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:06:24,772 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:07:24,773 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:08:24,774 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:09:24,775 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:10:24,778 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:11:24,779 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:12:24,780 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:13:24,782 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:14:24,783 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:15:24,784 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:16:24,785 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:17:24,787 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:18:24,791 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:19:24,793 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:20:24,794 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:21:24,796 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:22:24,799 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:23:24,800 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:24:24,802 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:25:24,803 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:26:24,804 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:27:24,805 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:28:24,807 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:29:24,808 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:30:24,809 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:31:24,811 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 12:31:49,427 - __main__ - INFO - Database connection pool closed
2025-10-07 12:31:49,427 - __main__ - INFO - The service has been shut down
2025-10-07 16:50:51,717 - __main__ - ERROR - Unexpected error: Tool.__init__() got multiple values for argument 'name'
2025-10-07 16:51:55,125 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-07 16:51:55,126 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-07 16:51:55,126 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-07 16:51:55,127 - __main__ - INFO - Database connection pool initialized
2025-10-07 16:51:55,129 - __main__ - DEBUG - Database connection pool initialized
2025-10-07 16:51:55,130 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 16:51:55,212 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-07 16:52:13,567 - __main__ - INFO - Agent processing user query
2025-10-07 16:52:13,568 - __main__ - INFO - agent question:content='货代的主要操作流程？' additional_kwargs={} response_metadata={} id='a9189ff1-6141-4b8c-a8e6-1da0eb5b1b59'
2025-10-07 16:52:14,388 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-07 16:52:16,828 - __main__ - INFO - Calling tool: tavily_search
2025-10-07 16:52:18,874 - __main__ - INFO - Tool tavily_search routed to generate based on config
2025-10-07 16:52:18,878 - __main__ - INFO - Generating final response
2025-10-07 16:52:18,878 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-07 16:52:55,132 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 16:53:21,422 - __main__ - INFO - Agent processing user query
2025-10-07 16:53:21,424 - __main__ - INFO - agent question:content='本运用本地的知识库，说说什么是货代？' additional_kwargs={} response_metadata={} id='d2510665-5f04-441b-ac17-b0b9157e48aa'
2025-10-07 16:53:23,251 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-07 16:53:55,133 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 16:54:39,028 - __main__ - INFO - Database connection pool closed
2025-10-07 16:55:31,467 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-07 16:55:31,468 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-07 16:55:31,468 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-07 16:55:31,469 - __main__ - INFO - Database connection pool initialized
2025-10-07 16:55:31,471 - __main__ - DEBUG - Database connection pool initialized
2025-10-07 16:55:31,471 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 16:55:31,521 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-07 16:55:38,753 - __main__ - INFO - Agent processing user query
2025-10-07 16:55:38,754 - __main__ - INFO - agent question:content='货代是什么？' additional_kwargs={} response_metadata={} id='ae4d3dbb-1d4d-464b-bbc8-6c9a05ef5e56'
2025-10-07 16:55:39,548 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-07 16:56:31,473 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 16:57:07,874 - __main__ - INFO - Agent processing user query
2025-10-07 16:57:07,875 - __main__ - INFO - agent question:content='海运 询价' additional_kwargs={} response_metadata={} id='b9fa46a8-b785-41c5-9a93-8c0790ae5b00'
2025-10-07 16:57:08,748 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-07 16:57:31,474 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 16:58:31,475 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 16:58:43,733 - __main__ - INFO - Agent processing user query
2025-10-07 16:58:43,735 - __main__ - INFO - agent question:content='查询货代知识库，告诉我' additional_kwargs={} response_metadata={} id='0d53964f-38ab-4c94-bbd2-503b06f692a4'
2025-10-07 16:58:45,951 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-07 16:59:03,484 - __main__ - INFO - Agent processing user query
2025-10-07 16:59:03,486 - __main__ - INFO - agent question:content='查询货代知识库，告诉我货代的基本操作流程是什么' additional_kwargs={} response_metadata={} id='5ce74ace-b5d4-4928-b242-66654b41b85a'
2025-10-07 16:59:04,286 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-07 16:59:08,751 - __main__ - INFO - Calling tool: 货代知识查询工具
2025-10-07 16:59:08,753 - __main__ - INFO - Unknown tool 货代知识查询工具, routing to generate
2025-10-07 16:59:08,754 - __main__ - INFO - Generating final response
2025-10-07 16:59:08,754 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-07 16:59:31,477 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 17:00:12,341 - __main__ - INFO - Agent processing user query
2025-10-07 17:00:12,344 - __main__ - INFO - agent question:content='使用retrieve工具，告诉我货代的基本操作流程是什么' additional_kwargs={} response_metadata={} id='a93f2ce6-1ffb-4a15-be84-8805ba62d688'
2025-10-07 17:00:13,120 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-07 17:00:19,152 - __main__ - INFO - Calling tool: retrieve
2025-10-07 17:00:20,018 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-07 17:00:20,020 - __main__ - INFO - Grading documents for relevance
2025-10-07 17:00:20,021 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-07 17:00:21,985 - __main__ - INFO - Document relevance score: yes
2025-10-07 17:00:21,986 - __main__ - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-10-07 17:00:21,986 - __main__ - INFO - Documents are relevant, proceeding to generate
2025-10-07 17:00:21,987 - __main__ - INFO - Generating final response
2025-10-07 17:00:21,988 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-10-07 17:00:31,478 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 17:01:31,479 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 17:02:07,965 - __main__ - INFO - Database connection pool closed
2025-10-07 17:02:12,971 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-07 17:02:12,972 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-07 17:02:12,973 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-07 17:02:12,974 - __main__ - INFO - Database connection pool initialized
2025-10-07 17:02:12,975 - __main__ - DEBUG - Database connection pool initialized
2025-10-07 17:02:12,976 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 17:02:13,041 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-07 17:02:39,729 - __main__ - INFO - Agent processing user query
2025-10-07 17:02:39,730 - __main__ - INFO - agent question:content='货代的基本操作流程？' additional_kwargs={} response_metadata={} id='d458def2-a099-448d-aa20-c676223f534a'
2025-10-07 17:02:41,543 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-07 17:03:12,977 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 17:04:12,979 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 17:04:19,139 - __main__ - INFO - Database connection pool closed
2025-10-07 17:04:25,913 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-07 17:04:25,914 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-07 17:04:25,914 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-07 17:04:25,915 - __main__ - INFO - Database connection pool initialized
2025-10-07 17:04:25,917 - __main__ - DEBUG - Database connection pool initialized
2025-10-07 17:04:25,917 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 17:04:25,987 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-07 17:04:38,362 - __main__ - INFO - Agent processing user query
2025-10-07 17:04:38,364 - __main__ - INFO - agent question:content='货代的基本操作流程？' additional_kwargs={} response_metadata={} id='974aa4e7-c81e-4b08-b341-74d01c98c06c'
2025-10-07 17:04:40,662 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-07 17:05:25,920 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 17:05:31,493 - __main__ - INFO - Agent processing user query
2025-10-07 17:05:31,494 - __main__ - INFO - agent question:content='使用retrieve工具告诉我' additional_kwargs={} response_metadata={} id='f20b86d6-dda8-4a0e-bb79-c37182a35a2e'
2025-10-07 17:05:32,231 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-07 17:05:43,771 - __main__ - INFO - Agent processing user query
2025-10-07 17:05:43,772 - __main__ - INFO - agent question:content='使用retrieve工具告诉我货代的基本操作流程' additional_kwargs={} response_metadata={} id='078b0862-c9cd-450a-988d-6e86e8d1fb20'
2025-10-07 17:05:44,990 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-07 17:05:47,894 - __main__ - INFO - Calling tool: retrieve
2025-10-07 17:05:48,769 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-07 17:05:48,771 - __main__ - INFO - Grading documents for relevance
2025-10-07 17:05:48,771 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-07 17:05:50,461 - __main__ - INFO - Document relevance score: yes
2025-10-07 17:05:50,462 - __main__ - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-10-07 17:05:50,462 - __main__ - INFO - Documents are relevant, proceeding to generate
2025-10-07 17:05:50,463 - __main__ - INFO - Generating final response
2025-10-07 17:05:50,464 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-07 17:06:25,921 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 17:06:33,580 - __main__ - INFO - Agent processing user query
2025-10-07 17:06:33,581 - __main__ - INFO - agent question:content='使用' additional_kwargs={} response_metadata={} id='afe17f90-ae6d-4d5b-aa8c-542fd9a04723'
2025-10-07 17:06:34,353 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-07 17:07:25,923 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 17:07:59,040 - __main__ - INFO - Agent processing user query
2025-10-07 17:07:59,042 - __main__ - INFO - agent question:content='使用retrieve工具告诉我COSCO的优势线' additional_kwargs={} response_metadata={} id='d08904a9-0771-41ba-aa87-06331b8c5068'
2025-10-07 17:08:00,374 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-07 17:08:02,835 - __main__ - INFO - Calling tool: retrieve
2025-10-07 17:08:03,466 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-07 17:08:03,470 - __main__ - INFO - Grading documents for relevance
2025-10-07 17:08:03,470 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-07 17:08:05,678 - __main__ - INFO - Document relevance score: yes
2025-10-07 17:08:05,679 - __main__ - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-10-07 17:08:05,679 - __main__ - INFO - Documents are relevant, proceeding to generate
2025-10-07 17:08:05,684 - __main__ - INFO - Generating final response
2025-10-07 17:08:05,684 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-10-07 17:08:25,924 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-07 17:08:49,000 - __main__ - INFO - Database connection pool closed
2025-10-09 15:59:26,159 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-09 15:59:26,171 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-09 15:59:26,171 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-09 15:59:26,172 - __main__ - INFO - Database connection pool initialized
2025-10-09 15:59:26,174 - __main__ - DEBUG - Database connection pool initialized
2025-10-09 15:59:26,175 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 15:59:26,255 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-09 16:00:26,177 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:00:28,244 - __main__ - INFO - Agent processing user query
2025-10-09 16:00:28,245 - __main__ - INFO - agent question:content='使用retrieval tool介绍欧洲航线' additional_kwargs={} response_metadata={} id='0191b391-e68b-4156-a7dc-d55cce96cc1e'
2025-10-09 16:00:29,109 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-09 16:00:35,806 - __main__ - INFO - Calling tool: retrieve
2025-10-09 16:00:36,598 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-09 16:00:36,602 - __main__ - INFO - Grading documents for relevance
2025-10-09 16:00:36,602 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-09 16:00:38,997 - __main__ - INFO - Document relevance score: yes
2025-10-09 16:00:38,998 - __main__ - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-10-09 16:00:38,999 - __main__ - INFO - Documents are relevant, proceeding to generate
2025-10-09 16:00:39,004 - __main__ - INFO - Generating final response
2025-10-09 16:00:39,007 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-09 16:01:26,178 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:02:26,179 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:03:26,180 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:04:26,182 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:05:26,184 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:06:26,186 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:07:26,187 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:08:26,189 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:09:26,191 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:10:26,193 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:11:26,194 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:12:26,195 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:13:26,197 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:14:26,200 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:15:26,201 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:16:26,203 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:17:26,204 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:18:26,206 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:19:26,208 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:20:26,210 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:21:26,211 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:22:26,212 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:23:26,214 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:24:26,215 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:25:26,217 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:26:26,219 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:27:26,221 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:28:26,224 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:29:26,225 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:30:26,227 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:31:26,229 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:32:26,231 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:33:26,233 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:34:26,235 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:35:26,238 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:36:26,242 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:37:26,244 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:38:26,246 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:39:26,248 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:40:26,250 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:41:26,253 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:42:26,254 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:43:26,258 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:44:26,259 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:45:26,261 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:46:26,264 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:47:26,266 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:48:26,268 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:49:26,271 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:50:26,272 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:51:26,274 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:52:26,275 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:53:26,278 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:54:26,280 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:55:26,282 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:56:26,284 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:57:26,286 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:58:26,289 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 16:59:26,291 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:00:26,293 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:01:26,295 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:02:26,297 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:03:26,299 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:04:26,301 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:05:26,303 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:06:26,305 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:07:26,307 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:08:26,311 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:09:26,313 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:10:26,316 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:11:26,318 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:12:26,321 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:13:26,322 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:14:26,324 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:15:26,327 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:16:26,329 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:17:26,332 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:18:26,334 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:19:26,336 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:20:26,340 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:21:26,343 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:22:26,345 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:23:26,348 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:24:26,351 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:25:26,354 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:26:26,359 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:27:26,361 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:28:26,365 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:29:26,367 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:30:26,370 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:31:26,373 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:32:26,374 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:33:26,378 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:34:26,380 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:35:26,382 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:36:26,384 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:37:26,387 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-09 17:37:50,224 - __main__ - INFO - Database connection pool closed
2025-10-10 23:04:15,536 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-10 23:04:15,550 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-10 23:04:15,551 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-10 23:04:15,552 - __main__ - INFO - Database connection pool initialized
2025-10-10 23:04:15,555 - __main__ - DEBUG - Database connection pool initialized
2025-10-10 23:04:15,555 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-10 23:04:15,663 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-10 23:05:15,557 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-10 23:05:37,507 - __main__ - INFO - Agent processing user query
2025-10-10 23:05:37,508 - __main__ - INFO - agent question:content='使用' additional_kwargs={} response_metadata={} id='bb46e8c7-d6d2-4b2d-a089-84888bb8860b'
2025-10-10 23:05:38,801 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-10 23:05:47,902 - __main__ - INFO - Agent processing user query
2025-10-10 23:05:47,903 - __main__ - INFO - agent question:content='使用' additional_kwargs={} response_metadata={} id='ee6bd3bf-f8b1-4b35-832f-315225fdb366'
2025-10-10 23:05:50,623 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-10 23:06:15,558 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-10 23:06:28,947 - __main__ - INFO - Agent processing user query
2025-10-10 23:06:28,948 - __main__ - INFO - agent question:content='使用retrieval tool告诉我欧洲航线的情况' additional_kwargs={} response_metadata={} id='9e495bbe-4cb5-44e9-9ad1-99b3ee2d77f4'
2025-10-10 23:06:30,036 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-10 23:06:32,974 - __main__ - INFO - Calling tool: retrieve
2025-10-10 23:06:33,516 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-10 23:06:33,519 - __main__ - INFO - Grading documents for relevance
2025-10-10 23:06:33,519 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-10 23:06:36,142 - __main__ - INFO - Document relevance score: yes
2025-10-10 23:06:36,143 - __main__ - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-10-10 23:06:36,144 - __main__ - INFO - Documents are relevant, proceeding to generate
2025-10-10 23:06:36,150 - __main__ - INFO - Generating final response
2025-10-10 23:06:36,150 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-10 23:07:15,559 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-10 23:08:15,560 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-10 23:09:15,562 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-10 23:10:15,563 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-10 23:10:46,516 - __main__ - INFO - Database connection pool closed
2025-10-19 22:08:16,469 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-19 22:08:16,485 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-19 22:08:16,486 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-19 22:08:16,487 - __main__ - INFO - Database connection pool initialized
2025-10-19 22:08:16,490 - __main__ - DEBUG - Database connection pool initialized
2025-10-19 22:08:16,492 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:08:16,610 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-19 22:08:44,413 - __main__ - INFO - Agent processing user query
2025-10-19 22:08:44,414 - __main__ - INFO - agent question:content='海丰、SITC的优势航线？' additional_kwargs={} response_metadata={} id='67ac783a-638d-45fc-b645-e63519f72fe8'
2025-10-19 22:08:45,298 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-19 22:08:47,301 - __main__ - INFO - Calling tool: retrieve
2025-10-19 22:08:47,786 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-19 22:08:47,788 - __main__ - INFO - Grading documents for relevance
2025-10-19 22:08:47,789 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-19 22:08:49,311 - __main__ - INFO - Document relevance score: yes
2025-10-19 22:08:49,312 - __main__ - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-10-19 22:08:49,313 - __main__ - INFO - Documents are relevant, proceeding to generate
2025-10-19 22:08:49,317 - __main__ - INFO - Generating final response
2025-10-19 22:08:49,318 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-19 22:09:16,494 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:10:07,244 - __main__ - INFO - Database connection pool closed
2025-10-19 22:24:14,351 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-19 22:24:26,486 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-19 22:27:52,903 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-19 22:28:23,670 - __main__ - INFO - Database connection pool initialized
2025-10-19 22:28:26,219 - __main__ - DEBUG - Database connection pool initialized
2025-10-19 22:28:30,346 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:29:02,388 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-19 22:29:30,348 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:30:30,350 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:31:30,351 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:32:30,353 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:33:30,354 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:34:30,356 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:35:30,358 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:36:30,360 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:37:30,362 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:38:30,363 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:39:30,365 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:40:30,367 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:41:30,368 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:42:30,371 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:43:30,373 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:44:30,374 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:45:17,526 - __main__ - INFO - Database connection pool closed
2025-10-19 22:48:20,416 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-19 22:48:24,450 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-19 22:48:26,681 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-19 22:48:26,684 - __main__ - INFO - Database connection pool initialized
2025-10-19 22:48:26,686 - __main__ - DEBUG - Database connection pool initialized
2025-10-19 22:48:26,688 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:48:35,795 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-19 22:48:41,152 - __main__ - INFO - Database connection pool closed
2025-10-19 22:49:45,914 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-19 22:49:50,869 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-19 22:49:50,871 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-19 22:49:50,874 - __main__ - INFO - Database connection pool initialized
2025-10-19 22:49:50,876 - __main__ - DEBUG - Database connection pool initialized
2025-10-19 22:49:50,877 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:49:50,943 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-19 22:50:50,881 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:51:50,883 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:52:50,887 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:53:50,890 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 22:54:50,891 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 23:12:46,498 - __main__ - INFO - Start the server on port 8012
2025-10-19 23:12:47,195 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-19 23:12:47,195 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-19 23:12:47,195 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-19 23:12:47,197 - __main__ - INFO - Database connection pool initialized
2025-10-19 23:12:47,198 - __main__ - DEBUG - Database connection pool initialized
2025-10-19 23:12:47,199 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 23:12:47,251 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-19 23:12:55,868 - __main__ - ERROR - Unexpected error: Failed to reach https://mermaid.ink/ API while trying to render your graph after 1 retries. To resolve this issue:
1. Check your internet connection and try again
2. Try with higher retry settings: `draw_mermaid_png(..., max_retries=5, retry_delay=2.0)`
3. Use the Pyppeteer rendering method which will render your graph locally in a browser: `draw_mermaid_png(..., draw_method=MermaidDrawMethod.PYPPETEER)`
2025-10-19 23:13:10,876 - __main__ - INFO - Start the server on port 8012
2025-10-19 23:13:11,424 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-19 23:13:11,426 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-19 23:13:11,426 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-19 23:13:11,428 - __main__ - INFO - Database connection pool initialized
2025-10-19 23:13:11,430 - __main__ - DEBUG - Database connection pool initialized
2025-10-19 23:13:11,431 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-19 23:13:11,508 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-19 23:13:13,607 - __main__ - ERROR - Unexpected error: Failed to reach https://mermaid.ink/ API while trying to render your graph after 1 retries. To resolve this issue:
1. Check your internet connection and try again
2. Try with higher retry settings: `draw_mermaid_png(..., max_retries=5, retry_delay=2.0)`
3. Use the Pyppeteer rendering method which will render your graph locally in a browser: `draw_mermaid_png(..., draw_method=MermaidDrawMethod.PYPPETEER)`
2025-10-20 10:38:31,819 - __main__ - INFO - Start the server on port 8012
2025-10-20 10:38:32,581 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 10:38:32,581 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 10:38:32,582 - ragAgent - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 10:38:32,583 - __main__ - INFO - Database connection pool initialized
2025-10-20 10:38:32,585 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 10:38:32,586 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:38:32,678 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 10:38:33,906 - ragAgent - INFO - Graph visualization saved as graph.png
2025-10-20 10:39:32,588 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:40:32,589 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:41:32,590 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:42:32,592 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:43:32,593 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:44:32,594 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:45:32,595 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:46:32,596 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:47:32,598 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:48:32,599 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:49:32,600 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:50:32,602 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:51:32,604 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:52:32,606 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:53:32,608 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:54:32,609 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:55:32,610 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:56:32,612 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:57:32,615 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:58:32,616 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 10:59:32,617 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:00:32,619 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:01:32,621 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:02:32,622 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:03:32,623 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:04:32,625 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:05:32,626 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:06:32,628 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:07:32,629 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:08:32,632 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:09:32,634 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:10:32,635 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:11:32,637 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:12:32,638 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:13:32,640 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:13:52,364 - __main__ - INFO - Database connection pool closed
2025-10-20 11:13:52,366 - __main__ - INFO - The service has been shut down
2025-10-20 11:23:11,531 - __main__ - INFO - Start the server on port 8012
2025-10-20 11:23:12,553 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 11:23:12,553 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 11:23:12,553 - ragAgent - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 11:23:12,553 - __main__ - INFO - Database connection pool initialized
2025-10-20 11:23:12,557 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 11:23:12,558 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:23:12,656 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 11:23:13,257 - ragAgent - INFO - Graph visualization saved as graph.png
2025-10-20 11:24:12,560 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:25:12,562 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:26:12,563 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:27:12,565 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:28:12,568 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:29:12,570 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:30:12,572 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:31:12,574 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:32:12,575 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:33:12,576 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:34:12,577 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:35:12,579 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:36:12,580 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:37:12,581 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:38:12,583 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:39:12,584 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:40:12,586 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:41:12,587 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:42:12,589 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:43:12,591 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:44:12,593 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:45:10,183 - __main__ - INFO - The user's user_input is: 你好
2025-10-20 11:45:10,212 - ragAgent - INFO - Agent processing user query
2025-10-20 11:45:10,213 - ragAgent - INFO - agent question:content='你好' additional_kwargs={} response_metadata={} id='5e08305d-7d7f-4f49-b385-977af17d46b8'
2025-10-20 11:45:10,217 - ragAgent - ERROR - Error in store_memory: sequence item 1: expected str instance, NoneType found
2025-10-20 11:45:10,252 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 11:45:11,224 - __main__ - INFO - Streaming chunk from agent: 你好
2025-10-20 11:45:11,251 - __main__ - INFO - Streaming chunk from agent: ！
2025-10-20 11:45:11,287 - __main__ - INFO - Streaming chunk from agent: 很高兴
2025-10-20 11:45:11,312 - __main__ - INFO - Streaming chunk from agent: 为您提供
2025-10-20 11:45:11,337 - __main__ - INFO - Streaming chunk from agent: 货
2025-10-20 11:45:11,367 - __main__ - INFO - Streaming chunk from agent: 代
2025-10-20 11:45:11,391 - __main__ - INFO - Streaming chunk from agent: 咨询服务
2025-10-20 11:45:11,464 - __main__ - INFO - Streaming chunk from agent: 。
2025-10-20 11:45:11,469 - __main__ - INFO - Streaming chunk from agent: 请问
2025-10-20 11:45:11,487 - __main__ - INFO - Streaming chunk from agent: 您
2025-10-20 11:45:11,510 - __main__ - INFO - Streaming chunk from agent: 有什么
2025-10-20 11:45:11,542 - __main__ - INFO - Streaming chunk from agent: 问题
2025-10-20 11:45:11,560 - __main__ - INFO - Streaming chunk from agent: 需要
2025-10-20 11:45:11,599 - __main__ - INFO - Streaming chunk from agent: 解答
2025-10-20 11:45:11,651 - __main__ - INFO - Streaming chunk from agent: 呢
2025-10-20 11:45:11,658 - __main__ - INFO - Streaming chunk from agent: ？
2025-10-20 11:45:11,709 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:45:12,594 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:46:12,595 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:46:35,143 - __main__ - INFO - The user's user_input is: 行业航线设置其优势一般表现在？
2025-10-20 11:46:35,154 - ragAgent - INFO - Agent processing user query
2025-10-20 11:46:35,156 - ragAgent - INFO - agent question:content='行业航线设置其优势一般表现在？' additional_kwargs={} response_metadata={} id='b32b45ed-2d7e-4ad7-9742-11bfc5cfed8e'
2025-10-20 11:46:35,157 - ragAgent - ERROR - Error in store_memory: sequence item 1: expected str instance, NoneType found
2025-10-20 11:46:35,163 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 11:46:36,422 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,445 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,493 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,504 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,525 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,597 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,597 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,630 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,637 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,686 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,710 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,741 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,842 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,843 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,844 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:46:36,870 - ragAgent - ERROR - Error in agent processing: An internal error has occured, please try again later or contact service support.
2025-10-20 11:47:12,597 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:48:12,599 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:49:12,602 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:50:12,603 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:51:04,198 - __main__ - INFO - The user's user_input is: 你好
2025-10-20 11:51:04,208 - ragAgent - INFO - Agent processing user query
2025-10-20 11:51:04,210 - ragAgent - INFO - agent question:content='你好' additional_kwargs={} response_metadata={} id='1346dd66-e367-4d81-8664-9fb1b5a5a3a4'
2025-10-20 11:51:04,211 - ragAgent - ERROR - Error in store_memory: sequence item 1: expected str instance, NoneType found
2025-10-20 11:51:04,219 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 11:51:05,142 - __main__ - INFO - Streaming chunk from agent: 你好
2025-10-20 11:51:05,172 - __main__ - INFO - Streaming chunk from agent: ！
2025-10-20 11:51:05,207 - __main__ - INFO - Streaming chunk from agent: 很高兴
2025-10-20 11:51:05,225 - __main__ - INFO - Streaming chunk from agent: 为您提供
2025-10-20 11:51:05,277 - __main__ - INFO - Streaming chunk from agent: 货
2025-10-20 11:51:05,305 - __main__ - INFO - Streaming chunk from agent: 代
2025-10-20 11:51:05,334 - __main__ - INFO - Streaming chunk from agent: 咨询服务
2025-10-20 11:51:05,358 - __main__ - INFO - Streaming chunk from agent: 。
2025-10-20 11:51:05,363 - __main__ - INFO - Streaming chunk from agent: 请问
2025-10-20 11:51:05,408 - __main__ - INFO - Streaming chunk from agent: 您
2025-10-20 11:51:05,430 - __main__ - INFO - Streaming chunk from agent: 有什么
2025-10-20 11:51:05,456 - __main__ - INFO - Streaming chunk from agent: 问题
2025-10-20 11:51:05,478 - __main__ - INFO - Streaming chunk from agent: 需要
2025-10-20 11:51:05,501 - __main__ - INFO - Streaming chunk from agent: 解答
2025-10-20 11:51:05,533 - __main__ - INFO - Streaming chunk from agent: 呢
2025-10-20 11:51:05,584 - __main__ - INFO - Streaming chunk from agent: ？
2025-10-20 11:51:05,633 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:51:11,400 - __main__ - INFO - The user's user_input is: 你是谁
2025-10-20 11:51:11,411 - ragAgent - INFO - Agent processing user query
2025-10-20 11:51:11,412 - ragAgent - INFO - agent question:content='你是谁' additional_kwargs={} response_metadata={} id='0402c578-c838-4d24-b647-829a8e686adf'
2025-10-20 11:51:11,414 - ragAgent - ERROR - Error in store_memory: sequence item 1: expected str instance, NoneType found
2025-10-20 11:51:11,423 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 11:51:12,455 - __main__ - INFO - Streaming chunk from agent: 我是
2025-10-20 11:51:12,497 - __main__ - INFO - Streaming chunk from agent: 您的
2025-10-20 11:51:12,513 - __main__ - INFO - Streaming chunk from agent: 货
2025-10-20 11:51:12,539 - __main__ - INFO - Streaming chunk from agent: 代
2025-10-20 11:51:12,556 - __main__ - INFO - Streaming chunk from agent: 咨询
2025-10-20 11:51:12,597 - __main__ - INFO - Streaming chunk from agent: 助手
2025-10-20 11:51:12,604 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:51:12,633 - __main__ - INFO - Streaming chunk from agent: ，
2025-10-20 11:51:12,655 - __main__ - INFO - Streaming chunk from agent: 专门
2025-10-20 11:51:12,700 - __main__ - INFO - Streaming chunk from agent: 为您提供
2025-10-20 11:51:12,732 - __main__ - INFO - Streaming chunk from agent: 货
2025-10-20 11:51:12,732 - __main__ - INFO - Streaming chunk from agent: 代
2025-10-20 11:51:12,803 - __main__ - INFO - Streaming chunk from agent: 相关的
2025-10-20 11:51:12,805 - __main__ - INFO - Streaming chunk from agent: 咨询服务
2025-10-20 11:51:12,810 - __main__ - INFO - Streaming chunk from agent: 。
2025-10-20 11:51:12,834 - __main__ - INFO - Streaming chunk from agent: 如果您
2025-10-20 11:51:12,883 - __main__ - INFO - Streaming chunk from agent: 有任何
2025-10-20 11:51:12,890 - __main__ - INFO - Streaming chunk from agent: 关于
2025-10-20 11:51:12,927 - __main__ - INFO - Streaming chunk from agent: 货
2025-10-20 11:51:12,943 - __main__ - INFO - Streaming chunk from agent: 代
2025-10-20 11:51:12,985 - __main__ - INFO - Streaming chunk from agent: 的问题
2025-10-20 11:51:13,016 - __main__ - INFO - Streaming chunk from agent: ，
2025-10-20 11:51:13,026 - __main__ - INFO - Streaming chunk from agent: 欢迎
2025-10-20 11:51:13,059 - __main__ - INFO - Streaming chunk from agent: 随时
2025-10-20 11:51:13,133 - __main__ - INFO - Streaming chunk from agent: 向
2025-10-20 11:51:13,135 - __main__ - INFO - Streaming chunk from agent: 我
2025-10-20 11:51:13,159 - __main__ - INFO - Streaming chunk from agent: 提问
2025-10-20 11:51:13,170 - __main__ - INFO - Streaming chunk from agent: ！
2025-10-20 11:51:13,212 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 11:52:12,608 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:53:12,610 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:54:12,614 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:55:12,616 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:56:12,619 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:57:12,621 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:57:15,950 - __main__ - INFO - Database connection pool closed
2025-10-20 11:57:15,952 - __main__ - INFO - The service has been shut down
2025-10-20 11:57:22,697 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 11:57:22,707 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 11:57:22,708 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 11:57:22,709 - __main__ - INFO - Database connection pool initialized
2025-10-20 11:57:22,710 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 11:57:22,711 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:57:22,777 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 11:57:33,169 - __main__ - INFO - Agent processing user query
2025-10-20 11:57:33,170 - __main__ - INFO - agent question:content='你好？' additional_kwargs={} response_metadata={} id='b71fe304-f1a7-43f2-890f-0a8791e3efee'
2025-10-20 11:57:34,036 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 11:57:48,674 - __main__ - INFO - Agent processing user query
2025-10-20 11:57:48,674 - __main__ - INFO - agent question:content='行业航线设置其优势一般表现在？' additional_kwargs={} response_metadata={} id='58038d85-6927-42ba-98e1-d77c8eb31ef6'
2025-10-20 11:57:49,454 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 11:57:51,453 - __main__ - INFO - Calling tool: retrieve
2025-10-20 11:57:51,773 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 11:57:51,782 - __main__ - INFO - Grading documents for relevance
2025-10-20 11:57:51,788 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-20 11:57:52,676 - __main__ - INFO - Document relevance score: no
2025-10-20 11:57:52,677 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 0
2025-10-20 11:57:52,677 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 11:57:52,678 - __main__ - INFO - Rewriting query
2025-10-20 11:57:52,679 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-10-20 11:57:53,639 - __main__ - INFO - Rewrite count: 1
2025-10-20 11:57:53,641 - __main__ - INFO - Agent processing user query
2025-10-20 11:57:53,641 - __main__ - INFO - agent question:content='行业航线设置的主要优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 11, 'prompt_tokens': 67, 'total_tokens': 78, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 11}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 67}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--8aa619f7-5203-4a31-8873-116ac29ccb57-0' usage_metadata={'input_tokens': 67, 'output_tokens': 11, 'total_tokens': 78, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 11:57:53,964 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 11:57:55,461 - __main__ - INFO - Calling tool: retrieve
2025-10-20 11:57:55,773 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 11:57:55,774 - __main__ - INFO - Grading documents for relevance
2025-10-20 11:57:55,775 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 11:57:57,005 - __main__ - INFO - Document relevance score: no
2025-10-20 11:57:57,006 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 1
2025-10-20 11:57:57,006 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 11:57:57,007 - __main__ - INFO - Rewriting query
2025-10-20 11:57:57,008 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 11:57:58,140 - __main__ - INFO - Rewrite count: 2
2025-10-20 11:57:58,141 - __main__ - INFO - Agent processing user query
2025-10-20 11:57:58,141 - __main__ - INFO - agent question:content='行业航线设置的主要优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 11, 'prompt_tokens': 67, 'total_tokens': 78, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 11}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 67}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--425b9979-583a-4a33-a291-78fea4c66f46-0' usage_metadata={'input_tokens': 67, 'output_tokens': 11, 'total_tokens': 78, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 11:57:58,467 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 11:58:06,731 - __main__ - INFO - Calling tool: retrieve
2025-10-20 11:58:07,411 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 11:58:07,413 - __main__ - INFO - Grading documents for relevance
2025-10-20 11:58:07,414 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 11:58:08,273 - __main__ - INFO - Document relevance score: no
2025-10-20 11:58:08,274 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 2
2025-10-20 11:58:08,274 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 11:58:08,275 - __main__ - INFO - Rewriting query
2025-10-20 11:58:08,276 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 11:58:09,325 - __main__ - INFO - Rewrite count: 3
2025-10-20 11:58:09,326 - __main__ - INFO - Agent processing user query
2025-10-20 11:58:09,328 - __main__ - INFO - agent question:content='行业航线设置的主要优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 11, 'prompt_tokens': 67, 'total_tokens': 78, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 11}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 67}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--c1e268b3-ba75-4d38-becd-6620d831d4bd-0' usage_metadata={'input_tokens': 67, 'output_tokens': 11, 'total_tokens': 78, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 11:58:09,621 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 11:58:12,083 - __main__ - INFO - Calling tool: retrieve
2025-10-20 11:58:12,453 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 11:58:12,454 - __main__ - INFO - Grading documents for relevance
2025-10-20 11:58:12,456 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 11:58:13,496 - __main__ - INFO - Document relevance score: no
2025-10-20 11:58:13,498 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 3
2025-10-20 11:58:13,498 - __main__ - INFO - Max rewrite limit reached, proceeding to generate
2025-10-20 11:58:13,499 - __main__ - INFO - Generating final response
2025-10-20 11:58:13,500 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-20 11:58:22,713 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 11:59:22,715 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:00:22,720 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:01:22,724 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:02:22,727 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:03:22,729 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:03:42,394 - __main__ - INFO - Database connection pool closed
2025-10-20 12:42:44,740 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 12:42:44,741 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 12:42:44,742 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 12:42:44,743 - __main__ - INFO - Database connection pool initialized
2025-10-20 12:42:44,745 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 12:42:44,745 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:42:44,835 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 12:43:04,099 - __main__ - INFO - Agent processing user query
2025-10-20 12:43:04,101 - __main__ - INFO - agent question:content='按照行业航线设置其优势一般表现在?' additional_kwargs={} response_metadata={} id='51348e29-3057-4985-86fd-eb3e22bebb75'
2025-10-20 12:43:04,106 - __main__ - ERROR - Error in store_memory: 'tuple' object is not callable
2025-10-20 12:43:04,140 - __main__ - ERROR - Error in agent processing: 'tuple' object has no attribute 'bind_tools'
2025-10-20 12:43:04,148 - __main__ - INFO - Message has no content, skipping
2025-10-20 12:43:30,176 - __main__ - INFO - Agent processing user query
2025-10-20 12:43:30,177 - __main__ - INFO - agent question:content='照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='8127c6d7-207a-4d9e-95b5-3d6093bbad2f'
2025-10-20 12:43:30,178 - __main__ - ERROR - Error in store_memory: 'tuple' object is not callable
2025-10-20 12:43:30,179 - __main__ - ERROR - Error in agent processing: 'tuple' object has no attribute 'bind_tools'
2025-10-20 12:43:30,189 - __main__ - INFO - Message has no content, skipping
2025-10-20 12:43:44,747 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:44:09,822 - __main__ - INFO - Database connection pool closed
2025-10-20 12:45:32,771 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 12:45:32,772 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 12:45:32,772 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 12:45:32,773 - __main__ - INFO - Database connection pool initialized
2025-10-20 12:45:32,775 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 12:45:32,776 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:45:32,846 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 12:45:52,083 - __main__ - INFO - Agent processing user query
2025-10-20 12:45:52,084 - __main__ - INFO - agent question:content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='cca6f7f8-fe96-488c-831d-36d6f62bc687'
2025-10-20 12:45:52,860 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 12:45:54,773 - __main__ - INFO - Calling tool: retrieve
2025-10-20 12:45:55,156 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 12:45:55,159 - __main__ - INFO - Grading documents for relevance
2025-10-20 12:45:55,160 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-20 12:45:56,460 - __main__ - INFO - Document relevance score: no
2025-10-20 12:45:56,461 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 0
2025-10-20 12:45:56,461 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 12:45:56,462 - __main__ - INFO - Rewriting query
2025-10-20 12:45:56,463 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-10-20 12:45:57,279 - __main__ - INFO - Rewrite count: 1
2025-10-20 12:45:57,280 - __main__ - INFO - Agent processing user query
2025-10-20 12:45:57,281 - __main__ - INFO - agent question:content='在特定行业中，航线设置的优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 13, 'prompt_tokens': 70, 'total_tokens': 83, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 13}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 70}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--43e33a3d-f670-431b-a89c-550913e4fc64-0' usage_metadata={'input_tokens': 70, 'output_tokens': 13, 'total_tokens': 83, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 12:45:57,620 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 12:45:59,483 - __main__ - INFO - Calling tool: retrieve
2025-10-20 12:45:59,804 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 12:45:59,810 - __main__ - INFO - Grading documents for relevance
2025-10-20 12:45:59,810 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 12:46:01,618 - __main__ - INFO - Document relevance score: no
2025-10-20 12:46:01,619 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 1
2025-10-20 12:46:01,620 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 12:46:01,622 - __main__ - INFO - Rewriting query
2025-10-20 12:46:01,623 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 12:46:02,466 - __main__ - INFO - Rewrite count: 2
2025-10-20 12:46:02,467 - __main__ - INFO - Agent processing user query
2025-10-20 12:46:02,467 - __main__ - INFO - agent question:content='在特定行业中，航线设置的优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 13, 'prompt_tokens': 70, 'total_tokens': 83, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 13}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 70}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--e7e90730-346c-4fbb-a355-b4d1c558d865-0' usage_metadata={'input_tokens': 70, 'output_tokens': 13, 'total_tokens': 83, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 12:46:02,777 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 12:46:04,580 - __main__ - INFO - Calling tool: retrieve
2025-10-20 12:46:04,907 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 12:46:04,913 - __main__ - INFO - Grading documents for relevance
2025-10-20 12:46:04,913 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 12:46:06,496 - __main__ - INFO - Document relevance score: no
2025-10-20 12:46:06,497 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 2
2025-10-20 12:46:06,497 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 12:46:06,500 - __main__ - INFO - Rewriting query
2025-10-20 12:46:06,500 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 12:46:07,286 - __main__ - INFO - Rewrite count: 3
2025-10-20 12:46:07,287 - __main__ - INFO - Agent processing user query
2025-10-20 12:46:07,288 - __main__ - INFO - agent question:content='在特定行业中，航线设置的优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 13, 'prompt_tokens': 70, 'total_tokens': 83, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 13}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 70}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--74c8ca5f-fc60-4257-a780-4722f43584f8-0' usage_metadata={'input_tokens': 70, 'output_tokens': 13, 'total_tokens': 83, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 12:46:07,597 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 12:46:09,197 - __main__ - INFO - Calling tool: retrieve
2025-10-20 12:46:09,512 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 12:46:09,517 - __main__ - INFO - Grading documents for relevance
2025-10-20 12:46:09,517 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 12:46:10,988 - __main__ - INFO - Document relevance score: no
2025-10-20 12:46:10,990 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 3
2025-10-20 12:46:10,990 - __main__ - INFO - Max rewrite limit reached, proceeding to generate
2025-10-20 12:46:11,000 - __main__ - INFO - Generating final response
2025-10-20 12:46:11,000 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-20 12:46:32,778 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:47:32,779 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:48:21,818 - __main__ - INFO - Database connection pool closed
2025-10-20 12:48:26,108 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 12:48:26,109 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 12:48:26,110 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 12:48:26,111 - __main__ - INFO - Database connection pool initialized
2025-10-20 12:48:26,112 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 12:48:26,113 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:48:26,162 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 12:48:39,417 - __main__ - INFO - Agent processing user query
2025-10-20 12:48:39,419 - __main__ - INFO - agent question:content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='864dc89b-3bb2-408a-904a-bd5de004a68d'
2025-10-20 12:48:39,419 - __main__ - ERROR - Error in store_memory: 'tuple' object is not callable
2025-10-20 12:48:39,422 - __main__ - ERROR - Error in agent processing: 'tuple' object has no attribute 'bind_tools'
2025-10-20 12:48:39,431 - __main__ - INFO - Message has no content, skipping
2025-10-20 12:49:26,114 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:50:26,115 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:51:26,117 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:52:26,118 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:53:26,119 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:54:26,121 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:55:26,122 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:56:26,123 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:57:26,125 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:58:26,127 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 12:59:26,128 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 13:00:26,129 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:25:33,687 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:26:33,700 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:27:10,562 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 15:27:10,572 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 15:27:10,572 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 15:27:10,574 - __main__ - INFO - Database connection pool initialized
2025-10-20 15:27:10,575 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 15:27:10,576 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:27:10,639 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 15:27:19,947 - __main__ - INFO - Agent processing user query
2025-10-20 15:27:19,949 - __main__ - INFO - agent question:content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='cb237689-d175-40f3-851a-061229ca40f9'
2025-10-20 15:27:21,991 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 15:27:22,045 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 15:28:10,578 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:28:58,972 - __main__ - INFO - Database connection pool closed
2025-10-20 15:29:02,988 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 15:29:02,989 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 15:29:02,990 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 15:29:02,991 - __main__ - INFO - Database connection pool initialized
2025-10-20 15:29:02,992 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 15:29:02,993 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:29:03,067 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 15:29:09,428 - __main__ - INFO - Agent processing user query
2025-10-20 15:29:09,429 - __main__ - INFO - agent question:content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='305357a6-878d-4b26-bb1a-98befdcc00d1'
2025-10-20 15:29:11,334 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 15:29:11,342 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 15:30:02,994 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:31:02,995 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:31:51,349 - __main__ - INFO - Agent processing user query
2025-10-20 15:31:51,350 - __main__ - INFO - agent question:content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='462aba3a-fef5-4057-a786-0d6710defb11'
2025-10-20 15:31:53,236 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 15:31:53,242 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 15:32:02,997 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:32:15,111 - __main__ - INFO - Agent processing user query
2025-10-20 15:32:15,113 - __main__ - INFO - agent question:content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='aff0f1f6-1f27-454d-af35-0cfa03d472ee'
2025-10-20 15:32:16,974 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 15:32:16,980 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 15:32:33,665 - __main__ - ERROR - Error in agent processing: Connection error.
2025-10-20 15:32:33,814 - __main__ - INFO - Message has no content, skipping
2025-10-20 15:32:41,314 - __main__ - INFO - Agent processing user query
2025-10-20 15:32:41,315 - __main__ - INFO - agent question:content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='6b31e37f-9c84-40be-9929-896a18236952'
2025-10-20 15:32:48,658 - __main__ - ERROR - Error in store_memory: Connection error.
2025-10-20 15:32:48,666 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 15:32:56,276 - __main__ - ERROR - Error in agent processing: Connection error.
2025-10-20 15:32:56,285 - __main__ - INFO - Message has no content, skipping
2025-10-20 15:33:02,998 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:33:20,725 - __main__ - INFO - Agent processing user query
2025-10-20 15:33:20,726 - __main__ - INFO - agent question:content='COSCO的优势航线？' additional_kwargs={} response_metadata={} id='33b6250d-870f-47ac-84ce-baafc0a31fda'
2025-10-20 15:33:28,330 - __main__ - ERROR - Error in store_memory: Connection error.
2025-10-20 15:33:28,337 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 15:33:35,934 - __main__ - ERROR - Error in agent processing: Connection error.
2025-10-20 15:33:35,942 - __main__ - INFO - Message has no content, skipping
2025-10-20 15:34:02,999 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:35:03,001 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:36:03,002 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:37:03,004 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:38:03,005 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:39:03,007 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:40:03,009 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:41:03,009 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:42:03,011 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:43:03,012 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:44:03,014 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:45:03,015 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:46:03,017 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:47:03,018 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:48:03,020 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:49:03,021 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:49:25,396 - __main__ - INFO - Database connection pool closed
2025-10-20 15:50:56,842 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 15:50:56,843 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 15:50:56,844 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 15:50:56,845 - __main__ - INFO - Database connection pool initialized
2025-10-20 15:50:56,846 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 15:50:56,847 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:50:56,922 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 15:51:32,628 - __main__ - INFO - Database connection pool closed
2025-10-20 15:51:40,338 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 15:51:40,339 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 15:51:40,340 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 15:51:40,341 - __main__ - INFO - Database connection pool initialized
2025-10-20 15:51:40,342 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 15:51:40,343 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:51:40,411 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 15:51:43,067 - __main__ - INFO - Agent processing user query
2025-10-20 15:51:43,068 - __main__ - INFO - agent question:content='COSCO 的优势航线' additional_kwargs={} response_metadata={} id='707d9f51-f841-44f6-9522-350885380244'
2025-10-20 15:51:50,595 - __main__ - ERROR - Error in store_memory: Connection error.
2025-10-20 15:51:50,613 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 15:51:57,875 - __main__ - ERROR - Error in agent processing: Connection error.
2025-10-20 15:51:57,893 - __main__ - INFO - Message has no content, skipping
2025-10-20 15:52:40,345 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:53:40,347 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:53:51,807 - __main__ - INFO - Database connection pool closed
2025-10-20 15:53:56,083 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 15:53:56,084 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 15:53:56,085 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 15:53:56,086 - __main__ - INFO - Database connection pool initialized
2025-10-20 15:53:56,087 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 15:53:56,090 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:53:56,151 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 15:54:19,573 - __main__ - INFO - Agent processing user query
2025-10-20 15:54:19,575 - __main__ - INFO - agent question:content="COSCO 的优势航线'" additional_kwargs={} response_metadata={} id='31230ae8-0857-44f9-92da-0624ad0c8766'
2025-10-20 15:54:27,055 - __main__ - ERROR - Error in store_memory: Connection error.
2025-10-20 15:54:27,065 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 15:54:34,581 - __main__ - ERROR - Error in agent processing: Connection error.
2025-10-20 15:54:34,597 - __main__ - INFO - Message has no content, skipping
2025-10-20 15:54:50,587 - __main__ - INFO - Agent processing user query
2025-10-20 15:54:50,587 - __main__ - INFO - agent question:content="COSCO 的优势航线'" additional_kwargs={} response_metadata={} id='3a638395-8324-4be7-9e3f-8570c4764c93'
2025-10-20 15:54:52,582 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 15:54:52,588 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 15:54:55,167 - __main__ - INFO - Calling tool: retrieve
2025-10-20 15:54:56,092 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:54:57,181 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 15:54:57,182 - __main__ - INFO - Grading documents for relevance
2025-10-20 15:54:57,192 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-20 15:54:58,240 - __main__ - INFO - Document relevance score: no
2025-10-20 15:54:58,242 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 0
2025-10-20 15:54:58,242 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 15:54:58,243 - __main__ - INFO - Rewriting query
2025-10-20 15:54:58,245 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-10-20 15:54:59,107 - __main__ - INFO - Rewrite count: 1
2025-10-20 15:54:59,108 - __main__ - INFO - Agent processing user query
2025-10-20 15:54:59,109 - __main__ - INFO - agent question:content='COSCO 在哪些航线上的运输服务最具竞争力和优势？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 15, 'prompt_tokens': 65, 'total_tokens': 80, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 15}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 65}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--4c38d669-51db-4bf2-ae35-2f9fb0966bb7-0' usage_metadata={'input_tokens': 65, 'output_tokens': 15, 'total_tokens': 80, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 15:55:01,233 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 15:55:01,240 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 15:55:02,803 - __main__ - INFO - Calling tool: retrieve
2025-10-20 15:55:04,899 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 15:55:04,900 - __main__ - INFO - Grading documents for relevance
2025-10-20 15:55:04,902 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 15:55:05,728 - __main__ - INFO - Document relevance score: no
2025-10-20 15:55:05,729 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 1
2025-10-20 15:55:05,730 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 15:55:05,731 - __main__ - INFO - Rewriting query
2025-10-20 15:55:05,733 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 15:55:07,835 - __main__ - INFO - Rewrite count: 2
2025-10-20 15:55:07,836 - __main__ - INFO - Agent processing user query
2025-10-20 15:55:07,837 - __main__ - INFO - agent question:content='COSCO 在哪些航线上的运输服务最具竞争力和优势？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 15, 'prompt_tokens': 65, 'total_tokens': 80, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 15}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 65}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--463c8135-1237-4fe8-89ca-79b67678ebe1-0' usage_metadata={'input_tokens': 65, 'output_tokens': 15, 'total_tokens': 80, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 15:55:09,720 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 15:55:09,726 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 15:55:11,284 - __main__ - INFO - Calling tool: retrieve
2025-10-20 15:55:13,287 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 15:55:13,289 - __main__ - INFO - Grading documents for relevance
2025-10-20 15:55:13,291 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 15:55:14,249 - __main__ - INFO - Document relevance score: no
2025-10-20 15:55:14,250 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 2
2025-10-20 15:55:14,251 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 15:55:14,253 - __main__ - INFO - Rewriting query
2025-10-20 15:55:14,254 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 15:55:15,140 - __main__ - INFO - Rewrite count: 3
2025-10-20 15:55:15,141 - __main__ - INFO - Agent processing user query
2025-10-20 15:55:15,143 - __main__ - INFO - agent question:content='COSCO 在哪些航线上的运输服务最具竞争力和优势？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 15, 'prompt_tokens': 65, 'total_tokens': 80, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 15}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 65}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--a18a82ff-a9f3-4bc7-838a-e580ea6aea78-0' usage_metadata={'input_tokens': 65, 'output_tokens': 15, 'total_tokens': 80, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 15:55:17,078 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 15:55:17,085 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 15:55:18,638 - __main__ - INFO - Calling tool: retrieve
2025-10-20 15:55:20,735 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 15:55:20,736 - __main__ - INFO - Grading documents for relevance
2025-10-20 15:55:20,737 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 15:55:21,655 - __main__ - INFO - Document relevance score: no
2025-10-20 15:55:21,656 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 3
2025-10-20 15:55:21,657 - __main__ - INFO - Max rewrite limit reached, proceeding to generate
2025-10-20 15:55:21,659 - __main__ - INFO - Generating final response
2025-10-20 15:55:21,659 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-20 15:55:25,738 - __main__ - INFO - Agent processing user query
2025-10-20 15:55:25,740 - __main__ - INFO - agent question:content="COSCO 的优势航线'" additional_kwargs={} response_metadata={} id='284e23c7-675d-4540-955b-9adc6671b06f'
2025-10-20 15:55:27,669 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 15:55:27,675 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 15:55:29,396 - __main__ - INFO - Calling tool: retrieve
2025-10-20 15:55:31,435 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 15:55:31,436 - __main__ - INFO - Grading documents for relevance
2025-10-20 15:55:31,439 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 15:55:32,350 - __main__ - INFO - Database connection pool closed
2025-10-20 15:55:36,321 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 15:55:36,322 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 15:55:36,323 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 15:55:36,324 - __main__ - INFO - Database connection pool initialized
2025-10-20 15:55:36,325 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 15:55:36,326 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:55:36,389 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 15:55:37,830 - __main__ - INFO - Agent processing user query
2025-10-20 15:55:37,831 - __main__ - INFO - agent question:content="COSCO 的优势航线'" additional_kwargs={} response_metadata={} id='38b8b2f1-0222-4353-95f1-f332cc40150e'
2025-10-20 15:55:39,876 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 15:55:39,884 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 15:55:41,617 - __main__ - INFO - Calling tool: retrieve
2025-10-20 15:55:43,528 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 15:55:43,529 - __main__ - INFO - Grading documents for relevance
2025-10-20 15:55:43,531 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-20 15:55:44,300 - __main__ - INFO - Document relevance score: no
2025-10-20 15:55:44,301 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 0
2025-10-20 15:55:44,302 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 15:55:44,303 - __main__ - INFO - Rewriting query
2025-10-20 15:55:44,304 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-10-20 15:55:45,202 - __main__ - INFO - Rewrite count: 1
2025-10-20 15:55:45,203 - __main__ - INFO - Agent processing user query
2025-10-20 15:55:45,204 - __main__ - INFO - agent question:content='COSCO 在哪些航线上的运输服务最具竞争力和优势？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 15, 'prompt_tokens': 65, 'total_tokens': 80, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 15}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 65}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--fcb9c3f5-961f-4d8b-9fea-d61ea51e1d33-0' usage_metadata={'input_tokens': 65, 'output_tokens': 15, 'total_tokens': 80, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 15:55:47,186 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 15:55:47,193 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 15:55:48,845 - __main__ - INFO - Calling tool: retrieve
2025-10-20 15:55:50,865 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 15:55:50,868 - __main__ - INFO - Grading documents for relevance
2025-10-20 15:55:50,870 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 15:55:51,822 - __main__ - INFO - Document relevance score: no
2025-10-20 15:55:51,823 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 1
2025-10-20 15:55:51,823 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 15:55:51,825 - __main__ - INFO - Rewriting query
2025-10-20 15:55:51,825 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 15:55:53,213 - __main__ - INFO - Rewrite count: 2
2025-10-20 15:55:53,214 - __main__ - INFO - Agent processing user query
2025-10-20 15:55:53,215 - __main__ - INFO - agent question:content='COSCO 在哪些航线上的运输服务最具竞争优势？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 13, 'prompt_tokens': 65, 'total_tokens': 78, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 13}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 65}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--12994725-62a1-4bfa-818c-f4220c376c91-0' usage_metadata={'input_tokens': 65, 'output_tokens': 13, 'total_tokens': 78, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 15:55:57,036 - __main__ - ERROR - Error in store_memory: Connection error.
2025-10-20 15:55:57,044 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 15:56:04,563 - __main__ - INFO - Database connection pool closed
2025-10-20 15:56:21,727 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 15:56:21,728 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 15:56:21,728 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 15:56:21,729 - __main__ - INFO - Database connection pool initialized
2025-10-20 15:56:21,730 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 15:56:21,731 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 15:56:21,789 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 15:56:25,176 - __main__ - INFO - Agent processing user query
2025-10-20 15:56:25,177 - __main__ - INFO - agent question:content="COSCO 的优势航线'" additional_kwargs={} response_metadata={} id='b002acf1-8937-4c6c-82b7-9ed2894397af'
2025-10-20 15:56:32,729 - __main__ - ERROR - Error in store_memory: Connection error.
2025-10-20 15:56:32,739 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 15:56:40,308 - __main__ - ERROR - Error in agent processing: Connection error.
2025-10-20 15:56:40,318 - __main__ - INFO - Message has no content, skipping
2025-10-20 15:57:01,528 - __main__ - INFO - Database connection pool closed
2025-10-20 16:02:24,999 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:02:25,009 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:02:25,010 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:02:25,010 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:02:25,013 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:02:25,014 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:02:25,103 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:02:42,104 - __main__ - INFO - Database connection pool closed
2025-10-20 16:03:14,413 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:03:14,414 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:03:14,415 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:03:14,416 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:03:14,417 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:03:14,418 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:03:14,489 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:03:52,110 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:03:52,110 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:03:52,111 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:03:52,112 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:03:52,113 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:03:52,114 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:03:52,182 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:04:01,245 - __main__ - INFO - Database connection pool closed
2025-10-20 16:04:10,359 - __main__ - INFO - Agent processing user query
2025-10-20 16:04:10,360 - __main__ - INFO - agent question:content='CSAV' additional_kwargs={} response_metadata={} id='0e33329c-411d-4d5e-ad87-b9ff7ee7e75c'
2025-10-20 16:04:14,422 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:04:17,718 - __main__ - ERROR - Error in store_memory: Connection error.
2025-10-20 16:04:17,836 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:04:25,194 - __main__ - ERROR - Error in agent processing: Connection error.
2025-10-20 16:04:25,261 - __main__ - INFO - Message has no content, skipping
2025-10-20 16:05:14,423 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:06:14,424 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:07:14,426 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:08:13,931 - __main__ - INFO - Database connection pool closed
2025-10-20 16:08:18,073 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:08:18,074 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:08:18,075 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:08:18,076 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:08:18,077 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:08:18,077 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:08:18,149 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:09:18,079 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:10:18,080 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:11:18,081 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:12:05,234 - __main__ - INFO - Database connection pool closed
2025-10-20 16:12:40,761 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:12:40,762 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:12:40,762 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:12:40,763 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:12:40,764 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:12:40,765 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:12:40,834 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:13:05,391 - __main__ - INFO - Agent processing user query
2025-10-20 16:13:05,391 - __main__ - INFO - agent question:content='HMM' additional_kwargs={} response_metadata={} id='3657dc9f-25ed-4f8a-8b5c-b5b7015bfc44'
2025-10-20 16:13:07,214 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 16:13:07,233 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:13:09,092 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:13:10,949 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:13:10,950 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:13:10,953 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-20 16:13:11,810 - __main__ - INFO - Document relevance score: no
2025-10-20 16:13:11,811 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 0
2025-10-20 16:13:11,811 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 16:13:11,813 - __main__ - INFO - Rewriting query
2025-10-20 16:13:11,813 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-10-20 16:13:12,797 - __main__ - INFO - Rewrite count: 1
2025-10-20 16:13:12,799 - __main__ - INFO - Agent processing user query
2025-10-20 16:13:12,800 - __main__ - INFO - agent question:content='你对隐马尔可夫模型（HMM）有什么具体的问题或需要了解的内容吗？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 22, 'prompt_tokens': 61, 'total_tokens': 83, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 22}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 61}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--92ce29b8-2321-45f1-a7a3-b8e5bebac0da-0' usage_metadata={'input_tokens': 61, 'output_tokens': 22, 'total_tokens': 83, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 16:13:14,673 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 16:13:14,679 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 16:13:40,766 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:13:57,894 - __main__ - INFO - Agent processing user query
2025-10-20 16:13:57,896 - __main__ - INFO - agent question:content='按照行业航线设置其优势一般表现在：' additional_kwargs={} response_metadata={} id='bbb4cbd4-adb5-48f0-b3ac-604c42aefcf5'
2025-10-20 16:13:59,855 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 16:13:59,861 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 16:14:01,556 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:14:03,738 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:14:03,739 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:14:03,742 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 16:14:04,693 - __main__ - INFO - Document relevance score: no
2025-10-20 16:14:04,694 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 0
2025-10-20 16:14:04,694 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 16:14:04,695 - __main__ - INFO - Rewriting query
2025-10-20 16:14:04,696 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 16:14:05,808 - __main__ - INFO - Rewrite count: 1
2025-10-20 16:14:05,810 - __main__ - INFO - Agent processing user query
2025-10-20 16:14:05,810 - __main__ - INFO - agent question:content='在特定行业中，航线设置的主要优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 14, 'prompt_tokens': 70, 'total_tokens': 84, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 14}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 70}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--aa46d4a6-2fdc-469a-a080-7f1298a97210-0' usage_metadata={'input_tokens': 70, 'output_tokens': 14, 'total_tokens': 84, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 16:14:07,573 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 16:14:07,578 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 16:14:09,176 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:14:11,144 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:14:11,146 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:14:11,146 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 16:14:12,039 - __main__ - INFO - Document relevance score: no
2025-10-20 16:14:12,041 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 1
2025-10-20 16:14:12,042 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 16:14:12,043 - __main__ - INFO - Rewriting query
2025-10-20 16:14:12,045 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 16:14:12,928 - __main__ - INFO - Rewrite count: 2
2025-10-20 16:14:12,930 - __main__ - INFO - Agent processing user query
2025-10-20 16:14:12,933 - __main__ - INFO - agent question:content='在特定行业中，航线设置的主要优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 14, 'prompt_tokens': 70, 'total_tokens': 84, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 14}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 70}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--457d850d-6885-4cdb-87bd-2694d6a9158c-0' usage_metadata={'input_tokens': 70, 'output_tokens': 14, 'total_tokens': 84, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 16:14:14,703 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 16:14:14,711 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 16:14:16,438 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:14:18,487 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:14:18,489 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:14:18,490 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 16:14:19,418 - __main__ - INFO - Document relevance score: no
2025-10-20 16:14:19,422 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 2
2025-10-20 16:14:19,423 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 16:14:19,425 - __main__ - INFO - Rewriting query
2025-10-20 16:14:19,428 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 16:14:20,230 - __main__ - INFO - Rewrite count: 3
2025-10-20 16:14:20,231 - __main__ - INFO - Agent processing user query
2025-10-20 16:14:20,232 - __main__ - INFO - agent question:content='在特定行业中，航线设置的主要优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 14, 'prompt_tokens': 70, 'total_tokens': 84, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 14}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 70}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--88ffa849-9a1f-42b5-ac77-1d386dd99b3e-0' usage_metadata={'input_tokens': 70, 'output_tokens': 14, 'total_tokens': 84, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 16:14:22,000 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 16:14:22,006 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 16:14:24,462 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:14:26,416 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:14:26,418 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:14:26,421 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 16:14:27,170 - __main__ - INFO - Document relevance score: no
2025-10-20 16:14:27,173 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 3
2025-10-20 16:14:27,173 - __main__ - INFO - Max rewrite limit reached, proceeding to generate
2025-10-20 16:14:27,175 - __main__ - INFO - Generating final response
2025-10-20 16:14:27,177 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-20 16:14:40,767 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:15:40,769 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:16:40,770 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:17:15,741 - __main__ - INFO - Database connection pool closed
2025-10-20 16:17:19,711 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:17:19,713 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:17:19,714 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:17:19,715 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:17:19,716 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:17:19,717 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:17:19,778 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:17:28,127 - __main__ - INFO - Agent processing user query
2025-10-20 16:17:28,128 - __main__ - INFO - agent question:content='按照行业航线设置其优势一般表现在：' additional_kwargs={} response_metadata={} id='bbfa9bda-fb15-461d-a352-5364ab46bba8'
2025-10-20 16:17:30,261 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 16:17:30,269 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:17:32,421 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:17:34,425 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:17:34,427 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:17:34,430 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-20 16:17:35,246 - __main__ - INFO - Document relevance score: no
2025-10-20 16:17:35,248 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 0
2025-10-20 16:17:35,248 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 16:17:35,249 - __main__ - INFO - Rewriting query
2025-10-20 16:17:35,250 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-10-20 16:17:36,073 - __main__ - INFO - Rewrite count: 1
2025-10-20 16:17:36,074 - __main__ - INFO - Agent processing user query
2025-10-20 16:17:36,077 - __main__ - INFO - agent question:content='在特定行业中，航线设置的主要优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 14, 'prompt_tokens': 70, 'total_tokens': 84, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 14}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 70}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--183b0ec3-7671-4a27-b5d0-968f8532bc7f-0' usage_metadata={'input_tokens': 70, 'output_tokens': 14, 'total_tokens': 84, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 16:17:36,275 - __main__ - INFO - Database connection pool closed
2025-10-20 16:17:53,272 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:17:53,273 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:17:53,274 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:17:53,275 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:17:53,276 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:17:53,277 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:17:53,342 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:17:54,917 - __main__ - INFO - Agent processing user query
2025-10-20 16:17:54,919 - __main__ - INFO - agent question:content='按照行业航线设置其优势一般表现在：' additional_kwargs={} response_metadata={} id='10ceb754-d0ae-430b-ae37-6b91d49c0fa8'
2025-10-20 16:17:57,049 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 16:17:57,056 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:17:59,311 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:18:01,323 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:18:01,324 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:18:01,326 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-20 16:18:02,113 - __main__ - INFO - Document relevance score: no
2025-10-20 16:18:02,114 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 0
2025-10-20 16:18:02,115 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 16:18:02,117 - __main__ - INFO - Rewriting query
2025-10-20 16:18:02,121 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-10-20 16:18:02,946 - __main__ - INFO - Rewrite count: 1
2025-10-20 16:18:02,948 - __main__ - INFO - Agent processing user query
2025-10-20 16:18:02,949 - __main__ - INFO - agent question:content='在特定行业中，航线设置的主要优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 14, 'prompt_tokens': 70, 'total_tokens': 84, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 14}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 70}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--72c2a6b1-fe23-4df1-a4a9-1cd6aca21bcf-0' usage_metadata={'input_tokens': 70, 'output_tokens': 14, 'total_tokens': 84, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 16:18:04,822 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 16:18:04,834 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 16:18:06,484 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:18:08,530 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:18:08,532 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:18:08,534 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 16:18:09,340 - __main__ - INFO - Document relevance score: no
2025-10-20 16:18:09,342 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 1
2025-10-20 16:18:09,342 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 16:18:09,343 - __main__ - INFO - Rewriting query
2025-10-20 16:18:09,344 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 16:18:10,142 - __main__ - INFO - Rewrite count: 2
2025-10-20 16:18:10,143 - __main__ - INFO - Agent processing user query
2025-10-20 16:18:10,143 - __main__ - INFO - agent question:content='在特定行业中，航线设置的主要优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 14, 'prompt_tokens': 70, 'total_tokens': 84, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 14}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 70}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--a0724ec8-eed0-407c-a580-10e7ad6b9bc2-0' usage_metadata={'input_tokens': 70, 'output_tokens': 14, 'total_tokens': 84, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 16:18:13,073 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 16:18:13,079 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 16:18:14,845 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:18:16,752 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:18:16,755 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:18:16,758 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 16:18:17,664 - __main__ - INFO - Document relevance score: no
2025-10-20 16:18:17,665 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 2
2025-10-20 16:18:17,666 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 16:18:17,668 - __main__ - INFO - Rewriting query
2025-10-20 16:18:17,670 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 16:18:18,535 - __main__ - INFO - Rewrite count: 3
2025-10-20 16:18:18,536 - __main__ - INFO - Agent processing user query
2025-10-20 16:18:18,538 - __main__ - INFO - agent question:content='在特定行业中，航线设置的主要优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 14, 'prompt_tokens': 70, 'total_tokens': 84, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 14}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 70}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--fd3df59a-a932-4f2b-bece-3054cea5658b-0' usage_metadata={'input_tokens': 70, 'output_tokens': 14, 'total_tokens': 84, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 16:18:20,700 - __main__ - ERROR - Error in store_memory: Error code: 502
2025-10-20 16:18:20,706 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 16:18:22,489 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:18:24,597 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:18:24,598 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:18:24,599 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 16:18:25,420 - __main__ - INFO - Document relevance score: no
2025-10-20 16:18:25,421 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 3
2025-10-20 16:18:25,422 - __main__ - INFO - Max rewrite limit reached, proceeding to generate
2025-10-20 16:18:25,423 - __main__ - INFO - Generating final response
2025-10-20 16:18:25,425 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-20 16:18:38,277 - __main__ - INFO - Database connection pool closed
2025-10-20 16:18:54,073 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:18:54,074 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:18:54,075 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:18:54,076 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:18:54,077 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:18:54,078 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:18:54,150 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:18:57,975 - __main__ - INFO - Agent processing user query
2025-10-20 16:18:57,976 - __main__ - INFO - agent question:content='按照行业航线设置其优势一般表现在：' additional_kwargs={} response_metadata={} id='1efb88f1-3c16-49b6-97a5-1130181bd4ee'
2025-10-20 16:18:58,024 - __main__ - ERROR - Error in store_memory: Error code: 404 - {'error': {'message': 'model "bge-m3:latest" not found, try pulling it first', 'type': 'api_error', 'param': None, 'code': None}}
2025-10-20 16:18:58,033 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:18:59,539 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:18:59,545 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:18:59,547 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:18:59,548 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-20 16:19:01,379 - __main__ - INFO - Document relevance score: no
2025-10-20 16:19:01,380 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 0
2025-10-20 16:19:01,380 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 16:19:01,382 - __main__ - INFO - Rewriting query
2025-10-20 16:19:01,382 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_rewrite.txt
2025-10-20 16:19:02,075 - __main__ - INFO - Rewrite count: 1
2025-10-20 16:19:02,078 - __main__ - INFO - Agent processing user query
2025-10-20 16:19:02,079 - __main__ - INFO - agent question:content='在特定行业中，航线设置的主要优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 14, 'prompt_tokens': 70, 'total_tokens': 84, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 14}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 70}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--01ea0cd3-9ec3-4544-99f2-9536f2c96202-0' usage_metadata={'input_tokens': 70, 'output_tokens': 14, 'total_tokens': 84, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 16:19:02,082 - __main__ - ERROR - Error in store_memory: Error code: 404 - {'error': {'message': 'model "bge-m3:latest" not found, try pulling it first', 'type': 'api_error', 'param': None, 'code': None}}
2025-10-20 16:19:02,088 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 16:19:03,622 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:19:03,631 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:19:03,632 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:19:03,633 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 16:19:04,294 - __main__ - INFO - Document relevance score: no
2025-10-20 16:19:04,296 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 1
2025-10-20 16:19:04,296 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 16:19:04,297 - __main__ - INFO - Rewriting query
2025-10-20 16:19:04,299 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 16:19:04,963 - __main__ - INFO - Rewrite count: 2
2025-10-20 16:19:04,964 - __main__ - INFO - Agent processing user query
2025-10-20 16:19:04,965 - __main__ - INFO - agent question:content='在特定行业中，航线设置的主要优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 14, 'prompt_tokens': 70, 'total_tokens': 84, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 14}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 70}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--7d4e2d1b-95c3-4d12-8752-2e2b65a2f53b-0' usage_metadata={'input_tokens': 70, 'output_tokens': 14, 'total_tokens': 84, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 16:19:04,971 - __main__ - ERROR - Error in store_memory: Error code: 404 - {'error': {'message': 'model "bge-m3:latest" not found, try pulling it first', 'type': 'api_error', 'param': None, 'code': None}}
2025-10-20 16:19:04,977 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 16:19:06,330 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:19:06,340 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:19:06,341 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:19:06,342 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 16:19:07,006 - __main__ - INFO - Document relevance score: no
2025-10-20 16:19:07,008 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 2
2025-10-20 16:19:07,008 - __main__ - INFO - Documents are not relevant or scoring failed, proceeding to rewrite
2025-10-20 16:19:07,009 - __main__ - INFO - Rewriting query
2025-10-20 16:19:07,010 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_rewrite.txt
2025-10-20 16:19:07,693 - __main__ - INFO - Rewrite count: 3
2025-10-20 16:19:07,694 - __main__ - INFO - Agent processing user query
2025-10-20 16:19:07,695 - __main__ - INFO - agent question:content='在特定行业中，航线设置的主要优势通常体现在哪些方面？' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 14, 'prompt_tokens': 70, 'total_tokens': 84, 'completion_tokens_details': {'accepted_prediction_tokens': None, 'audio_tokens': None, 'reasoning_tokens': None, 'rejected_prediction_tokens': None, 'text_tokens': 14}, 'prompt_tokens_details': {'audio_tokens': None, 'cached_tokens': None, 'text_tokens': 70}}, 'model_name': 'qwen2.5-vl-72b-instruct', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--92d60b12-a8ed-468b-812b-150cbbb97494-0' usage_metadata={'input_tokens': 70, 'output_tokens': 14, 'total_tokens': 84, 'input_token_details': {}, 'output_token_details': {}}
2025-10-20 16:19:07,699 - __main__ - ERROR - Error in store_memory: Error code: 404 - {'error': {'message': 'model "bge-m3:latest" not found, try pulling it first', 'type': 'api_error', 'param': None, 'code': None}}
2025-10-20 16:19:07,705 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 16:19:09,127 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:19:09,133 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:19:09,134 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:19:09,135 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-10-20 16:19:09,937 - __main__ - INFO - Document relevance score: no
2025-10-20 16:19:09,939 - __main__ - INFO - Routing based on relevance_score: no, rewrite_count: 3
2025-10-20 16:19:09,939 - __main__ - INFO - Max rewrite limit reached, proceeding to generate
2025-10-20 16:19:09,940 - __main__ - INFO - Generating final response
2025-10-20 16:19:09,941 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-20 16:19:54,079 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:20:14,667 - __main__ - INFO - Database connection pool closed
2025-10-20 16:21:36,174 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:21:36,175 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:21:36,176 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:21:36,177 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:21:36,178 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:21:36,180 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:21:36,247 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:21:38,006 - __main__ - INFO - Agent processing user query
2025-10-20 16:21:38,007 - __main__ - INFO - agent question:content='C:\\Users\\X\\.conda\\envs\\L1-project-2\\python.exe D:\\BaiduNetdiskDownload\\4、聚客大模型六期\\第六期\\课件\\10-项目2_基于LangGraph实现智能分诊系统\\day10\\项目2_基于LangGraph实现智能分诊系统\\项目2_基于LangGraph实现智能分诊系统\\L1-Project-2\\L1-Project-2\\ragAgent2.py' additional_kwargs={} response_metadata={} id='67cd87bb-ced4-4ad9-8654-4d8c69f1843c'
2025-10-20 16:21:41,385 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:21:45,518 - __main__ - INFO - Agent processing user query
2025-10-20 16:21:45,519 - __main__ - INFO - agent question:content='2025-10-20 16:18:53,821 - utils.llms - INFO - 成功初始化 qwen LLM' additional_kwargs={} response_metadata={} id='21bab223-a58e-4e7e-ac01-4f641b190531'
2025-10-20 16:21:45,750 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 16:21:48,848 - __main__ - INFO - Agent processing user query
2025-10-20 16:21:48,850 - __main__ - INFO - agent question:content='2025-10-20 16:18:53,849 - utils.llms - INFO - 成功初始化 ollama LLM' additional_kwargs={} response_metadata={} id='ed33d3ee-e62f-464a-b93c-51718ff3ad57'
2025-10-20 16:21:49,125 - __main__ - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 16:21:53,396 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:21:53,397 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:21:53,398 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:21:53,399 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:21:53,400 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:21:53,401 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:21:53,471 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:21:58,918 - __main__ - INFO - Agent processing user query
2025-10-20 16:21:58,919 - __main__ - INFO - agent question:content='按照行业航线设置其优势一般表现在：' additional_kwargs={} response_metadata={} id='612c58f2-4ca1-4ae9-8c16-cb49546ea26a'
2025-10-20 16:21:59,258 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:22:01,261 - __main__ - INFO - Calling tool: retrieve
2025-10-20 16:22:01,596 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 16:22:01,600 - __main__ - INFO - Grading documents for relevance
2025-10-20 16:22:01,602 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-20 16:22:02,570 - __main__ - INFO - Document relevance score: yes
2025-10-20 16:22:02,571 - __main__ - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-10-20 16:22:02,572 - __main__ - INFO - Documents are relevant, proceeding to generate
2025-10-20 16:22:02,574 - __main__ - INFO - Generating final response
2025-10-20 16:22:02,575 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-20 16:22:53,403 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:23:34,060 - __main__ - INFO - Database connection pool closed
2025-10-20 16:23:37,817 - __main__ - INFO - Start the server on port 8012
2025-10-20 16:23:38,368 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:23:38,368 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:23:38,369 - ragAgent - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:23:38,370 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:23:38,371 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:23:38,372 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:23:38,439 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:23:39,862 - __main__ - ERROR - Unexpected error: Failed to reach https://mermaid.ink/ API while trying to render your graph after 1 retries. To resolve this issue:
1. Check your internet connection and try again
2. Try with higher retry settings: `draw_mermaid_png(..., max_retries=5, retry_delay=2.0)`
3. Use the Pyppeteer rendering method which will render your graph locally in a browser: `draw_mermaid_png(..., draw_method=MermaidDrawMethod.PYPPETEER)`
2025-10-20 16:25:20,227 - __main__ - INFO - Start the server on port 8012
2025-10-20 16:25:20,774 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:25:20,775 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:25:20,775 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:25:20,776 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:25:20,778 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:25:20,779 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:25:20,844 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:25:21,760 - __main__ - ERROR - Unexpected error: Failed to reach https://mermaid.ink/ API while trying to render your graph after 1 retries. To resolve this issue:
1. Check your internet connection and try again
2. Try with higher retry settings: `draw_mermaid_png(..., max_retries=5, retry_delay=2.0)`
3. Use the Pyppeteer rendering method which will render your graph locally in a browser: `draw_mermaid_png(..., draw_method=MermaidDrawMethod.PYPPETEER)`
2025-10-20 16:26:40,985 - __main__ - INFO - Start the server on port 8012
2025-10-20 16:26:41,472 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:26:41,473 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:26:41,475 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:26:41,477 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:26:41,478 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:26:41,479 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:26:41,527 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:27:41,482 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:28:41,490 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:29:41,492 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:30:22,717 - __main__ - INFO - The user's user_input is: 按照行业航线设置其优势一般表现在：
2025-10-20 16:30:22,735 - ragAgent - INFO - Agent processing user query
2025-10-20 16:30:22,737 - ragAgent - INFO - agent question:content='按照行业航线设置其优势一般表现在：' additional_kwargs={} response_metadata={} id='2232b2ce-5fb0-4b75-a15e-debcbe7ce40b'
2025-10-20 16:30:22,739 - ragAgent - ERROR - Error in store_memory: sequence item 1: expected str instance, NoneType found
2025-10-20 16:30:22,756 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:30:23,548 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,586 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,600 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,628 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,658 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,682 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,734 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,764 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,811 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,839 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,843 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,893 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,934 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,955 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:23,980 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:24,005 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:30:24,047 - ragAgent - ERROR - Error in agent processing: An internal error has occured, please try again later or contact service support.
2025-10-20 16:30:41,494 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:30:57,881 - __main__ - INFO - Database connection pool closed
2025-10-20 16:30:57,882 - __main__ - INFO - The service has been shut down
2025-10-20 16:31:02,975 - __main__ - INFO - Start the server on port 8012
2025-10-20 16:31:03,477 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:31:03,477 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:31:03,478 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:31:03,480 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:31:03,481 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:31:03,482 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:31:03,529 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:31:22,372 - __main__ - INFO - The user's user_input is: 按照行业航线设置其优势一般表现在：
2025-10-20 16:31:22,396 - ragAgent - INFO - Agent processing user query
2025-10-20 16:31:22,399 - ragAgent - INFO - agent question:content='按照行业航线设置其优势一般表现在：' additional_kwargs={} response_metadata={} id='56959146-63ae-4dd9-80fd-bd169d982ef5'
2025-10-20 16:31:22,402 - ragAgent - ERROR - Error in store_memory: sequence item 1: expected str instance, NoneType found
2025-10-20 16:31:22,419 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:31:23,713 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,714 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,717 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,719 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,720 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,723 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,750 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,765 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,808 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,853 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,853 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,894 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,918 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,945 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,977 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:23,998 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:31:24,044 - ragAgent - ERROR - Error in agent processing: An internal error has occured, please try again later or contact service support.
2025-10-20 16:32:03,485 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:32:06,517 - __main__ - INFO - Database connection pool closed
2025-10-20 16:32:06,518 - __main__ - INFO - The service has been shut down
2025-10-20 16:32:58,039 - __main__ - INFO - Start the server on port 8012
2025-10-20 16:32:58,540 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:32:58,541 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:32:58,542 - ragAgent - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:32:58,543 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:32:58,545 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:32:58,546 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:32:58,613 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:33:39,381 - __main__ - INFO - The user's user_input is: 按照行业航线设置其优势一般表现在
2025-10-20 16:33:39,406 - ragAgent - INFO - Agent processing user query
2025-10-20 16:33:39,407 - ragAgent - INFO - agent question:content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='c2edef1b-3c77-41c7-ae9a-ab28554ef1b9'
2025-10-20 16:33:39,408 - ragAgent - ERROR - Error in store_memory: sequence item 1: expected str instance, NoneType found
2025-10-20 16:33:39,416 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:33:40,179 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,197 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,236 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,258 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,305 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,314 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,359 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,398 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,448 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,471 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,474 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,530 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,685 - ragAgent - ERROR - Error in agent processing: An internal error has occured, please try again later or contact service support.
2025-10-20 16:33:40,689 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,695 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,697 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:40,699 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:33:58,548 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:34:58,549 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:35:00,779 - __main__ - INFO - Database connection pool closed
2025-10-20 16:35:00,780 - __main__ - INFO - The service has been shut down
2025-10-20 16:39:57,984 - __main__ - INFO - Start the server on port 8012
2025-10-20 16:39:58,480 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:39:58,481 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:39:58,482 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:39:58,483 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:39:58,485 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:39:58,485 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:39:58,552 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:40:20,101 - __main__ - INFO - The user's user_input is: 按照行业航线设置其优势一般表现在
2025-10-20 16:40:20,137 - ragAgent - INFO - Agent processing user query
2025-10-20 16:40:20,140 - ragAgent - INFO - agent question: content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='da5d7a34-3218-4859-865d-36e4710e4b6f'
2025-10-20 16:40:20,143 - ragAgent - ERROR - Error in store_memory: sequence item 1: expected str instance, NoneType found
2025-10-20 16:40:20,158 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:40:21,220 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,222 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,226 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,509 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,559 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,561 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,622 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,648 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,704 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,723 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,758 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,783 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,810 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,834 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,863 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,911 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:40:21,924 - ragAgent - ERROR - Error invoking agent chain: An internal error has occured, please try again later or contact service support.
2025-10-20 16:40:58,487 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:41:58,489 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:42:45,676 - __main__ - INFO - Database connection pool closed
2025-10-20 16:42:45,677 - __main__ - INFO - The service has been shut down
2025-10-20 16:42:49,772 - __main__ - INFO - Start the server on port 8012
2025-10-20 16:42:50,256 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:42:50,258 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:42:50,259 - ragAgent - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:42:50,260 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:42:50,261 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:42:50,262 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:42:50,325 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:43:12,753 - __main__ - INFO - The user's user_input is: 按照行业航线设置其优势一般表现在
2025-10-20 16:43:12,782 - ragAgent - INFO - Agent processing user query
2025-10-20 16:43:12,784 - ragAgent - INFO - agent question: content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='16d78d8b-4b19-4e97-8690-7ea47987a1c2'
2025-10-20 16:43:12,785 - ragAgent - ERROR - Error in store_memory: sequence item 1: expected str instance, NoneType found
2025-10-20 16:43:12,794 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:43:13,973 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:13,975 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,012 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,021 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,048 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,086 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,136 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,161 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,256 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,274 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,290 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,305 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,330 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,363 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,386 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,416 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 16:43:14,453 - ragAgent - ERROR - Error invoking agent chain: An internal error has occured, please try again later or contact service support.
2025-10-20 16:43:34,681 - __main__ - INFO - Database connection pool closed
2025-10-20 16:43:34,682 - __main__ - INFO - The service has been shut down
2025-10-20 16:43:38,354 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:43:38,355 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:43:38,356 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:43:38,357 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:43:38,358 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:43:38,359 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:43:38,420 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:43:41,710 - __main__ - INFO - Agent processing user query
2025-10-20 16:43:41,711 - __main__ - INFO - agent question: content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='1c75b743-0c0b-4f74-a1a3-88753d762419'
2025-10-20 16:43:44,700 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:44:00,617 - __main__ - INFO - Agent response received successfully
2025-10-20 16:44:33,856 - __main__ - INFO - Database connection pool closed
2025-10-20 16:44:37,736 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 16:44:37,738 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 16:44:37,738 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 16:44:37,740 - __main__ - INFO - Database connection pool initialized
2025-10-20 16:44:37,741 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 16:44:37,742 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:44:37,804 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 16:44:44,727 - __main__ - INFO - Agent processing user query
2025-10-20 16:44:44,728 - __main__ - INFO - agent question: content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='fee9ad2f-cae4-4f9a-9936-d736431247af'
2025-10-20 16:44:44,980 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 16:45:00,997 - __main__ - INFO - Agent response received successfully
2025-10-20 16:45:37,758 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:46:37,767 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:47:37,769 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:48:37,771 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:49:37,772 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:50:37,773 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:51:37,775 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:52:37,776 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:53:37,778 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:54:37,780 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:55:37,782 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:56:37,783 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:57:37,784 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:58:37,785 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 16:59:37,786 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:00:37,788 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:01:37,789 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:02:37,791 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:03:37,793 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:04:37,794 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:05:37,795 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:06:37,796 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:07:37,798 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:08:37,799 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:09:37,809 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:10:37,810 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:11:37,814 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:12:30,312 - __main__ - INFO - Database connection pool closed
2025-10-20 17:12:39,884 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 17:12:39,886 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 17:12:39,886 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 17:12:39,887 - __main__ - INFO - Database connection pool initialized
2025-10-20 17:12:39,889 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 17:12:39,890 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:12:39,950 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 17:13:00,163 - __main__ - INFO - Agent processing user query
2025-10-20 17:13:00,163 - __main__ - INFO - agent question: content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='c288af21-7b5b-4038-bdcc-a6a8821b950f'
2025-10-20 17:13:03,675 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 17:13:05,540 - __main__ - INFO - Agent response received successfully
2025-10-20 17:13:05,542 - __main__ - INFO - Calling tool: retrieve
2025-10-20 17:13:05,829 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-10-20 17:13:05,834 - __main__ - INFO - Grading documents for relevance
2025-10-20 17:13:05,834 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-10-20 17:13:06,977 - __main__ - INFO - Document relevance score: yes
2025-10-20 17:13:06,978 - __main__ - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-10-20 17:13:06,979 - __main__ - INFO - Documents are relevant, proceeding to generate
2025-10-20 17:13:06,983 - __main__ - INFO - Generating final response
2025-10-20 17:13:06,983 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-10-20 17:13:30,406 - __main__ - INFO - Start the server on port 8012
2025-10-20 17:13:30,899 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-10-20 17:13:30,900 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-10-20 17:13:30,900 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-10-20 17:13:30,903 - __main__ - INFO - Database connection pool initialized
2025-10-20 17:13:30,904 - __main__ - DEBUG - Database connection pool initialized
2025-10-20 17:13:30,905 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:13:30,989 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-10-20 17:13:39,891 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:13:46,214 - __main__ - INFO - The user's user_input is: streamlit run chat.py
2025-10-20 17:13:46,233 - ragAgent - INFO - Agent processing user query
2025-10-20 17:13:46,234 - ragAgent - INFO - agent question: content='streamlit run chat.py' additional_kwargs={} response_metadata={} id='b5c8c992-113d-4ede-9dec-68763de1b448'
2025-10-20 17:13:46,237 - ragAgent - ERROR - Error in store_memory: sequence item 1: expected str instance, NoneType found
2025-10-20 17:13:46,246 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-10-20 17:13:46,848 - __main__ - INFO - Streaming chunk from agent: 您的
2025-10-20 17:13:46,849 - __main__ - INFO - Streaming chunk from agent: 问题
2025-10-20 17:13:46,866 - __main__ - INFO - Streaming chunk from agent: 似乎
2025-10-20 17:13:46,891 - __main__ - INFO - Streaming chunk from agent: 与
2025-10-20 17:13:46,944 - __main__ - INFO - Streaming chunk from agent: 货
2025-10-20 17:13:46,951 - __main__ - INFO - Streaming chunk from agent: 代
2025-10-20 17:13:47,076 - __main__ - INFO - Streaming chunk from agent: 知识
2025-10-20 17:13:47,086 - __main__ - INFO - Streaming chunk from agent: 无关
2025-10-20 17:13:47,092 - __main__ - INFO - Streaming chunk from agent: ，
2025-10-20 17:13:47,108 - __main__ - INFO - Streaming chunk from agent: 而是
2025-10-20 17:13:47,137 - __main__ - INFO - Streaming chunk from agent: 关于
2025-10-20 17:13:47,140 - __main__ - INFO - Streaming chunk from agent: 运行
2025-10-20 17:13:47,141 - __main__ - INFO - Streaming chunk from agent: 一个
2025-10-20 17:13:47,166 - __main__ - INFO - Streaming chunk from agent: 名为
2025-10-20 17:13:47,194 - __main__ - INFO - Streaming chunk from agent: `
2025-10-20 17:13:47,346 - __main__ - INFO - Streaming chunk from agent: chat
2025-10-20 17:13:47,347 - __main__ - INFO - Streaming chunk from agent: .py
2025-10-20 17:13:47,347 - __main__ - INFO - Streaming chunk from agent: `
2025-10-20 17:13:47,349 - __main__ - INFO - Streaming chunk from agent: 的
2025-10-20 17:13:47,349 - __main__ - INFO - Streaming chunk from agent: Stream
2025-10-20 17:13:47,363 - __main__ - INFO - Streaming chunk from agent: lit
2025-10-20 17:13:47,377 - __main__ - INFO - Streaming chunk from agent: 应用程序
2025-10-20 17:13:47,446 - __main__ - INFO - Streaming chunk from agent: 。
2025-10-20 17:13:47,447 - __main__ - INFO - Streaming chunk from agent: 如果您
2025-10-20 17:13:47,505 - __main__ - INFO - Streaming chunk from agent: 需要
2025-10-20 17:13:47,506 - __main__ - INFO - Streaming chunk from agent: 了解
2025-10-20 17:13:47,511 - __main__ - INFO - Streaming chunk from agent: 如何
2025-10-20 17:13:47,549 - __main__ - INFO - Streaming chunk from agent: 使用
2025-10-20 17:13:47,592 - __main__ - INFO - Streaming chunk from agent: Stream
2025-10-20 17:13:47,912 - __main__ - INFO - Streaming chunk from agent: lit
2025-10-20 17:13:47,970 - __main__ - INFO - Streaming chunk from agent: 或
2025-10-20 17:13:47,975 - __main__ - INFO - Streaming chunk from agent: 有关
2025-10-20 17:13:47,978 - __main__ - INFO - Streaming chunk from agent: 编程
2025-10-20 17:13:48,023 - __main__ - INFO - Streaming chunk from agent: 的帮助
2025-10-20 17:13:48,338 - __main__ - INFO - Streaming chunk from agent: ，
2025-10-20 17:13:48,369 - __main__ - INFO - Streaming chunk from agent: 我
2025-10-20 17:13:48,412 - __main__ - INFO - Streaming chunk from agent: 建议
2025-10-20 17:13:48,436 - __main__ - INFO - Streaming chunk from agent: 您
2025-10-20 17:13:48,456 - __main__ - INFO - Streaming chunk from agent: 查阅
2025-10-20 17:13:48,497 - __main__ - INFO - Streaming chunk from agent: 相关的
2025-10-20 17:13:48,507 - __main__ - INFO - Streaming chunk from agent: 开发
2025-10-20 17:13:48,561 - __main__ - INFO - Streaming chunk from agent: 文档
2025-10-20 17:13:48,564 - __main__ - INFO - Streaming chunk from agent: 或
2025-10-20 17:13:48,592 - __main__ - INFO - Streaming chunk from agent: 在线
2025-10-20 17:13:48,643 - __main__ - INFO - Streaming chunk from agent: 资源
2025-10-20 17:13:48,648 - __main__ - INFO - Streaming chunk from agent: 。
2025-10-20 17:13:48,686 - __main__ - INFO - Streaming chunk from agent: 对于
2025-10-20 17:13:48,707 - __main__ - INFO - Streaming chunk from agent: 货
2025-10-20 17:13:48,761 - __main__ - INFO - Streaming chunk from agent: 代
2025-10-20 17:13:48,774 - __main__ - INFO - Streaming chunk from agent: 相关
2025-10-20 17:13:48,793 - __main__ - INFO - Streaming chunk from agent: 的问题
2025-10-20 17:13:48,820 - __main__ - INFO - Streaming chunk from agent: ，
2025-10-20 17:13:48,889 - __main__ - INFO - Streaming chunk from agent: 我会
2025-10-20 17:13:48,892 - __main__ - INFO - Streaming chunk from agent: 很
2025-10-20 17:13:48,920 - __main__ - INFO - Streaming chunk from agent: 乐意
2025-10-20 17:13:48,931 - __main__ - INFO - Streaming chunk from agent: 帮助
2025-10-20 17:13:48,977 - __main__ - INFO - Streaming chunk from agent: 解答
2025-10-20 17:13:48,985 - __main__ - INFO - Streaming chunk from agent: 。
2025-10-20 17:13:49,025 - __main__ - INFO - Streaming chunk from agent: 请问
2025-10-20 17:13:49,031 - __main__ - INFO - Streaming chunk from agent: 您
2025-10-20 17:13:49,074 - __main__ - INFO - Streaming chunk from agent: 有
2025-10-20 17:13:49,092 - __main__ - INFO - Streaming chunk from agent: 其他
2025-10-20 17:13:49,114 - __main__ - INFO - Streaming chunk from agent: 关于
2025-10-20 17:13:49,146 - __main__ - INFO - Streaming chunk from agent: 货
2025-10-20 17:13:49,194 - __main__ - INFO - Streaming chunk from agent: 代
2025-10-20 17:13:49,199 - __main__ - INFO - Streaming chunk from agent: 方面
2025-10-20 17:13:49,333 - ragAgent - INFO - Agent response received successfully
2025-10-20 17:13:49,333 - __main__ - INFO - Streaming chunk from agent: 的问题
2025-10-20 17:13:49,336 - __main__ - INFO - Streaming chunk from agent: 吗
2025-10-20 17:13:49,336 - __main__ - INFO - Streaming chunk from agent: ？
2025-10-20 17:13:49,337 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:57,663 - __main__ - INFO - The user's user_input is: 按照行业航线设置其优势一般表现在
2025-10-20 17:13:57,680 - ragAgent - INFO - Agent processing user query
2025-10-20 17:13:57,682 - ragAgent - INFO - agent question: content='按照行业航线设置其优势一般表现在' additional_kwargs={} response_metadata={} id='b4c3d0c4-c641-4c66-a887-c392819d911c'
2025-10-20 17:13:57,685 - ragAgent - ERROR - Error in store_memory: sequence item 1: expected str instance, NoneType found
2025-10-20 17:13:57,695 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-10-20 17:13:58,575 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:58,604 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:58,626 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:58,653 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:58,690 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:58,712 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:58,842 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:58,850 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:58,852 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:58,866 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:58,878 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:58,950 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:58,975 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:58,996 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:59,017 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:59,052 - __main__ - INFO - Streaming chunk from agent: 
2025-10-20 17:13:59,111 - ragAgent - ERROR - Error invoking agent chain: An internal error has occured, please try again later or contact service support.
2025-10-20 17:14:30,906 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:14:39,892 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:15:30,908 - ragAgent - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-10-20 17:15:39,893 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:21:12,487 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-03 11:21:12,499 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-03 11:21:12,499 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-03 11:21:12,500 - __main__ - INFO - Database connection pool initialized
2025-11-03 11:21:12,501 - __main__ - DEBUG - Database connection pool initialized
2025-11-03 11:21:12,502 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:21:12,601 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-03 11:21:36,185 - __main__ - INFO - Database connection pool closed
2025-11-03 11:23:02,215 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-03 11:23:02,217 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-03 11:23:02,219 - ragAgent - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-03 11:23:02,307 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-03 11:23:51,784 - ragAgent - INFO - Agent processing user query
2025-11-03 11:23:51,785 - ragAgent - INFO - agent question: content='美国线的限制？' additional_kwargs={} response_metadata={} id='78fca2bc-b171-4692-b095-22153b70cc57'
2025-11-03 11:23:54,403 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-11-03 11:23:55,975 - ragAgent - INFO - Agent response received successfully
2025-11-03 11:23:56,245 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-11-03 11:23:56,249 - ragAgent - INFO - Grading documents for relevance
2025-11-03 11:23:56,251 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-11-03 11:23:57,292 - ragAgent - INFO - Document relevance score: yes
2025-11-03 11:23:57,297 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-11-03 11:23:57,298 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-11-03 11:23:57,302 - ragAgent - INFO - Generating final response
2025-11-03 11:23:57,309 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-11-03 11:24:49,642 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-03 11:24:49,644 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-03 11:24:49,644 - __main__ - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-03 11:24:49,645 - __main__ - INFO - Database connection pool initialized
2025-11-03 11:24:49,646 - __main__ - DEBUG - Database connection pool initialized
2025-11-03 11:24:49,647 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:24:49,716 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-03 11:24:59,129 - __main__ - INFO - Agent processing user query
2025-11-03 11:24:59,131 - __main__ - INFO - agent question: content='美国线的限制' additional_kwargs={} response_metadata={} id='b077302b-0b1c-4333-b306-b2e6dc49bf74'
2025-11-03 11:24:59,369 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-11-03 11:25:01,030 - __main__ - INFO - Agent response received successfully
2025-11-03 11:25:01,032 - __main__ - INFO - Calling tool: retrieve
2025-11-03 11:25:01,364 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-11-03 11:25:01,370 - __main__ - INFO - Grading documents for relevance
2025-11-03 11:25:01,371 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-11-03 11:25:02,410 - __main__ - INFO - Document relevance score: yes
2025-11-03 11:25:02,411 - __main__ - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-11-03 11:25:02,412 - __main__ - INFO - Documents are relevant, proceeding to generate
2025-11-03 11:25:02,418 - __main__ - INFO - Generating final response
2025-11-03 11:25:02,418 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-11-03 11:25:49,649 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:26:49,650 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:27:49,653 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:28:49,654 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:29:49,655 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:30:49,657 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:31:49,658 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:32:49,660 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:33:39,100 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-03 11:33:39,101 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-03 11:33:39,102 - ragAgent - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-03 11:33:39,181 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-03 11:33:48,251 - ragAgent - INFO - Agent processing user query
2025-11-03 11:33:48,254 - ragAgent - INFO - agent question: content='美国线的限制' additional_kwargs={} response_metadata={} id='007068ea-097a-405a-b17e-a55e2deca139'
2025-11-03 11:33:49,662 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:33:50,647 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-11-03 11:33:52,460 - ragAgent - INFO - Agent response received successfully
2025-11-03 11:33:52,716 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-11-03 11:33:52,719 - ragAgent - INFO - Grading documents for relevance
2025-11-03 11:33:52,727 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-11-03 11:33:53,745 - ragAgent - INFO - Document relevance score: yes
2025-11-03 11:33:53,752 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-11-03 11:33:53,754 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-11-03 11:33:53,758 - ragAgent - INFO - Generating final response
2025-11-03 11:33:53,764 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-11-03 11:34:49,663 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:35:49,666 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:36:49,667 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:37:49,669 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:38:49,670 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:39:49,672 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:40:49,673 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:41:49,675 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:42:49,676 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:43:32,111 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-03 11:43:32,112 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-03 11:43:32,116 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-03 11:43:32,191 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-03 11:43:45,163 - ragAgent - INFO - Agent processing user query
2025-11-03 11:43:45,164 - ragAgent - INFO - agent question: content='美国线的限制' additional_kwargs={} response_metadata={} id='164e2556-c221-40e8-a7eb-c5f5781d1f2e'
2025-11-03 11:43:48,172 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-11-03 11:43:49,631 - ragAgent - INFO - Agent response received successfully
2025-11-03 11:43:49,683 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:43:49,911 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-11-03 11:43:49,970 - ragAgent - INFO - Grading documents for relevance
2025-11-03 11:43:49,971 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-11-03 11:43:50,947 - ragAgent - INFO - Document relevance score: yes
2025-11-03 11:43:50,950 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-11-03 11:43:50,952 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-11-03 11:43:51,022 - ragAgent - INFO - Generating final response
2025-11-03 11:43:51,023 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-11-03 11:44:40,153 - ragAgent - INFO - Agent processing user query
2025-11-03 11:44:40,160 - ragAgent - INFO - agent question: content='欧洲航线的主要港口有' additional_kwargs={} response_metadata={} id='d01df5a7-2efe-43d6-912e-b3dd93f81e8a'
2025-11-03 11:44:40,430 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-11-03 11:44:42,206 - ragAgent - INFO - Agent response received successfully
2025-11-03 11:44:42,472 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-11-03 11:44:42,528 - ragAgent - INFO - Grading documents for relevance
2025-11-03 11:44:42,529 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-11-03 11:44:43,404 - ragAgent - INFO - Document relevance score: yes
2025-11-03 11:44:43,407 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-11-03 11:44:43,408 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-11-03 11:44:43,473 - ragAgent - INFO - Generating final response
2025-11-03 11:44:43,521 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-11-03 11:44:49,685 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-03 11:45:29,252 - __main__ - INFO - Database connection pool closed
2025-11-09 20:49:04,260 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-09 20:49:04,273 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-09 20:49:04,273 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-09 20:49:04,275 - __main__ - INFO - Database connection pool initialized
2025-11-09 20:49:04,276 - __main__ - DEBUG - Database connection pool initialized
2025-11-09 20:49:04,277 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-09 20:49:04,342 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-09 20:49:36,115 - __main__ - INFO - Agent processing user query
2025-11-09 20:49:36,115 - __main__ - INFO - agent question: content='美国线有哪些限制' additional_kwargs={} response_metadata={} id='56dd882d-02b8-433c-8bea-f570b6efbafb'
2025-11-09 20:49:39,532 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-11-09 20:49:41,111 - __main__ - INFO - Agent response received successfully
2025-11-09 20:49:41,114 - __main__ - INFO - Calling tool: retrieve
2025-11-09 20:49:41,384 - __main__ - INFO - Tool retrieve routed to grade_documents based on config
2025-11-09 20:49:41,390 - __main__ - INFO - Grading documents for relevance
2025-11-09 20:49:41,392 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-11-09 20:49:42,379 - __main__ - INFO - Document relevance score: yes
2025-11-09 20:49:42,381 - __main__ - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-11-09 20:49:42,381 - __main__ - INFO - Documents are relevant, proceeding to generate
2025-11-09 20:49:42,388 - __main__ - INFO - Generating final response
2025-11-09 20:49:42,388 - __main__ - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-11-09 20:50:04,278 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-11-09 20:57:29,480 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-09 20:57:29,483 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-09 20:57:29,484 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-09 20:57:29,560 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-09 20:57:46,302 - ragAgent - INFO - Agent processing user query
2025-11-09 20:57:46,305 - ragAgent - INFO - agent question: content='美国线的限制是？' additional_kwargs={} response_metadata={} id='e227b9b5-e55d-4213-b9d9-ae47c3c11dba'
2025-11-09 20:57:46,590 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_agent.txt
2025-11-09 20:58:04,500 - ragAgent - INFO - Agent response received successfully
2025-11-09 20:59:50,255 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-09 20:59:50,256 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-09 20:59:50,257 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-09 20:59:50,326 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-09 21:00:01,530 - ragAgent - INFO - Agent processing user query
2025-11-09 21:00:01,534 - ragAgent - INFO - agent question: content='美国线的限制？' additional_kwargs={} response_metadata={} id='2e14c083-9679-46df-b8c6-40232b2234bc'
2025-11-09 21:00:01,810 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-11-09 21:00:19,662 - ragAgent - INFO - Agent response received successfully
2025-11-09 21:00:42,318 - ragAgent - INFO - Agent processing user query
2025-11-09 21:00:42,321 - ragAgent - INFO - agent question: content='介绍太平洋航线？' additional_kwargs={} response_metadata={} id='1e0abb64-483b-4778-8042-d36bd95aaca4'
2025-11-09 21:00:42,596 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-11-09 21:00:43,864 - ragAgent - INFO - Agent response received successfully
2025-11-09 21:00:44,232 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-11-09 21:00:44,233 - ragAgent - INFO - Grading documents for relevance
2025-11-09 21:00:44,235 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_grade.txt
2025-11-09 21:00:45,148 - ragAgent - INFO - Document relevance score: yes
2025-11-09 21:00:45,152 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-11-09 21:00:45,154 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-11-09 21:00:45,158 - ragAgent - INFO - Generating final response
2025-11-09 21:00:45,165 - ragAgent - INFO - Loading and caching prompt template from prompts/prompt_template_generate.txt
2025-11-09 21:01:24,256 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-09 21:01:24,257 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-09 21:01:24,258 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-09 21:01:24,326 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-09 21:01:59,001 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-09 21:01:59,003 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-09 21:01:59,003 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-09 21:01:59,071 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-09 21:02:03,266 - ragAgent - INFO - Agent processing user query
2025-11-09 21:02:03,274 - ragAgent - INFO - agent question: content='介绍太平洋航线？' additional_kwargs={} response_metadata={} id='aefd74e0-a4f4-4c35-90f8-b7c7876a2717'
2025-11-09 21:02:03,537 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-11-09 21:02:04,827 - ragAgent - INFO - Agent response received successfully
2025-11-09 21:02:05,131 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-11-09 21:02:05,133 - ragAgent - INFO - Grading documents for relevance
2025-11-09 21:02:05,133 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-11-09 21:02:06,077 - ragAgent - INFO - Document relevance score: yes
2025-11-09 21:02:06,081 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-11-09 21:02:06,083 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-11-09 21:02:06,087 - ragAgent - INFO - Generating final response
2025-11-09 21:02:06,093 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-11-09 21:03:04,202 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-09 21:03:04,203 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-09 21:03:04,204 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-09 21:03:04,274 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-09 21:03:06,735 - ragAgent - INFO - Agent processing user query
2025-11-09 21:03:06,737 - ragAgent - INFO - agent question: content='介绍太平洋航线？' additional_kwargs={} response_metadata={} id='f8ccce42-1f3b-45ca-9dee-c936c134ac26'
2025-11-09 21:03:07,039 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-11-09 21:03:08,433 - ragAgent - INFO - Agent response received successfully
2025-11-09 21:03:08,719 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-11-09 21:03:08,721 - ragAgent - INFO - Grading documents for relevance
2025-11-09 21:03:08,722 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-11-09 21:03:09,651 - ragAgent - INFO - Document relevance score: yes
2025-11-09 21:03:09,653 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-11-09 21:03:09,655 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-11-09 21:03:09,658 - ragAgent - INFO - Generating final response
2025-11-09 21:03:09,667 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-11-09 21:03:38,817 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-09 21:03:38,818 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-09 21:03:38,819 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-09 21:03:38,885 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-09 21:03:47,731 - ragAgent - INFO - Agent processing user query
2025-11-09 21:03:47,734 - ragAgent - INFO - agent question: content='美国线限制' additional_kwargs={} response_metadata={} id='38d61321-d4cf-44a6-885a-2ef1e7c3ec1f'
2025-11-09 21:03:48,007 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-11-09 21:03:49,333 - ragAgent - INFO - Agent response received successfully
2025-11-09 21:03:49,589 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-11-09 21:03:49,592 - ragAgent - INFO - Grading documents for relevance
2025-11-09 21:03:49,593 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-11-09 21:03:50,604 - ragAgent - INFO - Document relevance score: yes
2025-11-09 21:03:50,606 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-11-09 21:03:50,608 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-11-09 21:03:50,612 - ragAgent - INFO - Generating final response
2025-11-09 21:03:50,619 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-11-09 21:04:49,582 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-09 21:04:49,583 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-09 21:04:49,583 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-09 21:04:49,643 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-09 21:05:01,503 - ragAgent - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-11-09 21:05:01,504 - ragAgent - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-11-09 21:05:01,505 - ragAgent - INFO - Initialized ToolConfig with tools: {'tavily_search', 'retrieve'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-11-09 21:05:01,582 - ragAgent - INFO - Connection db_connection_pool status: OK, test connection successful
2025-11-09 21:05:05,310 - ragAgent - INFO - Agent processing user query
2025-11-09 21:05:05,312 - ragAgent - INFO - agent question: content='美国线限制' additional_kwargs={} response_metadata={} id='3687ebf9-82f4-4c92-93eb-b7658df341d4'
2025-11-09 21:05:05,536 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_agent.txt
2025-11-09 21:05:06,899 - ragAgent - INFO - Agent response received successfully
2025-11-09 21:05:07,140 - ragAgent - INFO - Tool retrieve routed to grade_documents based on config
2025-11-09 21:05:07,142 - ragAgent - INFO - Grading documents for relevance
2025-11-09 21:05:07,144 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_grade.txt
2025-11-09 21:05:08,219 - ragAgent - INFO - Document relevance score: yes
2025-11-09 21:05:08,222 - ragAgent - INFO - Routing based on relevance_score: yes, rewrite_count: 0
2025-11-09 21:05:08,223 - ragAgent - INFO - Documents are relevant, proceeding to generate
2025-11-09 21:05:08,226 - ragAgent - INFO - Generating final response
2025-11-09 21:05:08,232 - ragAgent - INFO - Using cached prompt template for prompts/prompt_template_generate.txt
2025-12-14 22:54:24,385 - __main__ - DEBUG - Tool 'retrieve' routed to 'grade_documents' (retrieval tool)
2025-12-14 22:54:24,388 - __main__ - DEBUG - Tool 'tavily_search' routed to 'generate' (non-retrieval tool)
2025-12-14 22:54:24,388 - __main__ - INFO - Initialized ToolConfig with tools: {'retrieve', 'tavily_search'}, routing: {'retrieve': 'grade_documents', 'tavily_search': 'generate'}
2025-12-14 22:54:24,389 - __main__ - INFO - Database connection pool initialized
2025-12-14 22:54:24,392 - __main__ - DEBUG - Database connection pool initialized
2025-12-14 22:54:24,393 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 22:54:24,465 - __main__ - INFO - Connection db_connection_pool status: OK, test connection successful
2025-12-14 22:55:24,395 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 22:56:24,397 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 22:57:24,398 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 22:58:24,399 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 22:59:24,401 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:00:24,402 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:01:24,403 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:02:24,404 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:03:24,406 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:04:24,407 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:05:24,408 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:06:24,409 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:07:24,411 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:08:24,413 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:09:24,415 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:10:24,418 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:11:24,421 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:12:24,423 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:13:24,424 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:14:24,426 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:15:24,428 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:16:24,429 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:17:24,430 - __main__ - INFO - Connection db_connection_pool status: 0/20 connections in use
2025-12-14 23:17:37,860 - __main__ - INFO - Database connection pool closed
